<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ÿ™ÿ≠ÿ≥ŸäŸÜ SEO ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä -->
    <title>XO Arena - ÿ£ŸÇŸàŸâ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ŸÖÿπ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸàŸÜÿ∏ÿßŸÖ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ŸàÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ</title>
    <meta name="description" content="XO Arena: ÿ£ŸàŸÑ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÖÿ™ŸÉÿßŸÖŸÑ. ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°ÿå ŸÜÿ∏ÿßŸÖ ÿ™ÿµŸÜŸäŸÅÿå ŸàŸÜŸÇÿßÿ∑ XP. 5 ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸäÿå ŸÜÿ∏ÿßŸÖ ÿ•ŸÜÿ¨ÿßÿ≤ÿßÿ™ÿå ŸàŸÖÿ™ÿ¨ÿ± ÿ≥ŸÉŸÜÿßÿ™.">
    <meta name="keywords" content="ŸÑÿπÿ®ÿ© XO, ÿ•ŸÉÿ≥ ÿ£Ÿà, tic tac toe, ŸÑÿπÿ®ÿ© ÿ∞ŸÉÿßÿ°, ÿßŸÑÿπÿßÿ® ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ©, ÿßŸÑÿπÿßÿ® ÿπÿ±ÿ®Ÿäÿ©, ÿ™ÿ≠ÿØŸä ÿßŸÑÿ∞ŸÉÿßÿ°, eclipse games, ÿßŸÑÿπÿßÿ® ŸÉŸÖÿ®ŸäŸàÿ™ÿ±, ÿßŸÑÿπÿßÿ® ŸÖÿ¨ÿßŸÜŸäÿ©, ŸÑÿπÿ®ÿ© ÿ£ŸàŸÜŸÑÿßŸäŸÜ">
    <meta name="author" content="Eclipse Games">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="revisit-after" content="7 days">
    <meta name="language" content="Arabic">
    
    <!-- Open Graph / ŸÅŸäÿ≥ÿ®ŸàŸÉ -->
    <meta property="og:title" content="XO Arena - ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿßŸÑÿ•ÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ">
    <meta property="og:description" content="ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÖÿπ 5 ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿµÿπŸàÿ®ÿ© ŸàŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÖÿ™ŸÉÿßŸÖŸÑ. ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ° ÿ£Ÿà ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿ™ÿµŸÜŸäŸÅ.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://xo-arena-1.github.io/XO-Arena/">
    <meta property="og:image" content="https://files.catbox.moe/f28twh.png">
    <meta property="og:site_name" content="Eclipse Games">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="XO Arena - ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà">
    <meta name="twitter:description" content="ÿßÿÆÿ™ÿ®ÿ± ÿ∞ŸÉÿßÿ¶ŸÉ ŸÅŸä ÿ£ŸÇŸàŸâ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ŸÖÿπ 5 ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿµÿπŸàÿ®ÿ© ŸàŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ">
    <meta name="twitter:image" content="https://files.catbox.moe/f28twh.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%2300d4ff'/%3E%3Ctext x='50' y='70' font-size='70' text-anchor='middle' fill='white' font-family='Arial'%3EXO%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%2300d4ff'/%3E%3Ctext x='50' y='70' font-size='70' text-anchor='middle' fill='white' font-family='Arial'%3EXO%3C/text%3E%3C/svg%3E">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://xo-arena-1.github.io/XO-Arena/">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Cairo', 'sans-serif'],
                        display: ['Orbitron', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-color: #0a0e1a;
            --bg-secondary: #141b2d;
            --bg-tertiary: #1a2340;
            --accent-color: #00d4ff;
            --accent-secondary: #ff3366;
            --accent-tertiary: #00ff88;
            --glow-color: rgba(0, 212, 255, 0.4);
            --glow-secondary: rgba(255, 51, 102, 0.4);
            --text-primary: #f0f4ff;
            --text-secondary: #8892b0;
            --border-color: rgba(0, 212, 255, 0.2);
            --rare-color: #4a90e2;
            --epic-color: #9b59b6;
            --legendary-color: #f1c40f;
            --legendary-glow: rgba(241, 196, 15, 0.6);
        }

        .theme-red {
            --bg-color: #0f0505;
            --bg-secondary: #1a0a0a;
            --bg-tertiary: #250f0f;
            --accent-color: #ff4444;
            --accent-secondary: #ff6b35;
            --accent-tertiary: #ffaa00;
            --glow-color: rgba(255, 68, 68, 0.4);
            --glow-secondary: rgba(255, 107, 53, 0.4);
            --text-primary: #fff5f5;
            --text-secondary: #ffaaaa;
            --border-color: rgba(255, 68, 68, 0.2);
        }

        .theme-purple {
            --bg-color: #0a0514;
            --bg-secondary: #140f20;
            --bg-tertiary: #1e1630;
            --accent-color: #a855f7;
            --accent-secondary: #ec4899;
            --accent-tertiary: #8b5cf6;
            --glow-color: rgba(168, 85, 247, 0.4);
            --glow-secondary: rgba(236, 72, 153, 0.4);
            --text-primary: #f5f0ff;
            --text-secondary: #c4b5fd;
            --border-color: rgba(168, 85, 247, 0.2);
        }

        .theme-green {
            --bg-color: #051a0a;
            --bg-secondary: #0a2e14;
            --bg-tertiary: #0f3a1e;
            --accent-color: #00ff88;
            --accent-secondary: #22c55e;
            --accent-tertiary: #84cc16;
            --glow-color: rgba(0, 255, 136, 0.4);
            --glow-secondary: rgba(34, 197, 94, 0.4);
            --text-primary: #f0fff5;
            --text-secondary: #86efac;
            --border-color: rgba(0, 255, 136, 0.2);
        }

        .theme-gold {
            --bg-color: #0f0d05;
            --bg-secondary: #1a170a;
            --bg-tertiary: #252010;
            --accent-color: #ffd700;
            --accent-secondary: #ffaa00;
            --accent-tertiary: #ff8800;
            --glow-color: rgba(255, 215, 0, 0.4);
            --glow-secondary: rgba(255, 170, 0, 0.4);
            --text-primary: #fffbf0;
            --text-secondary: #fcd34d;
            --border-color: rgba(255, 215, 0, 0.2);
        }

        .rainbow-mode {
            animation: rainbow-bg 10s linear infinite !important;
        }

        @keyframes rainbow-bg {
            0% { background-color: #ff0000; }
            17% { background-color: #ff8800; }
            33% { background-color: #ffff00; }
            50% { background-color: #00ff00; }
            67% { background-color: #0088ff; }
            83% { background-color: #8800ff; }
            100% { background-color: #ff0000; }
        }

        * {
            box-sizing: border-box;
        }

        body {
            background: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Cairo', sans-serif;
            transition: background 0.5s ease, color 0.3s ease;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { 
            background: var(--accent-color); 
            border-radius: 3px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 0 20px var(--glow-color), inset 0 0 20px rgba(255,255,255,0.05);
            }
            50% { 
                box-shadow: 0 0 40px var(--glow-color), 0 0 60px var(--glow-color), inset 0 0 30px rgba(255,255,255,0.1);
            }
        }

        @keyframes pop-in {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            70% { transform: scale(1.2) rotate(10deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes win-line {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.5); }
            100% { filter: brightness(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            60% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
        }

        @keyframes ripple {
            0% { transform: scale(0); opacity: 0.8; }
            100% { transform: scale(4); opacity: 0; }
        }

        @keyframes slide-up {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slide-in-left {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        @keyframes border-pulse {
            0% { border-color: rgba(255, 215, 0, 0.3); }
            50% { border-color: rgba(255, 215, 0, 1); }
            100% { border-color: rgba(255, 215, 0, 0.3); }
        }

        @keyframes glow-pulse {
            0% { box-shadow: 0 0 20px #ffd700; }
            50% { box-shadow: 0 0 40px #ffd700, 0 0 60px #ffaa00; }
            100% { box-shadow: 0 0 20px #ffd700; }
        }

        @keyframes fire-animation {
            0% { filter: hue-rotate(0deg) drop-shadow(0 0 10px #ff0000); }
            33% { filter: hue-rotate(30deg) drop-shadow(0 0 10px #ff8800); }
            66% { filter: hue-rotate(60deg) drop-shadow(0 0 10px #ffaa00); }
            100% { filter: hue-rotate(0deg) drop-shadow(0 0 10px #ff0000); }
        }

        @keyframes ice-animation {
            0% { filter: hue-rotate(180deg) drop-shadow(0 0 10px #00ffff); }
            50% { filter: hue-rotate(200deg) drop-shadow(0 0 15px #0088ff); }
            100% { filter: hue-rotate(180deg) drop-shadow(0 0 10px #00ffff); }
        }

        @keyframes electric-animation {
            0% { filter: brightness(1); text-shadow: 0 0 10px #ffff00; }
            25% { filter: brightness(1.3); text-shadow: 0 0 20px #ffff00, 0 0 30px #ffaa00; }
            50% { filter: brightness(1); text-shadow: 0 0 10px #ffff00; }
            75% { filter: brightness(1.3); text-shadow: 0 0 20px #ffff00, 0 0 30px #ffaa00; }
            100% { filter: brightness(1); text-shadow: 0 0 10px #ffff00; }
        }

        @keyframes space-animation {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes timer-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #ff3366; }
            100% { transform: scale(1); }
        }

        @keyframes disconnected {
            0% { opacity: 0.5; }
            50% { opacity: 1; background: rgba(255, 51, 102, 0.2); }
            100% { opacity: 0.5; }
        }

        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .animate-pop-in { animation: pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .animate-win-line { animation: win-line 0.5s ease-in-out infinite; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-slide-up { animation: slide-up 0.5s ease-out forwards; }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
        .animate-slide-in-left { animation: slide-in-left 0.3s ease-out forwards; }
        .animate-shimmer { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); background-size: 1000px 100%; animation: shimmer 2s infinite; }
        .animate-border-pulse { animation: border-pulse 2s ease-in-out infinite; }
        .animate-glow-pulse { animation: glow-pulse 2s ease-in-out infinite; }
        .animate-fire { animation: fire-animation 3s ease-in-out infinite; }
        .animate-ice { animation: ice-animation 3s ease-in-out infinite; }
        .animate-electric { animation: electric-animation 1s ease-in-out infinite; }
        .animate-timer { animation: timer-pulse 1s ease-in-out infinite; }
        .animate-disconnected { animation: disconnected 1s ease-in-out infinite; }

        .glass-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .neon-btn {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 15px var(--glow-color);
            transition: all 0.3s ease;
        }

        .neon-btn:hover {
            box-shadow: 0 0 25px var(--glow-color), 0 0 50px var(--glow-color);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .neon-btn:active {
            transform: translateY(0);
        }

        .neon-btn .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        }

        .game-cell {
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border: 2px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .game-cell:hover:not(.disabled) {
            border-color: var(--accent-color);
            box-shadow: 0 0 20px var(--glow-color), inset 0 0 15px rgba(255,255,255,0.05);
            transform: scale(1.02);
        }

        .game-cell:active:not(.disabled) {
            transform: scale(0.98);
        }

        .game-cell.win-cell {
            animation: win-line 0.5s ease-in-out infinite;
            border-color: var(--accent-color);
            box-shadow: 0 0 30px var(--glow-color);
        }

        .game-cell.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        .online-timer {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
            border: 3px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            box-shadow: 0 0 20px var(--glow-color);
            animation: pulse-glow 1s ease-in-out infinite;
            margin: 0 auto 15px;
        }

        .online-timer.warning {
            border-color: #ff3366;
            color: #ff3366;
            animation: timer-pulse 0.5s ease-in-out infinite;
        }

        .page {
            display: none;
            min-height: 100vh;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .page.active {
            display: flex;
            flex-direction: column;
            opacity: 1;
            transform: translateY(0);
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: bold;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90%;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
        }

        .end-game-screen {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            z-index: 2000;
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 2px solid var(--accent-color);
            border-radius: 24px;
            padding: 30px 40px;
            box-shadow: 0 0 50px var(--glow-color);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 300px;
        }

        .end-game-screen.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .end-game-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            animation: pop-in 0.5s ease;
        }

        .end-game-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Orbitron', sans-serif;
        }

        .end-game-xp {
            font-size: 1.2rem;
            color: #ffd700;
            margin-top: 15px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
        }

        .loading-screen {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            z-index: 1500;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-screen.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.5rem;
            color: var(--accent-color);
            font-family: 'Orbitron', sans-serif;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; text-shadow: 0 0 20px var(--glow-color); }
        }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            z-index: 101;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active + .modal-content,
        .modal-content.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .room-code {
            font-size: 2rem;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 5px;
            background: rgba(0,0,0,0.4);
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px dashed var(--accent-color);
            color: var(--accent-color);
            text-align: center;
            margin: 20px 0;
            animation: border-pulse 2s ease-in-out infinite;
        }

        .copy-btn {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .copy-btn:hover {
            background: var(--accent-color);
            color: var(--bg-color);
        }

        .scoreboard {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid var(--border-color);
        }

        .scoreboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-radius: 10px;
            background: rgba(255,255,255,0.03);
            margin-bottom: 5px;
        }

        .scoreboard-value {
            font-size: 1.5rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }

        .scoreboard-value.wins { color: #00ff88; }
        .scoreboard-value.losses { color: #ff3366; }
        .scoreboard-value.draws { color: #ffd700; }

        .online-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 50px;
            border: 2px solid transparent;
        }

        .online-profile.player1 {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--glow-color);
        }

        .online-profile.player2 {
            border-color: var(--accent-secondary);
            box-shadow: 0 0 15px var(--glow-secondary);
        }

        .online-profile img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--accent-color);
        }

        .online-profile-info {
            flex: 1;
        }

        .online-profile-name {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .online-profile-details {
            font-size: 0.8rem;
            color: var(--text-secondary);
            display: flex;
            gap: 10px;
        }

        .disconnected-message {
            background: rgba(255, 51, 102, 0.1);
            border: 2px solid #ff3366;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            color: #ff3366;
            font-weight: bold;
            margin: 10px 0;
            animation: disconnected 1s ease-in-out infinite;
        }

        .win-streak {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.6);
            border: 1px solid #ff6b35;
            border-radius: 30px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            font-weight: bold;
            color: #ff6b35;
            box-shadow: 0 0 15px rgba(255,107,53,0.3);
            z-index: 10;
        }

        .win-streak i {
            color: #ff6b35;
        }

        .ai-progress {
            display: flex;
            gap: 5px;
            margin-top: 10px;
            justify-content: center;
        }

        .star {
            font-size: 1.5rem;
            color: #4a4a4a;
            transition: all 0.3s ease;
        }

        .star.gold {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
            animation: star-pulse 1.5s ease-in-out infinite;
        }

        @keyframes star-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .settings-float-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            border: none;
            box-shadow: 0 0 30px var(--glow-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 99;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .settings-float-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 0 40px var(--glow-color), 0 0 60px var(--accent-color);
        }

        .settings-float-btn i {
            color: white;
            width: 30px;
            height: 30px;
        }

        .settings-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(10,14,26,0.95) 0%, rgba(20,27,45,0.98) 100%);
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--border-color);
            box-shadow: -10px 0 50px rgba(0,0,0,0.5);
            z-index: 1000;
            transition: right 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow-y: auto;
            padding: 20px;
        }

        .settings-panel.open {
            right: 0;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-close {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .settings-close:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .settings-section {
            margin-bottom: 30px;
            animation: slide-in-left 0.3s ease-out;
        }

        .settings-section-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: right;
        }

        .settings-menu-item:hover {
            background: rgba(255,255,255,0.05);
            border-color: var(--accent-color);
            transform: translateX(-5px);
        }

        .settings-menu-item i {
            color: var(--accent-color);
        }

        .social-links-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .social-link-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .social-link-item:hover {
            transform: translateY(-3px);
            border-color: currentColor;
        }

        .social-link-item.facebook:hover { background: rgba(24, 119, 242, 0.1); }
        .social-link-item.instagram:hover { background: rgba(228, 64, 95, 0.1); }
        .social-link-item.youtube:hover { background: rgba(255, 0, 0, 0.1); }
        .social-link-item.tiktok:hover { background: rgba(0, 0, 0, 0.1); }

        .copyright-text {
            text-align: center;
            padding: 20px 0;
            font-size: 0.8rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 30px;
        }

        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 0 20px currentColor;
        }

        .profile-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-color);
            box-shadow: 0 0 20px var(--glow-color);
        }

        .profile-img-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent-color);
        }

        .music-player {
            background: linear-gradient(135deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.8) 100%);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .music-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .music-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .music-btn:hover {
            background: var(--accent-color);
            transform: scale(1.1);
        }

        .music-btn i {
            width: 20px;
            height: 20px;
            color: var(--text-primary);
        }

        .music-select {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            margin-top: 10px;
            cursor: pointer;
        }

        .music-select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .now-playing {
            font-size: 0.9rem;
            color: var(--accent-color);
            text-align: center;
            margin-top: 10px;
        }

        .division-card {
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .division-card.completed {
            border-color: #00ff88;
            box-shadow: 0 0 30px rgba(0,255,136,0.3);
        }

        .division-card.current {
            border-color: var(--accent-color);
            box-shadow: 0 0 30px var(--glow-color);
            transform: scale(1.02);
        }

        .division-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            background: rgba(0,0,0,0.5);
        }

        .division-progress {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .division-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), var(--accent-secondary));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .division-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
            margin: 15px 0;
        }

        .division-stat {
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .division-stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd700;
        }

        .division-stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .division-complete-modal {
            text-align: center;
            padding: 30px;
        }

        .division-reward-icon {
            width: 100px;
            height: 100px;
            margin: 20px auto;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            display: flex;
            align-items: center;
            justify-content: center;
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .division-reward-icon i {
            width: 50px;
            height: 50px;
            color: white;
        }

        .frame-legendary {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #ffd700, #ff6a00, #ffd700) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: border-pulse 2s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(255,215,0,0.5);
        }

        .frame-epic {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #9b59b6, #8e44ad, #9b59b6) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: glow-pulse 3s ease-in-out infinite;
        }

        .frame-rare {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #4a90e2, #357abd, #4a90e2) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }

        .frame-fire {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #ff4500, #ff0000, #ff4500) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: fire-animation 3s ease-in-out infinite;
        }

        .frame-ice {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #7ae7ff, #00b8ff, #7ae7ff) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: ice-animation 3s ease-in-out infinite;
        }

        .frame-electric {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #fff700, #4d00ff, #fff700) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: electric-animation 1s ease-in-out infinite;
        }

        .frame-space {
            border: 4px solid transparent;
            background: linear-gradient(45deg, #0a001a, #3a00ff, #ff00e6) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            position: relative;
            overflow: hidden;
            animation: space-animation 10s ease infinite;
        }

        .frame-space::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 2s infinite;
        }

        .frame-division1 {
            border: 6px solid transparent;
            background: linear-gradient(45deg, #ffd700, #0a001a, #ff0033, #ffd700) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: border-pulse 1.5s ease-in-out infinite;
            box-shadow: 0 0 50px rgba(255,215,0,0.8), inset 0 0 30px rgba(255,215,0,0.3);
            position: relative;
        }

        .frame-division1::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(90deg, #ffd700, #ff0033, #0a001a, #ffd700);
            filter: blur(10px);
            z-index: -1;
            opacity: 0.7;
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .frame-division1::after {
            content: 'üëë';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 30px;
            animation: float 3s ease-in-out infinite;
        }

        .skin-default {
            background: linear-gradient(135deg, #00FFF0, #007C88);
            color: white;
            text-shadow: 0 0 10px #66FFFF;
        }

        .skin-red {
            background: linear-gradient(135deg, #FF0033, #6B0018);
            color: white;
            text-shadow: 0 0 10px #FF4D6D;
        }

        .skin-gold {
            background: linear-gradient(135deg, #FFD700, #A67C00);
            color: black;
            text-shadow: 0 0 10px #FFF1A6;
        }

        .skin-purple {
            background: linear-gradient(135deg, #0A0A14, #3A00FF);
            color: #7D5CFF;
            text-shadow: 0 0 10px #7D5CFF;
        }

        .skin-green {
            background: linear-gradient(135deg, #A6FF00, #2B5B00);
            color: black;
            text-shadow: 0 0 10px #D8FF7A;
        }

        .skin-rainbow {
            background: linear-gradient(135deg, #FF004C, #00FFB7, #FFD000, #7A00FF);
            background-size: 300% 300%;
            animation: gradient-shift 3s ease infinite;
            color: white;
            text-shadow: 0 0 20px #FFFFFF;
        }

        .skin-blue-crystal {
            background: linear-gradient(135deg, #00BFFF, #005B8A);
            color: white;
            text-shadow: 0 0 10px #A6E7FF;
        }

        .skin-emerald {
            background: linear-gradient(135deg, #00C853, #006B2D);
            color: white;
            text-shadow: 0 0 10px #5CFF9E;
        }

        .skin-ruby {
            background: linear-gradient(135deg, #E60026, #6B0012);
            color: white;
            text-shadow: 0 0 10px #FF5A73;
        }

        .skin-sapphire {
            background: linear-gradient(135deg, #005CFF, #002A75);
            color: white;
            text-shadow: 0 0 10px #6AA2FF;
        }

        .skin-amethyst {
            background: linear-gradient(135deg, #9B00FF, #4A007A);
            color: white;
            text-shadow: 0 0 10px #D27BFF;
        }

        .skin-topaz {
            background: linear-gradient(135deg, #FFB300, #805200);
            color: black;
            text-shadow: 0 0 10px #FFD98A;
        }

        .skin-fire {
            background: linear-gradient(135deg, #FF4500, #8A0000);
            color: white;
            text-shadow: 0 0 15px #FF9B3D;
            animation: fire-animation 3s ease infinite;
        }

        .skin-ice {
            background: linear-gradient(135deg, #7AE7FF, #007C99);
            color: black;
            text-shadow: 0 0 15px #D9FAFF;
            animation: ice-animation 3s ease infinite;
        }

        .skin-electric {
            background: linear-gradient(135deg, #FFF700, #4D00FF);
            color: black;
            text-shadow: 0 0 15px #FFFFA8;
            animation: electric-animation 1s ease infinite;
        }

        .skin-shadow {
            background: linear-gradient(135deg, #0B0B0B, #2A003B);
            color: #8E4DFF;
            text-shadow: 0 0 15px #8E4DFF;
        }

        .skin-light {
            background: linear-gradient(135deg, #FFFFFF, #FFECA6);
            color: black;
            text-shadow: 0 0 15px #FFF9D6;
        }

        .skin-nature {
            background: linear-gradient(135deg, #2DFF5C, #0B4D1C);
            color: white;
            text-shadow: 0 0 15px #B8FFCA;
        }

        .skin-ocean {
            background: linear-gradient(135deg, #0099FF, #003D66);
            color: white;
            text-shadow: 0 0 15px #7AD6FF;
        }

        .skin-lava {
            background: linear-gradient(135deg, #FF2A00, #3B0000);
            color: white;
            text-shadow: 0 0 15px #FF7A3D;
        }

        .skin-space {
            background: linear-gradient(135deg, #0A001A, #2B00FF);
            color: #FF00E6;
            text-shadow: 0 0 20px #FF00E6;
            animation: space-animation 5s ease infinite;
        }

        .skin-nebula {
            background: linear-gradient(135deg, #6A00FF, #FF007A, #00E5FF);
            background-size: 300% 300%;
            animation: gradient-shift 8s ease infinite;
            color: white;
            text-shadow: 0 0 20px #FFFFFF;
        }

        .skin-galaxy {
            background: linear-gradient(135deg, #120033, #005CFF, #C300FF);
            background-size: 300% 300%;
            animation: gradient-shift 6s ease infinite;
            color: white;
            text-shadow: 0 0 20px #FFFFFF;
        }

        .skin-cosmic {
            background: linear-gradient(135deg, #00FFD5, #2B0066, #FF4DFF);
            background-size: 300% 300%;
            animation: gradient-shift 7s ease infinite;
            color: white;
            text-shadow: 0 0 20px #FFFFFF;
        }

        .skin-quantum {
            background: linear-gradient(135deg, #00FF66, #003B1A, #00FFFF);
            background-size: 300% 300%;
            animation: gradient-shift 4s ease infinite;
            color: white;
            text-shadow: 0 0 20px #00FFFF;
        }

        .skin-void {
            background: linear-gradient(135deg, #050508, #1B0033);
            color: #5E00FF;
            text-shadow: 0 0 20px #5E00FF;
        }

        .skin-infinity {
            background: linear-gradient(135deg, #00D9FF, #001C33, #00FFB3);
            background-size: 300% 300%;
            animation: gradient-shift 5s ease infinite;
            color: white;
            text-shadow: 0 0 20px #00FFB3;
        }

        .skin-eternity {
            background: linear-gradient(135deg, #FFD700, #7A00FF, #FFFFFF);
            background-size: 300% 300%;
            animation: gradient-shift 6s ease infinite;
            color: white;
            text-shadow: 0 0 20px #FFFFFF;
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .store-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            background: var(--accent-color);
            color: var(--bg-color);
        }

        .filter-btn.active {
            background: var(--accent-color);
            color: var(--bg-color);
            border-color: var(--accent-color);
        }

        .search-bar {
            width: 100%;
            padding: 12px 16px;
            border-radius: 30px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--glow-color);
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .category-tab {
            padding: 10px 20px;
            border-radius: 30px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .category-tab:hover {
            background: var(--accent-color);
            color: var(--bg-color);
        }

        .category-tab.active {
            background: var(--accent-color);
            color: var(--bg-color);
            border-color: var(--accent-color);
        }

        .rarity-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .rarity-common {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
        }

        .rarity-rare {
            background: rgba(74,144,226,0.2);
            color: #4a90e2;
        }

        .rarity-epic {
            background: rgba(155,89,182,0.2);
            color: #9b59b6;
        }

        .rarity-legendary {
            background: rgba(241,196,15,0.2);
            color: #f1c40f;
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .store-item {
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .store-item:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .store-item-preview {
            width: 100%;
            height: 150px;
            border-radius: 12px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            background: rgba(0,0,0,0.3);
        }

        .frame-preview {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: var(--bg-tertiary);
        }

        .frame-preview.silver-edge {
            border: 4px solid #C0C0C0;
            box-shadow: 0 0 20px #F5F5F5;
        }

        .frame-preview.bronze-edge {
            border: 4px solid #CD7F32;
            box-shadow: 0 0 20px #FFB877;
        }

        .frame-preview.steel-edge {
            border: 4px solid #7D8C99;
            box-shadow: 0 0 20px #D9E3EA;
        }

        .frame-preview.iron-edge {
            border: 4px solid #4B4B4B;
            box-shadow: 0 0 20px #9C9C9C;
        }

        .frame-preview.golden-edge {
            border: 4px solid #FFD700;
            box-shadow: 0 0 20px #FFF0A6;
        }

        .frame-preview.ruby-edge {
            border: 4px solid #E60026;
            box-shadow: 0 0 20px #FF6B7A;
        }

        .frame-preview.sapphire-edge {
            border: 4px solid #005CFF;
            box-shadow: 0 0 20px #6AA2FF;
        }

        .frame-preview.emerald-edge {
            border: 4px solid #00C853;
            box-shadow: 0 0 20px #7CFFB1;
        }

        .frame-preview.amethyst-edge {
            border: 4px solid #9B00FF;
            box-shadow: 0 0 20px #D27BFF;
        }

        .frame-preview.fire-frame {
            border: 4px solid #FF4500;
            box-shadow: 0 0 20px #FFB13D;
            animation: fire-animation 3s ease infinite;
        }

        .frame-preview.ice-frame {
            border: 4px solid #7AE7FF;
            box-shadow: 0 0 20px #E6FDFF;
            animation: ice-animation 3s ease infinite;
        }

        .frame-preview.electric-frame {
            border: 4px solid #FFF700;
            box-shadow: 0 0 20px #4D00FF;
            animation: electric-animation 1s ease infinite;
        }

        .frame-preview.nature-frame {
            border: 4px solid #2DFF5C;
            box-shadow: 0 0 20px #A8FFC0;
        }

        .frame-preview.ocean-frame {
            border: 4px solid #0099FF;
            box-shadow: 0 0 20px #00E5FF;
        }

        .frame-preview.lava-frame {
            border: 4px solid #FF2A00;
            box-shadow: 0 0 20px #FFD000;
        }

        .frame-preview.legendary-gold {
            border: 4px solid #FFD700;
            box-shadow: 0 0 20px #FFFFFF;
            animation: border-pulse 2s ease-in-out infinite;
        }

        .frame-preview.space-frame {
            border: 4px solid #0A001A;
            box-shadow: 0 0 20px #FF00E6;
            animation: space-animation 5s ease infinite;
        }

        .frame-preview.divine-frame {
            border: 4px solid #FFFFFF;
            box-shadow: 0 0 20px #A6FFFF;
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .frame-preview.infinite-frame {
            border: 4px solid #00D9FF;
            box-shadow: 0 0 20px #00FFB3;
            animation: gradient-shift 3s ease infinite;
        }

        .frame-preview.cosmic-frame {
            border: 4px solid #6A00FF;
            box-shadow: 0 0 20px #00E5FF;
            animation: space-animation 8s ease infinite;
        }

        .frame-preview.division1-champion {
            border: 6px solid #FFD700;
            box-shadow: 0 0 30px #FF0033;
            animation: border-pulse 1.5s ease-in-out infinite;
            position: relative;
        }

        .frame-preview.division1-champion::after {
            content: 'üëë';
            position: absolute;
            top: -20px;
            font-size: 30px;
        }

        .store-item-info {
            margin-bottom: 12px;
        }

        .store-item-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .store-item-price {
            font-size: 1rem;
            color: #ffd700;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .store-item-price i {
            width: 16px;
            height: 16px;
        }

        .store-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .store-item-rarity {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .store-item-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: var(--accent-color);
            color: var(--bg-color);
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .store-item-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--glow-color);
        }

        .store-item-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .var-modal {
            max-width: 800px;
            width: 90%;
            padding: 20px;
        }

        .var-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
        }

        .var-cell {
            aspect-ratio: 1;
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border: 2px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .var-cell.win-cell {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
            animation: pulse-gold 1s ease-in-out infinite;
        }

        @keyframes pulse-gold {
            0%, 100% { border-color: #ffd700; box-shadow: 0 0 20px rgba(255,215,0,0.5); }
            50% { border-color: #ffaa00; box-shadow: 0 0 40px rgba(255,170,0,0.8); }
        }

        .var-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .var-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .var-btn:hover {
            border-color: var(--accent-color);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--glow-color);
        }

        .var-btn i {
            width: 30px;
            height: 30px;
            color: var(--text-primary);
        }

        .var-timeline {
            display: flex;
            gap: 5px;
            margin-top: 20px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 30px;
            overflow-x: auto;
        }

        .var-timeline-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .var-timeline-dot.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--glow-color);
            transform: scale(1.1);
        }

        .var-timeline-dot.player-x {
            color: var(--accent-color);
        }

        .var-timeline-dot.player-o {
            color: var(--accent-secondary);
        }

        .banned-modal {
            text-align: center;
            padding: 40px;
            max-width: 500px;
        }

        .banned-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: rgba(255,51,102,0.2);
            border: 4px solid var(--accent-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            animation: shake 0.5s ease-in-out;
        }

        .banned-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-secondary);
            margin-bottom: 20px;
        }

        .banned-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 30px;
        }

        .banned-email {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        .banned-email a {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 1.1rem;
        }

        .unban-input {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1rem;
            text-align: center;
        }

        .unban-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 20px var(--glow-color);
        }

        .unban-attempts {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .whats-new-modal {
            max-width: 600px;
            padding: 30px;
        }

        .whats-new-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffd700;
            text-align: center;
            margin-bottom: 20px;
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .whats-new-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .whats-new-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            animation: slide-in-left 0.3s ease-out forwards;
            opacity: 0;
        }

        .whats-new-item:nth-child(1) { animation-delay: 0.1s; }
        .whats-new-item:nth-child(2) { animation-delay: 0.2s; }
        .whats-new-item:nth-child(3) { animation-delay: 0.3s; }
        .whats-new-item:nth-child(4) { animation-delay: 0.4s; }
        .whats-new-item:nth-child(5) { animation-delay: 0.5s; }
        .whats-new-item:nth-child(6) { animation-delay: 0.6s; }
        .whats-new-item:nth-child(7) { animation-delay: 0.7s; }

        .whats-new-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,215,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .whats-new-icon i {
            width: 30px;
            height: 30px;
            color: #ffd700;
        }

        .whats-new-text {
            flex: 1;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .whats-new-reward {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .share-modal {
            max-width: 500px;
            padding: 30px;
            text-align: center;
        }

        .share-stats {
            margin: 20px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }

        .share-progress {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .share-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #ffd700);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .share-count {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
        }

        .share-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .share-btn {
            padding: 15px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .share-btn.facebook {
            background: #1877f2;
            color: white;
        }

        .share-btn.twitter {
            background: #1da1f2;
            color: white;
        }

        .share-btn.whatsapp {
            background: #25d366;
            color: white;
        }

        .share-btn.telegram {
            background: #0088cc;
            color: white;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            filter: brightness(1.1);
        }

        .share-btn:active {
            transform: translateY(0);
        }

        .share-verify {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            border-radius: 10px;
            color: #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-verify:hover {
            background: rgba(0,255,136,0.2);
            transform: scale(1.02);
        }

        .share-verify:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ad-countdown {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(0,0,0,0.95));
            border: 3px solid var(--accent-color);
            border-radius: 20px;
            padding: 40px;
            z-index: 2000;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 50px var(--glow-color);
            animation: pop-in 0.3s ease;
        }

        .ad-countdown.hidden {
            display: none;
        }

        .ad-countdown-number {
            font-size: 8rem;
            font-weight: bold;
            color: var(--accent-color);
            text-shadow: 0 0 30px var(--glow-color);
            animation: pulse 1s ease-in-out infinite;
            line-height: 1;
        }

        .ad-countdown-text {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-top: 20px;
        }

        .ad-video-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            z-index: 2000;
            border: 3px solid var(--accent-color);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 50px var(--glow-color);
            animation: pop-in 0.3s ease;
        }

        .ad-video-container.hidden {
            display: none;
        }

        .ad-video-container video {
            width: 100%;
            display: block;
        }

        .ad-close {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0,0,0,0.8);
            border: 2px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2001;
        }

        .ad-close:hover {
            transform: scale(1.1);
            background: var(--accent-color);
        }

        .ad-close i {
            width: 20px;
            height: 20px;
            color: white;
        }

        @media (max-width: 640px) {
            .game-cell {
                width: 85px !important;
                height: 85px !important;
                font-size: 2.5rem !important;
            }
            
            .settings-panel {
                max-width: 100%;
            }

            .store-grid {
                grid-template-columns: 1fr;
            }

            .var-board {
                gap: 5px;
            }

            .var-cell {
                font-size: 2rem;
            }

            .var-timeline-dot {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .cookie-consent {
            position: fixed;
            bottom: 80px;
            left: 20px;
            right: 20px;
            max-width: 400px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            z-index: 1000;
            transform: translateY(200%);
            transition: transform 0.5s ease;
        }

        .cookie-consent.show {
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-x-hidden">

    <!-- Notification Container -->
    <div id="notification" class="notification glass-card"></div>

    <!-- End Game Screen -->
    <div id="end-game-screen" class="end-game-screen">
        <div id="end-game-icon" class="end-game-icon"></div>
        <div id="end-game-title" class="end-game-title"></div>
        <div id="end-game-xp" class="end-game-xp"></div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div id="loading-text" class="loading-text">ÿ¨ÿßÿ±Ÿä ÿ™ÿ¨ŸáŸäÿ≤ ÿßŸÑÿÆÿµŸÖ...</div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="win-sound" preload="auto">
        <source src="https://files.catbox.moe/win.mp3" type="audio/mpeg">
    </audio>
    <audio id="lose-sound" preload="auto">
        <source src="https://files.catbox.moe/lose.mp3" type="audio/mpeg">
    </audio>

    <!-- Cookie Consent -->
    <div id="cookie-consent" class="cookie-consent">
        <p class="mb-3 text-sm">ŸÜÿ≠ŸÜ ŸÜÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ. ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπÿå ŸÅÿ•ŸÜŸÉ ÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸâ <a href="#" onclick="openSettingsAndNavigate('privacy'); return false;" style="color: var(--accent-color);">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</a> ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÜÿß.</p>
        <div class="flex gap-2">
            <button onclick="acceptCookies()" class="flex-1 py-2 rounded-lg text-sm font-bold" style="background: var(--accent-color); color: var(--bg-color);">ŸÖŸàÿßŸÅŸÇ</button>
            <button onclick="declineCookies()" class="flex-1 py-2 rounded-lg text-sm" style="background: rgba(255,255,255,0.1);">ÿ±ŸÅÿ∂</button>
        </div>
    </div>

    <!-- Banned Modal -->
    <div id="banned-modal-overlay" class="modal-overlay"></div>
    <div id="banned-modal" class="modal-content banned-modal glass-card">
        <div class="banned-icon">üö´</div>
        <div class="banned-title">ÿ™ŸÖ ÿ≠ÿ∏ÿ± ÿ≠ÿ≥ÿßÿ®ŸÉ</div>
        <div class="banned-message">
            ÿ™ŸÖ ÿ≠ÿ∏ÿ± ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ÿ≥ÿ®ÿ® ŸÖÿÆÿßŸÑŸÅÿ© ŸÇŸàÿßÿπÿØ ÿßŸÑÿ≥ŸÑŸàŸÉ.<br>
            ŸÑŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä:
        </div>
        <div class="banned-email">
            <a href="mailto:eclipsegames1cloud@gmail.com">eclipsegames1cloud@gmail.com</a>
        </div>
        <div id="unban-section">
            <input type="text" id="unban-code" class="unban-input" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸàÿØ ŸÅŸÉ ÿßŸÑÿ≠ÿ∏ÿ±" maxlength="5">
            <button onclick="attemptUnban()" class="neon-btn w-full py-3 rounded-xl font-bold mb-3">ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅŸÉ ÿßŸÑÿ≠ÿ∏ÿ±</button>
            <div id="unban-attempts" class="unban-attempts">ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©: 3</div>
        </div>
    </div>

    <!-- What's New Modal -->
    <div id="whats-new-modal-overlay" class="modal-overlay"></div>
    <div id="whats-new-modal" class="modal-content whats-new-modal glass-card">
        <div class="whats-new-title">üéâ ŸÖÿß ÿßŸÑÿ¨ÿØŸäÿØÿü üéâ</div>
        <ul class="whats-new-list">
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="check-circle"></i></div>
                <div class="whats-new-text">ÿ•ÿµŸÑÿßÿ≠ ÿ£ÿÆÿ∑ÿßÿ° ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä</div>
            </li>
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="cpu"></i></div>
                <div class="whats-new-text">ÿ•ÿ∂ÿßŸÅÿ© ÿ∑Ÿàÿ± ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä ÿ¨ÿØŸäÿØ (ÿßŸÑÿ™ŸÉŸäŸÅŸä)</div>
            </li>
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="gamepad-2"></i></div>
                <div class="whats-new-text">ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÅŸä ÿßŸÑÿ¨ŸäŸÖ ÿ®ŸÑÿßŸä</div>
            </li>
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="video"></i></div>
                <div class="whats-new-text">ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸäÿ≤ÿ© VAR</div>
            </li>
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="music"></i></div>
                <div class="whats-new-text">ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ£ÿ∫ÿßŸÜŸä</div>
            </li>
            <li class="whats-new-item">
                <div class="whats-new-icon"><i data-lucide="gift"></i></div>
                <div class="whats-new-text"><span class="whats-new-reward">ÿ™ÿπŸàŸäÿ∂ 10,000 XP</span> ÿ®ÿ≥ÿ®ÿ® ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©</div>
            </li>
        </ul>
        <button onclick="closeWhatsNew()" class="neon-btn w-full py-3 rounded-xl font-bold mt-4">ÿ≠ÿ≥ŸÜÿßŸã</button>
    </div>

    <!-- Background Effects -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden z-0">
        <div class="absolute top-20 right-20 w-72 h-72 rounded-full blur-3xl opacity-20" style="background: var(--accent-color);"></div>
        <div class="absolute bottom-20 left-20 w-96 h-96 rounded-full blur-3xl opacity-15" style="background: var(--accent-secondary);"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 rounded-full blur-3xl opacity-10" style="background: var(--accent-tertiary);"></div>
        
        <!-- Grid Pattern -->
        <svg class="absolute inset-0 w-full h-full opacity-5">
            <defs>
                <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
                    <path d="M 50 0 L 0 0 0 50" fill="none" stroke="currentColor" stroke-width="0.5" style="color: var(--accent-color)"/>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)"/>
        </svg>
    </div>

    <!-- Floating Settings Button -->
    <button class="settings-float-btn" onclick="toggleSettingsPanel()">
        <i data-lucide="settings"></i>
    </button>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel">
        <div class="settings-header">
            <h2 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑŸÇÿßÿ¶ŸÖÿ©</h2>
            <div class="settings-close" onclick="toggleSettingsPanel()">
                <i data-lucide="x"></i>
            </div>
        </div>

        <!-- ŸÇÿ≥ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ -->
        <div class="settings-section">
            <div class="settings-section-title">
                <i data-lucide="log-in"></i>
                <span>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</span>
            </div>
            
            <!-- ÿ≤ÿ± ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Google -->
            <button id="googleSignInBtn" class="settings-menu-item" onclick="googleSignIn()">
                <i data-lucide="mail" style="color: #DB4437;"></i>
                <span>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Google</span>
            </button>

            <!-- ÿ≤ÿ± ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ (ŸÖÿÆŸÅŸä ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã) -->
            <button id="logoutBtn" class="settings-menu-item" style="display: none; background: rgba(255,51,102,0.1); border-color: rgba(255,51,102,0.3);" onclick="googleSignOut()">
                <i data-lucide="log-out" style="color: var(--accent-secondary);"></i>
                <span style="color: var(--accent-secondary);">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</span>
            </button>
        </div>

        <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ (ŸÖÿÆŸÅŸäÿ© ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã) -->
        <div id="userInfoSection" class="settings-section" style="display: none;">
            <div class="settings-section-title">
                <i data-lucide="user"></i>
                <span>ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®</span>
            </div>
            <div class="flex items-center gap-3 p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                <img id="userAvatar" src="" alt="User Avatar" class="w-12 h-12 rounded-full border-2" style="border-color: var(--accent-color); display: none;">
                <div>
                    <div id="userName" class="font-bold text-white"></div>
                    <div id="userEmail" class="text-sm" style="color: var(--text-secondary);"></div>
                </div>
            </div>
        </div>

        <!-- Music Player Section -->
        <div class="settings-section">
            <div class="settings-section-title">
                <i data-lucide="music"></i>
                <span>ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ</span>
            </div>
            <div class="music-player">
                <div class="music-controls">
                    <button onclick="previousSong()" class="music-btn">
                        <i data-lucide="skip-back"></i>
                    </button>
                    <button onclick="toggleMusic()" id="musicToggleBtn" class="music-btn">
                        <i data-lucide="play"></i>
                    </button>
                    <button onclick="nextSong()" class="music-btn">
                        <i data-lucide="skip-forward"></i>
                    </button>
                </div>
                <select id="musicSelect" class="music-select" onchange="changeSong(this.value)">
                    <option value="0">Without Me - Eminem</option>
                    <option value="1">Believer - Imagine Dragons</option>
                    <option value="2">B3teny leh - Ziad Zaza</option>
                    <option value="3">Superman - Eminem</option>
                    <option value="4">Billie Jean - Michael Jackson</option>
                    <option value="5">Sing For The Moment - Eminem</option>
                    <option value="6">Cleanin Out My Closet - Eminem</option>
                    <option value="7">Big Mafia - Marwan Moussa</option>
                    <option value="8">Karma - Marwan Pablo</option>
                    <option value="9">Mockingbird - Eminem</option>
                    <option value="10">The Real Slim Shady - Eminem</option>
                    <option value="11">Lovely - Billie Eilish</option>
                    <option value="12">MOONLIGHT - XXXTentacion</option>
                    <option value="13">Dorak Gai - Wegz</option>
                    <option value="14">Birds of a Feather - Billie Eilish</option>
                    <option value="15">3alam kadaba - Lege Cy</option>
                    <option value="16">The Fate of Ophelia - Taylor Swift</option>
                    <option value="17">Gabolna Hkoma - Ziad Zaza</option>
                    <option value="18">Stan - Eminem</option>
                    <option value="19">Godzilla - Eminem</option>
                </select>
                <div id="nowPlaying" class="now-playing">ÿ∫Ÿäÿ± ŸÖÿ¥ÿ∫ŸÑÿ©</div>
            </div>
        </div>

        <!-- ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿµŸÅÿ≠ÿßÿ™ -->
        <div class="settings-section">
            <div class="settings-section-title">
                <i data-lucide="menu"></i>
                <span>ÿßŸÑÿµŸÅÿ≠ÿßÿ™</span>
            </div>
            <button onclick="navigateToAndCloseSettings('home')" class="settings-menu-item">
                <i data-lucide="home"></i>
                <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
            </button>
            <button onclick="navigateToAndCloseSettings('division')" class="settings-menu-item">
                <i data-lucide="git-branch"></i>
                <span>ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</span>
            </button>
            <button onclick="navigateToAndCloseSettings('about')" class="settings-menu-item">
                <i data-lucide="info"></i>
                <span>ÿπŸÜ ÿßŸÑŸÑÿπÿ®ÿ©</span>
            </button>
            <button onclick="navigateToAndCloseSettings('guide')" class="settings-menu-item">
                <i data-lucide="help-circle"></i>
                <span>ÿØŸÑŸäŸÑ ÿßŸÑŸÑÿπÿ®</span>
            </button>
            <button onclick="navigateToAndCloseSettings('blog')" class="settings-menu-item">
                <i data-lucide="book-open"></i>
                <span>ÿßŸÑŸÖÿØŸàŸÜÿ©</span>
            </button>
            <button onclick="navigateToAndCloseSettings('privacy')" class="settings-menu-item">
                <i data-lucide="shield"></i>
                <span>ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</span>
            </button>
            <button onclick="navigateToAndCloseSettings('terms')" class="settings-menu-item">
                <i data-lucide="file-text"></i>
                <span>ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©</span>
            </button>
            <button onclick="navigateToAndCloseSettings('contact')" class="settings-menu-item">
                <i data-lucide="mail"></i>
                <span>ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span>
            </button>
            <button onclick="navigateToAndCloseSettings('profile')" class="settings-menu-item">
                <i data-lucide="user"></i>
                <span>ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä</span>
            </button>
            <button onclick="navigateToAndCloseSettings('levels')" class="settings-menu-item">
                <i data-lucide="cpu"></i>
                <span>ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ°</span>
            </button>
            <button onclick="navigateToAndCloseSettings('store')" class="settings-menu-item">
                <i data-lucide="shopping-bag"></i>
                <span>ÿßŸÑŸÖÿ™ÿ¨ÿ±</span>
            </button>
            <button onclick="navigateToAndCloseSettings('challenges')" class="settings-menu-item">
                <i data-lucide="target"></i>
                <span>ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™</span>
            </button>
            <button onclick="navigateToAndCloseSettings('share')" class="settings-menu-item">
                <i data-lucide="share-2"></i>
                <span>ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÑÿπÿ®ÿ©</span>
            </button>
        </div>

        <!-- ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿµŸàÿ™ -->
        <div class="settings-section">
            <div class="settings-section-title">
                <i data-lucide="volume-2"></i>
                <span>ÿßŸÑÿµŸàÿ™</span>
            </div>
            <button onclick="toggleSound()" id="sound-toggle-settings" class="settings-menu-item">
                <i data-lucide="volume-2"></i>
                <span>ÿ™ÿ¥ÿ∫ŸäŸÑ / ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©</span>
            </button>
        </div>

        <!-- ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä -->
        <div class="settings-section">
            <div class="settings-section-title">
                <i data-lucide="share-2"></i>
                <span>ÿ™ÿßÿ®ÿπŸÜÿß ÿπŸÑŸâ</span>
            </div>
            <div class="social-links-grid">
                <a href="https://www.facebook.com/share/185REmNQT7/" target="_blank" rel="noopener noreferrer" class="social-link-item facebook" style="color: #1877f2;">
                    <i data-lucide="facebook" class="w-5 h-5"></i>
                    <span>ŸÅŸäÿ≥ÿ®ŸàŸÉ</span>
                </a>
                <a href="https://www.instagram.com/eclipse1_games" target="_blank" rel="noopener noreferrer" class="social-link-item instagram" style="color: #e4405f;">
                    <i data-lucide="instagram" class="w-5 h-5"></i>
                    <span>ÿßŸÜÿ≥ÿ™ÿ¨ÿ±ÿßŸÖ</span>
                </a>
                <a href="https://youtube.com/@eclipsegames-u4l" target="_blank" rel="noopener noreferrer" class="social-link-item youtube" style="color: #ff0000;">
                    <i data-lucide="youtube" class="w-5 h-5"></i>
                    <span>ŸäŸàÿ™ŸäŸàÿ®</span>
                </a>
                <a href="https://www.tiktok.com/@eclipse.games1" target="_blank" rel="noopener noreferrer" class="social-link-item tiktok" style="color: #000000;">
                    <i data-lucide="music" class="w-5 h-5"></i>
                    <span>ÿ™ŸäŸÉ ÿ™ŸàŸÉ</span>
                </a>
            </div>
        </div>

        <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÖŸÜ ÿßŸÑŸÅŸàÿ™ÿ± -->
        <div class="copyright-text">
            <i data-lucide="copyright" class="w-4 h-4 inline"></i> 2024 Eclipse Games. ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.<br>
            ÿßŸÑÿ®ÿ±ŸäÿØ: eclipsegames1cloud@gmail.com<br>
            ÿ™ÿµŸÖŸäŸÖ Ÿàÿ™ÿ∑ŸàŸäÿ± ÿπÿ±ÿ®Ÿä 100%
        </div>
    </div>

    <!-- ========== PAGES ========== -->

    <!-- HOME PAGE -->
    <div id="page-home" class="page active flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            
            <!-- Profile Card with Frame -->
            <div id="homeProfileCard" class="glass-card rounded-2xl p-4 mb-6 animate-slide-up">
                <div class="flex items-center gap-4">
                    <div id="homeProfileFrame" class="rounded-full p-1">
                        <img id="home-profile-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%231e293b'/%3E%3Ccircle cx='50' cy='35' r='20' fill='%2300d4ff'/%3E%3Cellipse cx='50' cy='80' rx='30' ry='25' fill='%2300d4ff'/%3E%3C/svg%3E" alt="Profile" class="profile-img-small">
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span id="home-username" class="font-bold text-white">Player</span>
                            <span id="home-rank" class="text-xs px-2 py-0.5 rounded-full" style="background: var(--accent-color); color: var(--bg-color);">Rookie</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i data-lucide="trophy" class="w-4 h-4" style="color: #ffd700;"></i>
                            <span id="home-xp" class="font-mono text-sm" style="color: #ffd700;">0 XP</span>
                        </div>
                    </div>
                    <button onclick="navigateTo('profile')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                        <i data-lucide="chevron-left" class="w-5 h-5" style="color: var(--text-secondary);"></i>
                    </button>
                </div>
            </div>

            <!-- Daily Reward -->
            <button id="daily-reward-btn" onclick="claimDailyReward()" class="w-full neon-btn rounded-xl p-4 mb-6 flex items-center justify-center gap-3 animate-slide-up" style="animation-delay: 0.1s;">
                <i data-lucide="gift" class="w-6 h-6" style="color: #ffd700;"></i>
                <span id="daily-reward-text" class="font-bold" style="color: #ffd700;">ŸáÿØŸäÿ© ŸäŸàŸÖŸäÿ© ŸÖÿ™ÿßÿ≠ÿ©</span>
            </button>

            <!-- Stats Mini -->
            <div class="glass-card rounded-xl p-4 mb-8 animate-slide-up" style="animation-delay: 0.2s;">
                <div class="flex justify-between items-center mb-3">
                    <span style="color: var(--text-secondary);">ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</span>
                    <button onclick="navigateTo('profile')" class="text-sm hover:underline" style="color: var(--accent-color);">ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ</button>
                </div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div id="home-wins" class="text-2xl font-bold" style="color: #00ff88;">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ŸÅŸàÿ≤</div>
                    </div>
                    <div>
                        <div id="home-losses" class="text-2xl font-bold" style="color: var(--accent-secondary);">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿÆÿ≥ÿßÿ±ÿ©</div>
                    </div>
                    <div>
                        <div id="home-draws" class="text-2xl font-bold" style="color: var(--text-secondary);">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ™ÿπÿßÿØŸÑ</div>
                    </div>
                </div>
            </div>

            <!-- Title with Easter Egg -->
            <div class="text-center mb-8 animate-slide-up" style="animation-delay: 0.3s;" onclick="handleLogoClick()">
                <h1 class="text-5xl md:text-6xl font-display font-bold mb-2" style="color: var(--accent-color); text-shadow: 0 0 30px var(--glow-color); cursor: pointer;">
                    XO ARENA
                </h1>
                <p class="text-lg tracking-widest" style="color: var(--text-secondary);">DARK EDITION</p>
            </div>

            <!-- Menu Buttons - Online Modes Added -->
            <div class="space-y-4 animate-slide-up" style="animation-delay: 0.4s;">
                <!-- Play With Friends Online -->
                <button onclick="showFriendsOptions()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                    <i data-lucide="users" class="w-6 h-6" style="color: var(--accent-color);"></i>
                    <span style="color: var(--text-primary);">ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°</span>
                </button>

                <!-- Online Matches (XP Bet) - MODIFIED TEXT -->
                <button onclick="showOnlineMatchesOptions()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold" style="box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);">
                    <i data-lucide="award" class="w-6 h-6" style="color: #ffd700;"></i>
                    <span style="color: #ffd700;">ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ£ŸàŸÜŸÑÿßŸäŸÜ (ÿ™ŸÜÿßŸÅÿ≥ XP)</span>
                </button>

                <!-- Play Against AI -->
                <button onclick="navigateTo('levels')" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                    <i data-lucide="cpu" class="w-6 h-6" style="color: var(--accent-secondary);"></i>
                    <span style="color: var(--text-primary);">ÿ∂ÿØ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä</span>
                </button>

                <!-- Division Mode (With Online Option) -->
                <button onclick="showDivisionOptions()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold" style="background: linear-gradient(135deg, #ff3366, #ff6b35);">
                    <i data-lucide="git-branch" class="w-6 h-6" style="color: white;"></i>
                    <span style="color: white;">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</span>
                </button>

                <div class="grid grid-cols-2 gap-4">
                    <button onclick="navigateTo('challenges')" class="neon-btn rounded-xl p-5 flex flex-col items-center gap-2">
                        <i data-lucide="target" class="w-7 h-7" style="color: var(--accent-secondary);"></i>
                        <span style="color: var(--text-primary);">ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™</span>
                    </button>
                    <button onclick="navigateTo('store')" class="neon-btn rounded-xl p-5 flex flex-col items-center gap-2" style="box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);">
                        <i data-lucide="shopping-bag" class="w-7 h-7" style="color: #ffd700;"></i>
                        <span style="color: var(--text-primary);">ÿßŸÑŸÖÿ™ÿ¨ÿ±</span>
                    </button>
                </div>
            </div>

            <!-- ŸÇÿ≥ŸÖ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÜÿµŸä ÿßŸÑÿ∫ŸÜŸä -->
            <div class="glass-card rounded-2xl p-6 mt-8 animate-slide-up" style="animation-delay: 0.5s;">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--accent-color);">üéÆ ŸÖÿ±ÿ≠ÿ®Ÿãÿß ÿ®ŸÉ ŸÅŸä XO Arena - ÿ£ŸÅÿ∂ŸÑ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ©</h2>
                
                <div class="space-y-4 text-right">
                    <p class="leading-relaxed" style="color: var(--text-primary);">
                        <strong style="color: var(--accent-color);">XO Arena</strong> ŸáŸä ÿ£ŸàŸÑ ŸÖŸÜÿµÿ© ÿπÿ±ÿ®Ÿäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ŸÑŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ŸÖÿπ <strong style="color: #00ff88;">ŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÖÿ™ŸÉÿßŸÖŸÑ</strong> ŸäŸÖŸÉŸÜŸÉ ŸÖŸÜ ÿßŸÑŸÑÿπÿ® ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ ÿ£Ÿà ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿ™ÿµŸÜŸäŸÅ ŸàÿßŸÑÿ™ŸÜÿßŸÅÿ≥ ÿ®ŸÄ XP. ÿ®ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ 5 ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä ŸÖÿÆÿ™ŸÑŸÅÿ©: ŸÖÿ®ÿ™ÿØÿ¶ÿå ŸÖÿ™Ÿàÿ≥ÿ∑ÿå ÿµÿπÿ®ÿå ÿπÿ®ŸÇÿ±Ÿäÿå Ÿàÿ™ŸÉŸäŸÅŸä.
                    </p>
                    
                    <p class="leading-relaxed" style="color: var(--text-primary);">
                        ŸÖÿß ŸäŸÖŸäÿ≤ <strong style="color: var(--accent-color);">XO Arena</strong> ŸáŸà ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ±: ÿ£ŸÜÿ¥ÿ¶ ÿ∫ÿ±ŸÅÿ© ÿÆÿßÿµÿ© ÿ®ŸÉ Ÿàÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÉŸàÿØ ŸÖÿπ ÿµÿØŸäŸÇŸÉÿå ÿ£Ÿà ÿßÿØÿÆŸÑ ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ÿµŸÜŸäŸÅ ŸÖÿπ XPÿå ÿ£Ÿà ÿ™ÿ≠ÿØŸâ ŸÑÿßÿπÿ®ŸäŸÜ ŸÅŸä ŸÜŸÅÿ≥ ŸÖÿ≥ÿ™ŸàÿßŸÉ ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ. ŸÉŸÑ ÿ∞ŸÑŸÉ ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ≠ŸÖÿßŸäÿ© ŸÖŸÜ ÿßŸÑÿ∫ÿ¥ ŸàReal-time ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Firebase.
                    </p>

                    <div class="grid grid-cols-3 gap-3 mt-4">
                        <div class="p-3 rounded-lg text-center" style="background: rgba(0, 212, 255, 0.1); border: 1px solid var(--border-color);">
                            <div class="text-2xl font-bold" style="color: #00ff88;">+5</div>
                            <div class="text-xs" style="color: var(--text-secondary);">ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ∞ŸÉÿßÿ°</div>
                        </div>
                        <div class="p-3 rounded-lg text-center" style="background: rgba(255, 215, 0, 0.1); border: 1px solid var(--border-color);">
                            <div class="text-2xl font-bold" style="color: #ffd700;">+40</div>
                            <div class="text-xs" style="color: var(--text-secondary);">ÿ≥ŸÉŸÜÿßÿ™ ÿ≠ÿµÿ±Ÿäÿ©</div>
                        </div>
                        <div class="p-3 rounded-lg text-center" style="background: rgba(168, 85, 247, 0.1); border: 1px solid var(--border-color);">
                            <div class="text-2xl font-bold" style="color: #a855f7;">+21</div>
                            <div class="text-xs" style="color: var(--text-secondary);">ÿ•ÿ∑ÿßÿ± ŸÑŸÑŸÖŸÑŸÅ</div>
                        </div>
                    </div>

                    <h3 class="text-lg font-bold mt-4" style="color: var(--accent-color);">ŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑÿ¨ÿØŸäÿØÿ©:</h3>
                    <ul class="space-y-2 pr-4">
                        <li class="flex items-start gap-2" style="color: var(--text-primary);">
                            <span style="color: #00ff88;">‚úì</span>
                            <strong>ÿ∫ÿ±ŸÅ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°:</strong> ÿ£ŸÜÿ¥ÿ¶ ÿ∫ÿ±ŸÅÿ© ŸàÿßŸÜÿ∂ŸÖ ÿ®ŸÉŸàÿØ ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ•ÿπÿØÿßÿØÿßÿ™ ŸÖÿ™ŸÉÿßŸÖŸÑ.
                        </li>
                        <li class="flex items-start gap-2" style="color: var(--text-primary);">
                            <span style="color: #00ff88;">‚úì</span>
                            <strong>ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥ XP:</strong> ÿ±ÿßŸáŸÜ ÿ®ŸÄ XP ŸÖŸÜ 100 ÿ•ŸÑŸâ 20000 Ÿàÿßÿ±ÿ®ÿ≠ XP ÿßŸÑÿÆÿµŸÖ.
                        </li>
                        <li class="flex items-start gap-2" style="color: var(--text-primary);">
                            <span style="color: #00ff88;">‚úì</span>
                            <strong>ÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ:</strong> ŸÜÿ∏ÿßŸÖ Best Of ŸÖÿπ ŸÜŸÇÿßÿ∑ Ÿàÿ™ÿ±ŸÇŸäÿßÿ™.
                        </li>
                    </ul>

                    <p class="leading-relaxed mt-4 text-sm" style="color: var(--text-secondary);">
                        * ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 10,000 ŸÖÿ®ÿßÿ±ÿßÿ© ÿ™ŸÖ ŸÑÿπÿ®Ÿáÿß ÿπŸÑŸâ ŸÖŸÜÿµÿ™ŸÜÿß ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ. ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿπÿßÿ¶ŸÑÿ© XO Arena Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ£ŸÅÿ∂ŸÑ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ©.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- FRIENDS ONLINE OPTIONS MODAL (Will appear as overlay) -->
    <div id="friends-options-overlay" class="modal-overlay" onclick="closeFriendsOptions()"></div>
    <div id="friends-options-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°</h2>
            <button onclick="closeFriendsOptions()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <div class="space-y-4">
            <button onclick="showFriendsOnlineOptions()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                <i data-lucide="wifi" class="w-6 h-6" style="color: var(--accent-color);"></i>
                <span style="color: var(--text-primary);">ÿ£ŸàŸÜŸÑÿßŸäŸÜ</span>
            </button>
            
            <button onclick="startGame('friend')" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                <i data-lucide="smartphone" class="w-6 h-6" style="color: var(--accent-secondary);"></i>
                <span style="color: var(--text-primary);">ŸÖÿ≠ŸÑŸä (Offline)</span>
            </button>
        </div>
    </div>

    <!-- FRIENDS ONLINE SUB-OPTIONS (Create/Join) -->
    <div id="friends-online-overlay" class="modal-overlay" onclick="closeFriendsOnline()"></div>
    <div id="friends-online-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑÿπÿ® ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÖÿπ ÿµÿØŸäŸÇ</h2>
            <button onclick="closeFriendsOnline()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <div class="space-y-4">
            <button onclick="createRoom()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                <i data-lucide="plus-circle" class="w-6 h-6" style="color: var(--accent-color);"></i>
                <span style="color: var(--text-primary);">ÿ•ŸÜÿ¥ÿßÿ° ÿ∫ÿ±ŸÅÿ©</span>
            </button>
            
            <div class="relative">
                <input type="text" id="join-room-code" class="w-full px-4 py-3 rounded-xl bg-black/30 border border-gray-700 text-white text-center text-2xl font-mono tracking-widest" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸàÿØ ÿßŸÑÿ∫ÿ±ŸÅÿ©" maxlength="6">
            </div>
            
            <button onclick="joinRoom()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                <i data-lucide="log-in" class="w-6 h-6" style="color: var(--accent-secondary);"></i>
                <span style="color: var(--text-primary);">ÿßŸÜÿ∂ŸÖÿßŸÖ ÿ•ŸÑŸâ ÿ∫ÿ±ŸÅÿ©</span>
            </button>
        </div>
    </div>

    <!-- ONLINE MATCHES XP BET MODAL - MODIFIED TITLE AND TEXT -->
    <div id="online-matches-overlay" class="modal-overlay" onclick="closeOnlineMatches()"></div>
    <div id="online-matches-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿ™ŸÜÿßŸÅÿ≥Ÿäÿ©</h2>
            <button onclick="closeOnlineMatches()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <p class="mb-4 text-center" style="color: var(--text-secondary);">ÿßÿÆÿ™ÿ± ŸÖŸÇÿØÿßÿ± XP ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ ÿßŸÑÿ™ŸÜÿßŸÅÿ≥ ÿ®Ÿá:</p>
        
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button onclick="selectXpAmount(100)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">100</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
            <button onclick="selectXpAmount(500)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">500</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
            <button onclick="selectXpAmount(1000)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">1000</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
            <button onclick="selectXpAmount(5000)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">5000</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
            <button onclick="selectXpAmount(10000)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">10000</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
            <button onclick="selectXpAmount(20000)" class="xp-bet-btn neon-btn p-4 rounded-xl text-center">
                <div class="text-xl font-bold" style="color: #ffd700;">20000</div>
                <div class="text-xs" style="color: var(--text-secondary);">XP</div>
            </button>
        </div>
        
        <div class="flex items-center justify-between mb-4">
            <span style="color: var(--text-secondary);">XP ÿßŸÑŸÖÿ™ÿßÿ≠ ŸÑÿØŸäŸÉ:</span>
            <span id="xp-balance-display" class="font-bold" style="color: #ffd700;">0</span>
        </div>
        
        <button onclick="startMatchmaking()" id="start-matchmaking-btn" class="neon-btn w-full py-3 rounded-xl font-bold" disabled>
            ÿ®ÿØÿ° ÿßŸÑÿ®ÿ≠ÿ´
        </button>
    </div>

    <!-- DIVISION ONLINE OPTIONS MODAL -->
    <div id="division-options-overlay" class="modal-overlay" onclick="closeDivisionOptions()"></div>
    <div id="division-options-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</h2>
            <button onclick="closeDivisionOptions()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <div class="space-y-4">
            <button onclick="startDivisionMatch()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold">
                <i data-lucide="bot" class="w-6 h-6" style="color: var(--accent-color);"></i>
                <span style="color: var(--text-primary);">ÿ∂ÿØ ÿßŸÑÿ±Ÿàÿ®Ÿàÿ™</span>
            </button>
            
            <button onclick="startOnlineDivision()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold" style="background: linear-gradient(135deg, #ff3366, #ff6b35);">
                <i data-lucide="globe" class="w-6 h-6" style="color: white;"></i>
                <span style="color: white;">ÿ∂ÿØ ŸÑÿßÿπÿ®ŸäŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</span>
            </button>
        </div>
    </div>

    <!-- ROOM PAGE (Online Game) - REMOVED TIMER -->
    <div id="page-room" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            
            <header class="flex justify-between items-center mb-6">
                <button onclick="leaveRoom()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                
                <div class="flex items-center gap-2 px-4 py-2 rounded-full" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color);">
                    <i data-lucide="trophy" class="w-4 h-4" style="color: #ffd700;"></i>
                    <span id="room-xp" class="font-mono" style="color: #ffd700;">0 XP</span>
                </div>

                <button onclick="showRoomSettings()" id="room-settings-btn" class="p-2 rounded-lg hover:bg-white/10 transition-colors" style="display: none;">
                    <i data-lucide="settings" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
            </header>

            <!-- Room Code Display -->
            <div id="room-code-container" class="text-center mb-4" style="display: none;">
                <div class="room-code" id="room-code-display">ABC123</div>
                <button onclick="copyRoomCode()" class="copy-btn mt-2">
                    <i data-lucide="copy" class="w-4 h-4"></i>
                    ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ
                </button>
            </div>

            <!-- Players Info -->
            <div class="flex justify-between items-center mb-6 gap-4">
                <!-- Player 1 -->
                <div id="player1-profile" class="online-profile player1 flex-1">
                    <img id="player1-avatar" src="" alt="Player 1">
                    <div class="online-profile-info">
                        <div class="online-profile-name" id="player1-name">ÿßŸÑŸÑÿßÿπÿ® 1</div>
                        <div class="online-profile-details">
                            <span id="player1-level">Lv. 1</span>
                            <span id="player1-xp">0 XP</span>
                        </div>
                    </div>
                    <div class="text-2xl font-bold" id="player1-symbol" style="color: var(--accent-color);">X</div>
                </div>

                <!-- VS -->
                <div class="text-xl font-bold" style="color: var(--text-secondary);">VS</div>

                <!-- Player 2 -->
                <div id="player2-profile" class="online-profile player2 flex-1" style="opacity: 0.5;">
                    <img id="player2-avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23333'/%3E%3Ccircle cx='50' cy='35' r='20' fill='%23666'/%3E%3Cellipse cx='50' cy='80' rx='30' ry='25' fill='%23666'/%3E%3C/svg%3E" alt="Waiting">
                    <div class="online-profile-info">
                        <div class="online-profile-name" id="player2-name">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ±...</div>
                        <div class="online-profile-details">
                            <span id="player2-level">-</span>
                            <span id="player2-xp">-</span>
                        </div>
                    </div>
                    <div class="text-2xl font-bold" id="player2-symbol" style="color: var(--accent-secondary);">O</div>
                </div>
            </div>

            <!-- TIMER REMOVED FROM HERE -->

            <!-- Scoreboard -->
            <div class="scoreboard">
                <h3 class="text-lg font-bold mb-3" style="color: var(--accent-color);">ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©</h3>
                <div class="flex justify-between mb-2">
                    <div class="scoreboard-item flex-1 ml-2">
                        <span>ŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® 1</span>
                        <span id="player1-wins" class="scoreboard-value wins">0</span>
                    </div>
                    <div class="scoreboard-item flex-1">
                        <span>ŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® 2</span>
                        <span id="player2-wins" class="scoreboard-value wins">0</span>
                    </div>
                </div>
                <div class="flex justify-between">
                    <div class="scoreboard-item flex-1 ml-2">
                        <span>ÿ™ÿπÿßÿØŸÑ</span>
                        <span id="draws-count" class="scoreboard-value draws">0</span>
                    </div>
                    <div class="scoreboard-item flex-1">
                        <span>ÿßŸÑÿ¨ŸàŸÑÿ©</span>
                        <span id="current-round" class="scoreboard-value">1/3</span>
                    </div>
                </div>
            </div>

            <!-- Game Status -->
            <div id="room-game-status" class="text-center mb-6 h-10 text-xl font-display"></div>

            <!-- Game Board -->
            <div class="flex justify-center mb-6">
                <div id="room-game-board" class="grid grid-cols-3 gap-3 p-4 rounded-2xl" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color);"></div>
            </div>

            <!-- Disconnected Message -->
            <div id="disconnected-message" class="disconnected-message" style="display: none;">
                ÿßŸÑÿÆÿµŸÖ ÿßŸÜŸÅÿµŸÑ... ÿ¨ÿßÿ±Ÿä ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿßŸÑŸÅŸàÿ≤ ÿÆŸÑÿßŸÑ 5 ÿ´ŸàÿßŸÜ
            </div>

            <!-- Game Controls -->
            <div id="room-game-controls" class="flex justify-center gap-4">
                <button onclick="leaveRoom()" class="neon-btn px-6 py-3 rounded-xl flex items-center gap-2">
                    <i data-lucide="log-out" class="w-5 h-5"></i>
                    <span>ÿÆÿ±Ÿàÿ¨</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ROOM SETTINGS MODAL (Host Only) - REMOVED TIMER SETTING -->
    <div id="room-settings-overlay" class="modal-overlay" onclick="closeRoomSettings()"></div>
    <div id="room-settings-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ∫ÿ±ŸÅÿ©</h2>
            <button onclick="closeRoomSettings()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block mb-2" style="color: var(--text-secondary);">ÿπÿØÿØ ÿßŸÑÿ¨ŸàŸÑÿßÿ™:</label>
                <select id="settings-rounds" class="w-full p-3 rounded-lg bg-black/30 border border-gray-700 text-white">
                    <option value="1">1 ÿ¨ŸàŸÑÿ©</option>
                    <option value="3" selected>3 ÿ¨ŸàŸÑÿßÿ™</option>
                    <option value="5">5 ÿ¨ŸàŸÑÿßÿ™</option>
                    <option value="7">7 ÿ¨ŸàŸÑÿßÿ™</option>
                </select>
            </div>
            
            <!-- TIMER SETTING REMOVED FROM HERE -->
            
            <div class="flex items-center justify-between">
                <span style="color: var(--text-secondary);">ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ™ÿπÿßÿØŸÑ:</span>
                <input type="checkbox" id="settings-allow-draw" class="w-5 h-5" checked>
            </div>
            
            <div class="flex items-center justify-between">
                <span style="color: var(--text-secondary);">ÿßŸÑŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©:</span>
                <input type="checkbox" id="settings-sound" class="w-5 h-5" checked>
            </div>
            
            <div>
                <label class="block mb-2" style="color: var(--text-secondary);">ÿ±ŸÖÿ≤ ÿßŸÑŸÑÿßÿπÿ® 1 (X ÿ£Ÿà O):</label>
                <select id="settings-player1-symbol" class="w-full p-3 rounded-lg bg-black/30 border border-gray-700 text-white">
                    <option value="X">X</option>
                    <option value="O">O</option>
                </select>
            </div>
            
            <hr class="border-gray-700">
            
            <button onclick="restartMatch()" class="neon-btn w-full py-3 rounded-xl font-bold">
                ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©
            </button>
            
            <button onclick="kickPlayer()" class="neon-btn w-full py-3 rounded-xl font-bold" style="background: rgba(255, 51, 102, 0.2); color: #ff3366;">
                ÿ∑ÿ±ÿØ ÿßŸÑŸÑÿßÿπÿ®
            </button>
            
            <button onclick="closeRoom()" class="neon-btn w-full py-3 rounded-xl font-bold" style="background: rgba(255, 0, 0, 0.2); color: #ff0000;">
                ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ∫ÿ±ŸÅÿ©
            </button>
        </div>
    </div>

    <!-- PROFILE PAGE -->
    <div id="page-profile" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä</h1>
            </div>

            <!-- Profile Info with Frame -->
            <div class="glass-card rounded-2xl p-6 mb-6 text-center">
                <div class="relative inline-block mb-4">
                    <div id="profileFrameContainer" class="rounded-full p-1">
                        <img id="profile-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%231e293b'/%3E%3Ccircle cx='50' cy='35' r='20' fill='%2300d4ff'/%3E%3Cellipse cx='50' cy='80' rx='30' ry='25' fill='%2300d4ff'/%3E%3C/svg%3E" alt="Profile" class="profile-img">
                    </div>
                    <label class="absolute bottom-0 right-0 p-2 rounded-full cursor-pointer transition-all hover:scale-110" style="background: var(--bg-tertiary);">
                        <i data-lucide="camera" class="w-4 h-4" style="color: var(--text-primary);"></i>
                        <input type="file" id="profile-img-input" accept="image/*" class="hidden" onchange="handleProfileImage(event)">
                    </label>
                </div>
                
                <input type="text" id="profile-name-input" placeholder="ÿßÿ≥ŸÖ ÿßŸÑŸÑÿßÿπÿ®" class="bg-transparent border-b-2 text-center text-xl font-bold w-full max-w-xs py-2 mb-2 focus:outline-none transition-colors" style="border-color: var(--border-color); color: var(--text-primary);" onchange="saveProfileName()">

                <div class="flex items-center justify-center gap-2 mb-2">
                    <span id="profile-rank" class="px-3 py-1 rounded-full font-bold" style="background: var(--accent-color); color: var(--bg-color);">Rookie</span>
                </div>

                <div class="flex items-center justify-center gap-2">
                    <i data-lucide="trophy" class="w-5 h-5" style="color: #ffd700;"></i>
                    <span id="profile-xp" class="text-2xl font-mono font-bold" style="color: #ffd700;">0 XP</span>
                </div>
            </div>

            <!-- Daily Streak -->
            <div class="glass-card rounded-xl p-4 mb-6">
                <h3 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                    <i data-lucide="flame" class="w-5 h-5" style="color: #ff6b35;"></i>
                    ÿ≥ŸÑÿ≥ŸÑÿ© ÿßŸÑŸáÿØÿßŸäÿß ÿßŸÑŸäŸàŸÖŸäÿ©
                </h3>
                <div class="flex items-center justify-between">
                    <div>
                        <div id="daily-streak" class="text-3xl font-bold" style="color: #ff6b35;">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ£ŸäÿßŸÖ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©</div>
                    </div>
                    <div class="text-left">
                        <div class="text-sm" style="color: var(--text-secondary);">ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©</div>
                        <div id="next-reward-amount" class="text-lg font-bold" style="color: #ffd700;">500 XP</div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="glass-card rounded-xl p-4 mb-6">
                <h3 class="text-lg font-bold text-white mb-4">ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-total" class="text-2xl font-bold text-white">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™</div>
                    </div>
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-wins" class="text-2xl font-bold" style="color: #00ff88;">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ŸÅŸàÿ≤</div>
                    </div>
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-losses" class="text-2xl font-bold" style="color: var(--accent-secondary);">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿÆÿ≥ÿßÿ±ÿ©</div>
                    </div>
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-draws" class="text-2xl font-bold" style="color: var(--text-secondary);">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ™ÿπÿßÿØŸÑ</div>
                    </div>
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-streak" class="text-2xl font-bold" style="color: #ffd700;">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ≥ŸÑÿ≥ŸÑÿ© ÿßŸÑŸÅŸàÿ≤</div>
                    </div>
                    <div class="rounded-lg p-3 text-center" style="background: rgba(0,0,0,0.3);">
                        <div id="stat-best" class="text-2xl font-bold" style="color: #a855f7;">0</div>
                        <div class="text-xs" style="color: var(--text-secondary);">ÿ£ŸÅÿ∂ŸÑ ÿ≥ŸÑÿ≥ŸÑÿ©</div>
                    </div>
                </div>
            </div>

            <!-- Division Stats -->
            <div class="glass-card rounded-xl p-4 mb-6">
                <h3 class="text-lg font-bold text-white mb-4">ÿ™ŸÇÿØŸÖ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</h3>
                <div class="flex items-center justify-between mb-3">
                    <span style="color: var(--text-secondary);">ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:</span>
                    <span id="currentDivision" class="font-bold" style="color: var(--accent-color);">10</span>
                </div>
                <div class="flex items-center justify-between mb-3">
                    <span style="color: var(--text-secondary);">ŸÜŸÇÿßÿ∑ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ:</span>
                    <span id="divisionPoints" class="font-bold" style="color: #ffd700;">0</span>
                </div>
                <div class="flex items-center justify-between">
                    <span style="color: var(--text-secondary);">ÿ£ŸÅÿ∂ŸÑ ÿØŸäŸÅŸäÿ¨ŸÜ:</span>
                    <span id="bestDivision" class="font-bold" style="color: #00ff88;">10</span>
                </div>
            </div>

            <!-- Achievements -->
            <div class="glass-card rounded-xl p-4">
                <h3 class="text-lg font-bold text-white mb-4">ÿßŸÑÿ•ŸÜÿ¨ÿßÿ≤ÿßÿ™</h3>
                <div id="profile-achievements" class="space-y-3"></div>
            </div>
        </div>
    </div>

    <!-- DIVISION MODE PAGE -->
    <div id="page-division" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</h1>
            </div>

            <!-- Division Summary -->
            <div class="glass-card rounded-xl p-4 mb-6">
                <div class="flex justify-between items-center mb-3">
                    <span style="color: var(--text-secondary);">ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:</span>
                    <span id="divisionCurrentDisplay" class="text-2xl font-bold" style="color: var(--accent-color);">10</span>
                </div>
                <div class="flex justify-between items-center mb-3">
                    <span style="color: var(--text-secondary);">ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≠ÿßŸÑŸäÿ©:</span>
                    <span id="divisionPointsDisplay" class="text-xl font-bold" style="color: #ffd700;">0</span>
                </div>
                <div class="flex justify-between items-center mb-3">
                    <span style="color: var(--text-secondary);">ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ŸÑŸÑÿ™ÿßŸÑŸä:</span>
                    <span id="divisionRequiredDisplay" class="text-xl font-bold" style="color: #00ff88;">6</span>
                </div>
                <div class="division-progress">
                    <div id="divisionProgressBar" class="division-progress-bar" style="width: 0%"></div>
                </div>
            </div>

            <!-- Division Grid -->
            <div id="divisionContainer" class="space-y-4 mb-6"></div>

            <!-- Start Division Match Button -->
            <button onclick="showDivisionOptions()" class="neon-btn w-full rounded-xl p-5 flex items-center justify-center gap-3 text-lg font-bold mb-4" style="background: linear-gradient(135deg, #ff3366, #ff6b35);">
                <i data-lucide="play" class="w-6 h-6" style="color: white;"></i>
                <span style="color: white;">ÿßÿ®ÿØÿ£ ŸÖÿ®ÿßÿ±ÿßÿ© ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</span>
            </button>

            <!-- Division Info -->
            <div class="glass-card rounded-xl p-4">
                <h3 class="text-lg font-bold text-white mb-3">ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑ ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</h3>
                <ul class="space-y-2">
                    <li class="flex items-center gap-2" style="color: #00ff88;">
                        <i data-lucide="check-circle" class="w-4 h-4"></i>
                        <span>ÿßŸÑŸÅŸàÿ≤: +3 ŸÜŸÇÿßÿ∑</span>
                    </li>
                    <li class="flex items-center gap-2" style="color: #ffd700;">
                        <i data-lucide="minus-circle" class="w-4 h-4"></i>
                        <span>ÿßŸÑÿ™ÿπÿßÿØŸÑ (ÿ∂ÿØ AI ŸÅŸÇÿ∑): +1 ŸÜŸÇÿ∑ÿ©</span>
                    </li>
                    <li class="flex items-center gap-2" style="color: #ff3366;">
                        <i data-lucide="x-circle" class="w-4 h-4"></i>
                        <span>ÿßŸÑÿÆÿ≥ÿßÿ±ÿ©: -3 ŸÜŸÇÿßÿ∑</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- LEVELS PAGE -->
    <div id="page-levels" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-8">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßÿÆÿ™ÿ± ÿßŸÑÿµÿπŸàÿ®ÿ©</h1>
            </div>
            <div id="levels-container" class="space-y-4"></div>
        </div>
    </div>

    <!-- GAME PAGE (Local/AI) -->
    <div id="page-game" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            
            <header class="flex justify-between items-center mb-6">
                <button onclick="endGameAndReturn()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                
                <div class="flex items-center gap-2 px-4 py-2 rounded-full" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color);">
                    <i data-lucide="trophy" class="w-4 h-4" style="color: #ffd700;"></i>
                    <span id="game-xp" class="font-mono" style="color: #ffd700;">0 XP</span>
                </div>

                <button onclick="openGuide()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="help-circle" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
            </header>

            <!-- Win Streak Counter -->
            <div id="win-streak-counter" class="win-streak" style="display: none;">
                <i data-lucide="flame"></i>
                <span id="win-streak-value">0</span>
                <span>ÿßŸÜÿ™ÿµÿßÿ±ÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©</span>
            </div>

            <!-- Game Mode Indicator -->
            <div id="gameModeIndicator" class="text-center mb-2 text-sm" style="color: var(--text-secondary);"></div>

            <!-- Player Indicators -->
            <div class="flex justify-between items-center mb-6 px-2">
                <div id="player-x-indicator" class="flex items-center gap-2 px-4 py-2 rounded-xl" style="background: rgba(0,0,0,0.4); border: 2px solid rgba(0, 212, 255, 0.3);">
                    <span class="text-2xl font-bold" style="color: var(--accent-color);">X</span>
                    <span id="player-x-name" class="text-sm" style="color: var(--text-secondary);">ÿßŸÑŸÑÿßÿπÿ®</span>
                </div>
                <div class="text-lg" style="color: var(--text-secondary);">VS</div>
                <div id="player-o-indicator" class="flex items-center gap-2 px-4 py-2 rounded-xl" style="background: rgba(0,0,0,0.4); border: 2px solid rgba(255, 51, 102, 0.3);">
                    <span class="text-2xl font-bold" style="color: var(--accent-secondary);">O</span>
                    <span id="player-o-name" class="text-sm" style="color: var(--text-secondary);">ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ±</span>
                </div>
            </div>

            <!-- Game Status -->
            <div id="game-status" class="text-center mb-6 h-10 text-xl font-display"></div>

            <!-- Game Board -->
            <div class="flex justify-center mb-6">
                <div id="game-board" class="grid grid-cols-3 gap-3 p-4 rounded-2xl" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color);"></div>
            </div>

            <!-- Game Controls -->
            <div id="game-controls" class="flex justify-center gap-4 opacity-0 transition-opacity duration-500">
                <button onclick="showLoadingAndReset()" class="neon-btn px-6 py-3 rounded-xl flex items-center gap-2">
                    <i data-lucide="rotate-ccw" class="w-5 h-5" style="color: var(--text-secondary);"></i>
                    <span style="color: var(--text-primary);">ÿßŸÑÿπÿ® ÿ™ÿßŸÜŸä</span>
                </button>
                <button onclick="showVAR()" class="neon-btn px-6 py-3 rounded-xl flex items-center gap-2">
                    <i data-lucide="video" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    <span style="color: var(--text-primary);">VAR</span>
                </button>
                <button onclick="navigateTo('home')" class="neon-btn px-6 py-3 rounded-xl flex items-center gap-2">
                    <i data-lucide="home" class="w-5 h-5" style="color: var(--text-secondary);"></i>
                    <span style="color: var(--text-primary);">ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </button>
            </div>
        </div>
    </div>

    <!-- STORE PAGE -->
    <div id="page-store" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                        <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                    </button>
                    <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑŸÖÿ™ÿ¨ÿ±</h1>
                </div>
                <div class="flex items-center gap-2 px-4 py-2 rounded-full" style="background: rgba(0,0,0,0.4); border: 1px solid rgba(255, 215, 0, 0.3);">
                    <i data-lucide="coins" class="w-4 h-4" style="color: #ffd700;"></i>
                    <span id="store-xp" class="font-mono font-bold" style="color: #ffd700;">0</span>
                </div>
            </div>

            <!-- Search Bar -->
            <input type="text" id="storeSearch" class="search-bar" placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ≥ŸÉŸÜ ÿ£Ÿà ÿ•ÿ∑ÿßÿ±..." oninput="filterStore()">

            <!-- Category Tabs -->
            <div class="category-tabs">
                <button onclick="setStoreCategory('all')" id="cat-all" class="category-tab active">ÿßŸÑŸÉŸÑ</button>
                <button onclick="setStoreCategory('skins')" id="cat-skins" class="category-tab">ÿßŸÑÿ≥ŸÉŸÜÿßÿ™</button>
                <button onclick="setStoreCategory('frames')" id="cat-frames" class="category-tab">ÿßŸÑÿ•ÿ∑ÿßÿ±ÿßÿ™</button>
            </div>

            <!-- Filters -->
            <div class="store-filters">
                <button onclick="setRarityFilter('all')" id="rarity-all" class="filter-btn active">ÿßŸÑŸÉŸÑ</button>
                <button onclick="setRarityFilter('common')" id="rarity-common" class="filter-btn">ÿπÿßÿØŸä</button>
                <button onclick="setRarityFilter('rare')" id="rarity-rare" class="filter-btn">ŸÜÿßÿØÿ±</button>
                <button onclick="setRarityFilter('epic')" id="rarity-epic" class="filter-btn">ŸÖŸÑÿ≠ŸÖŸä</button>
                <button onclick="setRarityFilter('legendary')" id="rarity-legendary" class="filter-btn">ÿ£ÿ≥ÿ∑Ÿàÿ±Ÿä</button>
                <button onclick="sortByPrice('asc')" class="filter-btn">
                    <i data-lucide="arrow-up" class="w-4 h-4 inline"></i> ÿßŸÑÿ≥ÿπÿ±
                </button>
                <button onclick="sortByPrice('desc')" class="filter-btn">
                    <i data-lucide="arrow-down" class="w-4 h-4 inline"></i> ÿßŸÑÿ≥ÿπÿ±
                </button>
            </div>

            <!-- Store Grid -->
            <div id="store-container" class="store-grid"></div>
        </div>
    </div>

    <!-- SHARE PAGE -->
    <div id="page-share" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÑÿπÿ®ÿ©</h1>
            </div>

            <div class="glass-card rounded-2xl p-6 text-center mb-6">
                <div class="text-6xl mb-4">üéÅ</div>
                <h2 class="text-2xl font-bold text-white mb-2">ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©</h2>
                <p class="text-lg mb-4" style="color: var(--text-secondary);">ÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿπ 20 ÿ¥ÿÆÿµ Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 100,000 XP!</p>
                
                <div class="share-stats">
                    <div class="share-count" id="shareCount">0/20</div>
                    <div class="share-progress">
                        <div id="shareProgress" class="share-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="share-buttons">
                    <button onclick="shareOnFacebook()" class="share-btn facebook">
                        <i data-lucide="facebook"></i>
                        ŸÅŸäÿ≥ÿ®ŸàŸÉ
                    </button>
                    <button onclick="shareOnTwitter()" class="share-btn twitter">
                        <i data-lucide="twitter"></i>
                        ÿ™ŸàŸäÿ™ÿ±
                    </button>
                    <button onclick="shareOnWhatsApp()" class="share-btn whatsapp">
                        <i data-lucide="message-circle"></i>
                        Ÿàÿßÿ™ÿ≥ÿßÿ®
                    </button>
                    <button onclick="shareOnTelegram()" class="share-btn telegram">
                        <i data-lucide="send"></i>
                        ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ
                    </button>
                </div>

                <button onclick="verifyShare()" class="share-verify w-full mt-4" id="verifyShareBtn">
                    <i data-lucide="check-circle" class="inline w-5 h-5 ml-2"></i>
                    ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©
                </button>
            </div>

            <div class="glass-card rounded-xl p-4">
                <h3 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                    <i data-lucide="info" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    ŸÉŸäŸÅŸäÿ© ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©
                </h3>
                <ul class="space-y-2">
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: #00ff88;">1.</span>
                        ÿßŸÜÿ≥ÿÆ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÑÿπÿ®ÿ©: https://xo-arena-1.github.io/XO-Arena/
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: #00ff88;">2.</span>
                        ÿ¥ÿßÿ±ŸÉ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸÖÿπ 20 ÿ¥ÿÆÿµ ÿπÿ®ÿ± Ÿàÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸàÿßÿµŸÑ
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: #00ff88;">3.</span>
                        ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ "ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©" ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: #ffd700;">üí°</span>
                        ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©: 100,000 XP (ŸÖÿ±ÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸÇÿ∑)
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- SETTINGS PAGE -->
    <div id="page-settings" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</h1>
            </div>

            <!-- Music Player in Settings -->
            <div class="glass-card rounded-xl p-4 mb-4">
                <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="music" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ
                </h2>
                <div class="music-player">
                    <div class="music-controls">
                        <button onclick="previousSong()" class="music-btn">
                            <i data-lucide="skip-back"></i>
                        </button>
                        <button onclick="toggleMusic()" id="musicToggleBtnSettings" class="music-btn">
                            <i data-lucide="play"></i>
                        </button>
                        <button onclick="nextSong()" class="music-btn">
                            <i data-lucide="skip-forward"></i>
                        </button>
                    </div>
                    <select id="musicSelectSettings" class="music-select" onchange="changeSong(this.value)">
                        <option value="0">Without Me - Eminem</option>
                        <option value="1">Believer - Imagine Dragons</option>
                        <option value="2">B3teny leh - Ziad Zaza</option>
                        <option value="3">Superman - Eminem</option>
                        <option value="4">Billie Jean - Michael Jackson</option>
                        <option value="5">Sing For The Moment - Eminem</option>
                        <option value="6">Cleanin Out My Closet - Eminem</option>
                        <option value="7">Big Mafia - Marwan Moussa</option>
                        <option value="8">Karma - Marwan Pablo</option>
                        <option value="9">Mockingbird - Eminem</option>
                        <option value="10">The Real Slim Shady - Eminem</option>
                        <option value="11">Lovely - Billie Eilish</option>
                        <option value="12">MOONLIGHT - XXXTentacion</option>
                        <option value="13">Dorak Gai - Wegz</option>
                        <option value="14">Birds of a Feather - Billie Eilish</option>
                        <option value="15">3alam kadaba - Lege Cy</option>
                        <option value="16">The Fate of Ophelia - Taylor Swift</option>
                        <option value="17">Gabolna Hkoma - Ziad Zaza</option>
                        <option value="18">Stan - Eminem</option>
                        <option value="19">Godzilla - Eminem</option>
                    </select>
                    <div id="nowPlayingSettings" class="now-playing">ÿ∫Ÿäÿ± ŸÖÿ¥ÿ∫ŸÑÿ©</div>
                </div>
            </div>

            <!-- AD REMOVAL SECTION REMOVED FROM HERE -->

            <!-- Play As -->
            <div class="glass-card rounded-xl p-4 mb-4">
                <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="gamepad-2" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    ÿßŸÑÿπÿ® ŸÉŸÄ
                </h2>
                <div class="flex gap-4">
                    <button id="play-as-x" onclick="setPlayAs('X')" class="flex-1 py-4 rounded-xl font-bold text-2xl transition-all" style="background: rgba(0, 212, 255, 0.1); border: 2px solid var(--accent-color); color: var(--accent-color);">X</button>
                    <button id="play-as-o" onclick="setPlayAs('O')" class="flex-1 py-4 rounded-xl font-bold text-2xl transition-all" style="background: rgba(255,255,255,0.02); border: 2px solid rgba(255,255,255,0.1); color: var(--text-secondary);">O</button>
                </div>
            </div>

            <!-- Themes -->
            <div class="glass-card rounded-xl p-4 mb-4">
                <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="palette" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    ÿßŸÑÿ´ŸäŸÖÿßÿ™
                </h2>
                <div id="themes-container" class="grid grid-cols-2 gap-3"></div>
            </div>

            <!-- Language -->
            <div class="glass-card rounded-xl p-4 mb-4">
                <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="languages" class="w-5 h-5" style="color: var(--accent-color);"></i>
                    ÿßŸÑŸÑÿ∫ÿ©
                </h2>
                <select class="w-full p-3 rounded-lg" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color); color: var(--text-primary);">
                    <option value="ar" selected>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="en">English</option>
                    <option value="fr">Fran√ßais</option>
                </select>
            </div>

            <!-- Secret Codes -->
            <div class="glass-card rounded-xl p-4 mb-4">
                <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="key" class="w-5 h-5" style="color: #a855f7;"></i>
                    ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ≥ÿ±Ÿäÿ©
                </h2>
                <div class="flex gap-2">
                    <input type="text" id="secret-code-input" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ≥ÿ±Ÿä" class="flex-1 px-4 py-3 rounded-lg focus:outline-none transition-colors" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color); color: var(--text-primary);">
                    <button onclick="activateSecretCode()" class="px-4 py-3 rounded-lg font-bold transition-all hover:scale-105" style="background: #a855f7; color: white;">ÿ™ŸÅÿπŸäŸÑ</button>
                </div>
            </div>

            <!-- Danger Zone -->
            <div class="rounded-xl p-4" style="background: rgba(255, 51, 102, 0.1); border: 1px solid rgba(255, 51, 102, 0.3);">
                <h2 class="text-lg font-bold mb-4 flex items-center gap-2" style="color: var(--accent-secondary);">
                    <i data-lucide="alert-triangle" class="w-5 h-5"></i>
                    ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿÆÿ∑ÿ±
                </h2>
                <button onclick="resetProgress()" class="w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 transition-all hover:scale-102" style="background: rgba(255, 51, 102, 0.2); color: var(--accent-secondary); border: 1px solid var(--accent-secondary);">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                    ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÇÿØŸÖ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ
                </button>
            </div>
        </div>
    </div>

    <!-- CHALLENGES PAGE -->
    <div id="page-challenges" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™</h1>
            </div>
            <div id="challenges-container" class="space-y-4"></div>
        </div>
    </div>

    <!-- ABOUT PAGE -->
    <div id="page-about" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿπŸÜ ÿßŸÑŸÑÿπÿ®ÿ©</h1>
            </div>

            <div class="glass-card rounded-2xl p-4 mb-6 overflow-hidden">
                <div class="w-full h-64 rounded-xl flex items-center justify-center" style="background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary)); border: 2px dashed var(--accent-color);">
                    <img src="https://files.catbox.moe/f28twh.png" alt="Eclipse Games Logo" class="w-full h-full object-cover rounded-xl">
                </div>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <div class="text-center mb-6">
                    <div class="text-6xl font-display font-bold mb-2" style="color: var(--accent-color);">XO</div>
                    <div class="text-xl" style="color: var(--text-secondary);">Dark Edition</div>
                </div>
                
                <h2 class="text-2xl font-bold mb-4" style="color: var(--accent-color);">ŸÖŸÜ ŸÜÿ≠ŸÜÿü - ŸÇÿµÿ© Eclipse Games</h2>
                
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    <strong>Eclipse Games</strong> ŸáŸà ŸÅÿ±ŸäŸÇ ÿ™ÿ∑ŸàŸäÿ± ÿ£ŸÑÿπÿßÿ® ÿπÿ±ÿ®Ÿä ŸÖÿ≥ÿ™ŸÇŸÑÿå ÿ™ÿ£ÿ≥ÿ≥ ŸÅŸä 2023 ÿ®ŸáÿØŸÅ ÿ™ŸÇÿØŸäŸÖ ÿ£ŸÑÿπÿßÿ® ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ŸÑŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©. ŸÜÿ≠ŸÜ ŸÜÿ§ŸÖŸÜ ÿ®ÿ£ŸÜ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿπÿ±ÿ®Ÿä Ÿäÿ≥ÿ™ÿ≠ŸÇ ÿ™ÿ¨ÿßÿ±ÿ® ŸÑÿπÿ® ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ÿ™ŸÜÿßŸÅÿ≥ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿπÿßŸÑŸÖŸäÿ©ÿå ŸÑŸÉŸÜ ÿ®ÿ∑ÿßÿ®ÿπ ÿπÿ±ÿ®Ÿä ÿ£ÿµŸäŸÑ ŸàŸÑÿ∫ÿ© ÿπÿ±ÿ®Ÿäÿ© ÿ≥ŸÑŸäŸÖÿ©.
                </p>
                
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    <strong>XO Arena Dark Edition</strong> ŸáŸà ÿ£ŸàŸÑ ŸÖÿ¥ÿßÿ±ŸäÿπŸÜÿßÿå ŸàŸÇÿØ ÿπŸÖŸÑŸÜÿß ÿπŸÑŸäŸá ŸÑÿ£ŸÉÿ´ÿ± ŸÖŸÜ 6 ÿ£ÿ¥Ÿáÿ± ŸÑÿ∂ŸÖÿßŸÜ ÿ£ŸÅÿ∂ŸÑ ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÖŸÖŸÉŸÜÿ©. ÿßŸÑŸÑÿπÿ®ÿ© ŸÑŸäÿ≥ÿ™ ŸÖÿ¨ÿ±ÿØ ŸÜÿ≥ÿÆÿ© ŸÖŸÉÿ±ÿ±ÿ© ŸÖŸÜ ÿ£ŸÑÿπÿßÿ® ÿ•ŸÉÿ≥ ÿ£Ÿà ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©ÿå ÿ®ŸÑ ŸáŸä ŸÖŸÜÿµÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ŸÜÿ∏ÿßŸÖ ÿ™ÿ∑Ÿàÿ± ŸàŸÖŸÉÿßŸÅÿ¢ÿ™ Ÿàÿ•ŸÜÿ¨ÿßÿ≤ÿßÿ™ ÿ™ÿ¨ÿπŸÑ ÿßŸÑŸÑÿπÿ®ÿ© ÿ£ŸÉÿ´ÿ± ÿ™ÿ¥ŸàŸäŸÇÿßŸã Ÿàÿ•ÿØŸÖÿßŸÜÿßŸã.
                </p>

                <h3 class="text-lg font-bold text-white mb-3 mt-4">ÿ±ÿ§Ÿäÿ™ŸÜÿß</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸÜÿ≥ÿπŸâ ŸÑÿ£ŸÜ ŸÜŸÉŸàŸÜ ÿßŸÑŸÖŸÜÿµÿ© ÿßŸÑÿ£ŸàŸÑŸâ ŸÑŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿ•ÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ÿßŸÑÿ®ÿ≥Ÿäÿ∑ÿ© ŸÅŸä ÿßŸÑÿπÿßŸÑŸÖ ÿßŸÑÿπÿ±ÿ®Ÿäÿå Ÿàÿ£ŸÜ ŸÜÿÆŸÑŸÇ ŸÖÿ¨ÿ™ŸÖÿπÿßŸã ŸÖŸÜ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ŸÖŸäÿ≤ŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ¥ÿßÿ±ŸÉŸàŸÜŸÜÿß ÿ¥ÿ∫ŸÅ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸàÿßŸÑÿ™ÿ≠ÿØŸä.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">ÿ±ÿ≥ÿßŸÑÿ™ŸÜÿß</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿ™ŸÇÿØŸäŸÖ ÿ£ŸÑÿπÿßÿ® ÿ™ÿ¨ŸÖÿπ ÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ÿπÿ© ŸàÿßŸÑŸÅÿßÿ¶ÿØÿ©ÿå ÿ™ŸÜŸÖŸä ÿßŸÑÿ∞ŸÉÿßÿ° ŸàÿßŸÑÿ™ŸÅŸÉŸäÿ± ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿå Ÿàÿ™ŸÉŸàŸÜ ŸÅŸä ŸÖÿ™ŸÜÿßŸàŸÑ ÿßŸÑÿ¨ŸÖŸäÿπ ŸÖÿ¨ÿßŸÜÿßŸã.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">ŸÅÿ±ŸäŸÇ ÿßŸÑÿπŸÖŸÑ</h3>
                <div class="grid grid-cols-2 gap-4 mt-4">
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="w-20 h-20 rounded-full mx-auto mb-2" style="background: var(--accent-color); opacity: 0.5;"></div>
                        <div class="font-bold" style="color: var(--text-primary);">ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ŸÖÿ∑Ÿàÿ± ÿ±ÿ¶Ÿäÿ≥Ÿä</div>
                    </div>
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="w-20 h-20 rounded-full mx-auto mb-2" style="background: var(--accent-secondary); opacity: 0.5;"></div>
                        <div class="font-bold" style="color: var(--text-primary);">ÿ≥ÿßÿ±ÿ© ÿπŸÑŸä</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ŸÖÿµŸÖŸÖÿ© Ÿàÿßÿ¨Ÿáÿßÿ™</div>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <h2 class="text-xl font-bold text-white mb-4">ÿ¢ÿÆÿ± ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™</h2>
                <div class="space-y-3">
                    <div class="p-3 rounded-lg" style="background: rgba(0,0,0,0.3);">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs px-2 py-0.5 rounded-full" style="background: #00ff88; color: black;">v5.0</span>
                            <span class="text-xs" style="color: var(--text-secondary);">20 ŸÖÿßÿ±ÿ≥ 2026</span>
                        </div>
                        <p style="color: var(--text-primary);">ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ: ÿ∫ÿ±ŸÅ ÿ£ÿµÿØŸÇÿßÿ°ÿå ÿ™ŸÜÿßŸÅÿ≥ XPÿå ÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</p>
                    </div>
                    <div class="p-3 rounded-lg" style="background: rgba(0,0,0,0.3);">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs px-2 py-0.5 rounded-full" style="background: #00ff88; color: black;">v4.0</span>
                            <span class="text-xs" style="color: var(--text-secondary);">1 ŸÖÿßÿ±ÿ≥ 2026</span>
                        </div>
                        <p style="color: var(--text-primary);">ÿ•ÿ∂ÿßŸÅÿ© ÿ∑Ÿàÿ± ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿ™ŸÉŸäŸÅŸä ŸàŸÖŸäÿ≤ÿ© VAR</p>
                    </div>
                    <div class="p-3 rounded-lg" style="background: rgba(0,0,0,0.3);">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs px-2 py-0.5 rounded-full" style="background: #00ff88; color: black;">v3.0</span>
                            <span class="text-xs" style="color: var(--text-secondary);">1 ŸÅÿ®ÿ±ÿßŸäÿ± 2026</span>
                        </div>
                        <p style="color: var(--text-primary);">ÿ•ÿ∂ÿßŸÅÿ© ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ŸÖÿπ 10 ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ŸàŸÖŸÉÿßŸÅÿ¢ÿ™ ÿ£ÿ≥ÿ∑Ÿàÿ±Ÿäÿ©</p>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-2xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">XO Arena ŸÅŸä ÿ£ÿ±ŸÇÿßŸÖ</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="text-3xl font-bold" style="color: #00ff88;">10k+</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ŸÖÿ®ÿßÿ±ÿßÿ© ŸÑÿπÿ®ÿ™</div>
                    </div>
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="text-3xl font-bold" style="color: #ffd700;">5k+</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ŸÑÿßÿπÿ® ŸÜÿ¥ÿ∑</div>
                    </div>
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="text-3xl font-bold" style="color: #a855f7;">40+</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ÿ≥ŸÉŸÜ</div>
                    </div>
                    <div class="text-center p-4 rounded-xl" style="background: rgba(0,0,0,0.3);">
                        <div class="text-3xl font-bold" style="color: #ff3366;">21</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ÿ•ÿ∑ÿßÿ±</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PRIVACY PAGE -->
    <div id="page-privacy" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</h1>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <p class="mb-4 text-sm" style="color: var(--text-secondary);">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: 20 ŸÖÿßÿ±ÿ≥ 2026</p>
                
                <h2 class="text-xl font-bold text-white mb-4">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© ŸÑŸÄ XO Arena</h2>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸÜÿ≠ŸÜ ŸÅŸä <strong>Eclipse Games</strong> (ŸÖŸÜ ÿÆŸÑÿßŸÑ ŸÑÿπÿ®ÿ© XO Arena) ŸÜÿ≠ÿ™ÿ±ŸÖ ÿÆÿµŸàÿµŸäÿ™ŸÉ ŸàŸÜŸÑÿ™ÿ≤ŸÖ ÿ®ÿ≠ŸÖÿßŸäÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ©. ÿ™Ÿàÿ∂ÿ≠ Ÿáÿ∞Ÿá ÿßŸÑÿ≥Ÿäÿßÿ≥ÿ© ŸÉŸäŸÅŸäÿ© ÿ™ÿπÿßŸÖŸÑŸÜÿß ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">1. ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿßŸÑŸÑÿπÿ®ÿ© ÿ™ÿ≥ÿ™ÿÆÿØŸÖ <strong>Firebase Authentication</strong> ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿπÿ®ÿ± Googleÿå Ÿà <strong>Firebase Firestore</strong> ŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ. ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™Ÿä ŸÜÿ¨ŸÖÿπŸáÿß ÿ™ÿ¥ŸÖŸÑ: ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿå ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ¥ÿÆÿµŸäÿ©ÿå Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© (XPÿå ÿßŸÑŸÖÿ≥ÿ™ŸàŸâÿå ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜÿå ÿßŸÑŸÅŸàÿ≤/ÿßŸÑÿÆÿ≥ÿßÿ±ÿ©). Ÿáÿ∞Ÿá ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∂ÿ±Ÿàÿ±Ÿäÿ© ŸÑÿ™ÿ¥ÿ∫ŸäŸÑ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">2. ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿπŸÜÿØ ÿßŸÑŸÑÿπÿ® ÿ£ŸàŸÜŸÑÿßŸäŸÜÿå Ÿäÿ™ŸÖ ÿ™ÿÆÿ≤ŸäŸÜ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© (ÿßŸÑÿ∫ÿ±ŸÅÿå ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ÿå ÿßŸÑÿ∑ÿßÿ®Ÿàÿ±) ŸÅŸä Firestore ÿ®ÿ¥ŸÉŸÑ ŸÖÿ§ŸÇÿ™. Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">3. ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑ (Cookies)</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸÑÿß ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿ£Ÿä ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">4. ÿ≠ŸÇŸàŸÇŸÉ</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸÑÿØŸäŸÉ ÿßŸÑÿ≠ŸÇ ŸÅŸä ÿ∑ŸÑÿ® ÿ≠ÿ∞ŸÅ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÖŸÜ Firebase ÿ®ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">5. ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</h3>
                <p class="leading-relaxed" style="color: var(--text-primary);">
                    ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿÆÿµŸàÿµŸäÿ©ÿå ŸäŸÖŸÉŸÜŸÉŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ±: <a href="mailto:eclipsegames1cloud@gmail.com" style="color: var(--accent-color);">eclipsegames1cloud@gmail.com</a>
                </p>
            </div>
        </div>
    </div>

    <!-- TERMS PAGE -->
    <div id="page-terms" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©</h1>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <p class="mb-4 text-sm" style="color: var(--text-secondary);">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: 20 ŸÖÿßÿ±ÿ≥ 2026</p>
                
                <h2 class="text-xl font-bold text-white mb-4">ÿ¥ÿ±Ÿàÿ∑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ XO Arena</h2>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ŸÑŸáÿ∞Ÿá ÿßŸÑŸÑÿπÿ®ÿ©ÿå ŸÅÿ•ŸÜŸÉ ÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">1. ŸÇÿ®ŸàŸÑ ÿßŸÑÿ¥ÿ±Ÿàÿ∑</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ŸÑŸÑÿπÿ®ÿ©ÿå ŸÅÿ•ŸÜŸÉ ÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">2. ÿßŸÑÿ≥ŸÑŸàŸÉ</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸäŸÖŸÜÿπ ÿßŸÑÿ∫ÿ¥ ÿ£Ÿà ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿ∫ŸÑÿßŸÑ ÿßŸÑÿ´ÿ∫ÿ±ÿßÿ™. ÿ£Ÿä ŸÖÿ≠ÿßŸàŸÑÿ© ŸÑŸÑÿ™ŸÑÿßÿπÿ® ÿ®ŸÜÿ∏ÿßŸÖ XP ÿ£Ÿà ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿ™ÿ§ÿØŸä ÿ•ŸÑŸâ ÿ≠ÿ∏ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ®.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">3. ÿßŸÑŸÖŸÑŸÉŸäÿ© ÿßŸÑŸÅŸÉÿ±Ÿäÿ©</h3>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ÿ¨ŸÖŸäÿπ ÿ≠ŸÇŸàŸÇ ÿßŸÑŸÖŸÑŸÉŸäÿ© ÿßŸÑŸÅŸÉÿ±Ÿäÿ© ŸÑŸÑÿπÿ®ÿ© ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑÿµÿßŸÑÿ≠ Eclipse Games.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">4. ÿßŸÑÿ™ŸàÿßÿµŸÑ</h3>
                <p class="leading-relaxed" style="color: var(--text-primary);">
                    ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™: <a href="mailto:eclipsegames1cloud@gmail.com" style="color: var(--accent-color);">eclipsegames1cloud@gmail.com</a>
                </p>
            </div>
        </div>
    </div>

    <!-- CONTACT PAGE -->
    <div id="page-contact" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</h1>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <div class="space-y-4">
                    <a href="mailto:eclipsegames1cloud@gmail.com" class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-102" style="background: rgba(0,0,0,0.3); border: 1px solid var(--border-color);">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: var(--accent-color);">
                            <i data-lucide="mail" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-white">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</div>
                            <div style="color: var(--accent-color);">eclipsegames1cloud@gmail.com</div>
                        </div>
                    </a>

                    <a href="https://www.facebook.com/share/185REmNQT7/" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-102" style="background: rgba(0,0,0,0.3); border: 1px solid var(--border-color);">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: #1877f2;">
                            <i data-lucide="facebook" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-white">ÿµŸÅÿ≠ÿ© ŸÅŸäÿ≥ÿ®ŸàŸÉ</div>
                            <div style="color: #1877f2;">@eclipse.games</div>
                        </div>
                    </a>

                    <a href="https://www.instagram.com/eclipse1_games" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-102" style="background: rgba(0,0,0,0.3); border: 1px solid var(--border-color);">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: #e4405f;">
                            <i data-lucide="instagram" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-white">ÿßŸÜÿ≥ÿ™ÿ¨ÿ±ÿßŸÖ</div>
                            <div style="color: #e4405f;">@eclipse1_games</div>
                        </div>
                    </a>

                    <a href="https://youtube.com/@eclipsegames-u4l" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-102" style="background: rgba(0,0,0,0.3); border: 1px solid var(--border-color);">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: #ff0000;">
                            <i data-lucide="youtube" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-white">ŸäŸàÿ™ŸäŸàÿ®</div>
                            <div style="color: #ff0000;">@eclipsegames-u4l</div>
                        </div>
                    </a>

                    <a href="https://www.tiktok.com/@eclipse.games1" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 rounded-xl transition-all hover:scale-102" style="background: rgba(0,0,0,0.3); border: 1px solid var(--border-color);">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: #000000;">
                            <i data-lucide="music" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-white">ÿ™ŸäŸÉ ÿ™ŸàŸÉ</div>
                            <div style="color: #000000;">@eclipse.games1</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- GUIDE PAGE -->
    <div id="page-guide" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿØŸÑŸäŸÑ ÿßŸÑŸÑÿπÿ®ÿ©</h1>
            </div>

            <div class="glass-card rounded-2xl p-6 mb-6">
                <h2 class="text-xl font-bold text-white mb-4">ŸÉŸäŸÅŸäÿ© ÿßŸÑŸÑÿπÿ®</h2>
                <p class="mb-4 leading-relaxed" style="color: var(--text-primary);">
                    ŸÑÿπÿ®ÿ© XO (ÿ•ŸÉÿ≥ ÿ£Ÿà) ŸáŸä ŸÑÿπÿ®ÿ© ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©. ÿßŸÑŸáÿØŸÅ ŸáŸà Ÿàÿ∂ÿπ ÿ´ŸÑÿßÿ´ ÿπŸÑÿßŸÖÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ© (ÿ£ŸÅŸÇŸäÿßŸãÿå ÿπŸÖŸàÿØŸäÿßŸãÿå ÿ£Ÿà ŸÇÿ∑ÿ±ŸäÿßŸã) ŸÇÿ®ŸÑ ÿÆÿµŸÖŸÉ.
                </p>

                <h3 class="text-lg font-bold text-white mb-3">ŸÇŸàÿßÿπÿØ ÿßŸÑŸÑÿπÿ®ÿ©:</h3>
                <ul class="space-y-2 mb-6">
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: var(--accent-color);">1.</span>
                        Ÿäÿ®ÿØÿ£ ÿßŸÑŸÑÿßÿπÿ® X ÿØÿßÿ¶ŸÖÿßŸã
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: var(--accent-color);">2.</span>
                        Ÿäÿ™ŸÜÿßŸàÿ® ÿßŸÑŸÑÿßÿπÿ®ŸàŸÜ ÿπŸÑŸâ Ÿàÿ∂ÿπ ÿπŸÑÿßŸÖÿßÿ™ŸáŸÖ
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: var(--accent-color);">3.</span>
                        ÿßŸÑŸÅÿßÿ¶ÿ≤ ŸÖŸÜ Ÿäÿ∂ÿπ 3 ÿπŸÑÿßŸÖÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©
                    </li>
                    <li class="flex items-start gap-2" style="color: var(--text-primary);">
                        <span style="color: var(--accent-color);">4.</span>
                        ÿ•ÿ∞ÿß ÿßŸÖÿ™ŸÑÿ£ÿ™ ÿßŸÑŸÑŸàÿ≠ÿ© ÿ®ÿØŸàŸÜ ŸÅÿßÿ¶ÿ≤ÿå ÿ™ŸÉŸàŸÜ ŸÜÿ™Ÿäÿ¨ÿ© ÿ™ÿπÿßÿØŸÑ
                    </li>
                </ul>

                <h3 class="text-lg font-bold text-white mb-3">ÿßŸÑÿ£ÿ∑Ÿàÿßÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©:</h3>
                <div class="space-y-3">
                    <div class="p-3 rounded-lg" style="background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3);">
                        <div class="font-bold" style="color: var(--accent-color);">ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ° ÿ£ŸàŸÜŸÑÿßŸäŸÜ</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ÿ£ŸÜÿ¥ÿ¶ ÿ∫ÿ±ŸÅÿ© Ÿàÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÉŸàÿØ ŸÖÿπ ÿµÿØŸäŸÇŸÉ. ŸäŸÖŸÉŸÜŸÉ ÿ∂ÿ®ÿ∑ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ (ÿπÿØÿØ ÿßŸÑÿ¨ŸàŸÑÿßÿ™) ŸàŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑.</div>
                    </div>
                    <div class="p-3 rounded-lg" style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3);">
                        <div class="font-bold" style="color: #ffd700;">ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ£ŸàŸÜŸÑÿßŸäŸÜ (ÿ™ŸÜÿßŸÅÿ≥ XP)</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ÿßÿÆÿ™ÿ± ŸÖÿ®ŸÑÿ∫ XP ŸÖŸÜ 100 ÿ•ŸÑŸâ 20000. ÿßŸÑŸÅÿßÿ¶ÿ≤ Ÿäÿ£ÿÆÿ∞ XP ÿßŸÑÿÆÿµŸÖÿå ÿßŸÑÿÆÿßÿ≥ÿ± ŸäÿÆÿ≥ÿ± XP ÿßŸÑÿ∞Ÿä ÿ±ÿßŸáŸÜ ÿ®Ÿá.</div>
                    </div>
                    <div class="p-3 rounded-lg" style="background: rgba(255, 51, 102, 0.1); border: 1px solid rgba(255, 51, 102, 0.3);">
                        <div class="font-bold" style="color: #ff3366;">ÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</div>
                        <div class="text-sm" style="color: var(--text-secondary);">ŸÜÿ∏ÿßŸÖ Best Of ÿ≠ÿ≥ÿ® ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ. ÿßŸÑŸÅŸàÿ≤ +3 ŸÜŸÇÿßÿ∑ÿå ÿßŸÑÿÆÿ≥ÿßÿ±ÿ© -3 ŸÜŸÇÿßÿ∑. ŸÖŸÖŸÜŸàÿπ ÿßŸÑÿ™ÿπÿßÿØŸÑ!</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BLOG PAGE -->
    <div id="page-blog" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('home')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿßŸÑŸÖÿØŸàŸÜÿ©</h1>
            </div>

            <div class="space-y-4">
                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-xl font-bold text-white mb-2">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑÿ¨ÿØŸäÿØ ŸÅŸä XO Arena</h2>
                    <p class="text-sm mb-3" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 20 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                    <p class="mb-3" style="color: var(--text-primary);">Ÿäÿ≥ÿπÿØŸÜÿß ÿ•ÿ∑ŸÑÿßŸÇ ÿ£ŸÉÿ®ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÅŸä ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÑÿπÿ®ÿ©: ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ! ÿßŸÑÿ¢ŸÜ ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÑÿπÿ® ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ ÿπŸÜ ÿ®ÿπÿØÿå ŸàÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥Ÿäÿ© XPÿå Ÿàÿ™ÿ≠ÿØŸä ŸÑÿßÿπÿ®ŸäŸÜ ŸÖŸÜ ŸÜŸÅÿ≥ ŸÖÿ≥ÿ™ŸàÿßŸÉ ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ...</p>
                    <button onclick="navigateTo('article1')" class="text-sm hover:underline" style="color: var(--accent-color);">ÿßŸÇÿ±ÿ£ ÿßŸÑŸÖÿ≤ŸäÿØ</button>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-xl font-bold text-white mb-2">ŸÉŸäŸÅ ÿ™ÿ±ÿ®ÿ≠ ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥ XPÿü</h2>
                    <p class="text-sm mb-3" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 18 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                    <p class="mb-3" style="color: var(--text-primary);">ÿßŸÑÿ±ŸáÿßŸÜ ÿ®ŸÄ XP Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ŸÖÿÆÿ™ŸÑŸÅÿ©. ŸÑÿß ÿ™ÿÆÿßÿ∑ÿ± ÿ®ŸÄ XP ÿ£ŸÉÿ´ÿ± ŸÖŸÖÿß ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿ™ÿ≠ŸÖŸÑ ÿÆÿ≥ÿßÿ±ÿ™Ÿá. ÿßÿ®ÿØÿ£ ÿ®ŸÖÿ®ÿßŸÑÿ∫ ÿµÿ∫Ÿäÿ±ÿ© (100-500 XP) ÿ≠ÿ™Ÿâ ÿ™ÿ™ÿπŸÑŸÖ ÿ£ÿ≥ŸÑŸàÿ® ŸÑÿπÿ® ÿÆÿµŸàŸÖŸÉ...</p>
                    <button onclick="navigateTo('article2')" class="text-sm hover:underline" style="color: var(--accent-color);">ÿßŸÇÿ±ÿ£ ÿßŸÑŸÖÿ≤ŸäÿØ</button>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-xl font-bold text-white mb-2">ÿØŸÑŸäŸÑ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ: ŸÖŸÜ 10 ÿ•ŸÑŸâ 1</h2>
                    <p class="text-sm mb-3" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 15 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                    <p class="mb-3" style="color: var(--text-primary);">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ÿµÿ®ÿ≠ ÿ£ŸàŸÜŸÑÿßŸäŸÜ! ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ŸÜÿ∏ÿßŸÖ Best Of: ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 10-6: Best Of 3ÿå ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 5-4: Best Of 5ÿå ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 3-1: Best Of 8. ÿßÿ≠ÿ∞ÿ± ŸÖŸÜ ÿßŸÑÿÆÿ≥ÿßÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ŸÉŸÑŸÅŸÉ -3 ŸÜŸÇÿßÿ∑...</p>
                    <button onclick="navigateTo('article3')" class="text-sm hover:underline" style="color: var(--accent-color);">ÿßŸÇÿ±ÿ£ ÿßŸÑŸÖÿ≤ŸäÿØ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ARTICLE 1 PAGE -->
    <div id="page-article1" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('blog')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑÿ¨ÿØŸäÿØ</h1>
            </div>

            <div class="glass-card rounded-2xl p-6">
                <h2 class="text-2xl font-bold text-white mb-2">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑÿ¨ÿØŸäÿØ ŸÅŸä XO Arena</h2>
                <p class="text-sm mb-4" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 20 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                
                <p class="mb-3" style="color: var(--text-primary);">Ÿäÿ≥ÿπÿØŸÜÿß ÿ•ÿ∑ŸÑÿßŸÇ ÿ£ŸÉÿ®ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÅŸä ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÑÿπÿ®ÿ©: ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ! ÿßŸÑÿ¢ŸÜ ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÑÿπÿ® ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ ÿπŸÜ ÿ®ÿπÿØÿå ŸàÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥Ÿäÿ© XPÿå Ÿàÿ™ÿ≠ÿØŸä ŸÑÿßÿπÿ®ŸäŸÜ ŸÖŸÜ ŸÜŸÅÿ≥ ŸÖÿ≥ÿ™ŸàÿßŸÉ ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">ŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ:</h3>
                
                <h4 class="font-bold text-white mt-3">1. ÿ∫ÿ±ŸÅ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ° (Friends Online)</h4>
                <p class="mb-2" style="color: var(--text-primary);">ÿ£ŸÜÿ¥ÿ¶ ÿ∫ÿ±ŸÅÿ© Ÿàÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÉŸàÿØ ÿßŸÑŸÖŸÉŸàŸÜ ŸÖŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ŸÖÿπ ÿµÿØŸäŸÇŸÉ. ŸäŸÖŸÉŸÜŸÉ ÿ∂ÿ®ÿ∑:</p>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ÿπÿØÿØ ÿßŸÑÿ¨ŸàŸÑÿßÿ™ (1, 3, 5, 7)</li>
                    <li>ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ™ÿπÿßÿØŸÑ ÿ£Ÿà ŸÖŸÜÿπŸá</li>
                    <li>ÿ±ŸÖÿ≤ ÿßŸÑŸÑÿßÿπÿ® 1 (X ÿ£Ÿà O)</li>
                </ul>
                <p class="mb-2" style="color: var(--text-primary);">ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑ Ÿäÿ≠ÿ≥ÿ® ŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® 1 ŸàÿßŸÑŸÑÿßÿπÿ® 2 ŸàÿßŸÑÿ™ÿπÿßÿØŸÑÿßÿ™. ÿßŸÑŸÑÿπÿ® Ÿäÿ™ŸÖ ÿ®ÿØŸàŸÜ ŸàŸÇÿ™ ŸÖÿ≠ÿØÿØ.</p>

                <h4 class="font-bold text-white mt-3">2. ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥ XP</h4>
                <p class="mb-2" style="color: var(--text-primary);">ÿßÿÆÿ™ÿ± XP ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ ÿßŸÑÿ™ŸÜÿßŸÅÿ≥ ÿ®Ÿá ŸÖŸÜ 100 ÿ•ŸÑŸâ 20000. Ÿäÿ™ŸÖ Ÿàÿ∂ÿπŸÉ ŸÅŸä ÿ∑ÿßÿ®Ÿàÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ≠ÿ™Ÿâ Ÿäÿ¨ÿØ ÿßŸÑŸÜÿ∏ÿßŸÖ ŸÑÿßÿπÿ®ÿßŸã ÿ¢ÿÆÿ± ÿ®ŸÜŸÅÿ≥ XP (ÿ£Ÿà ŸÇÿ±Ÿäÿ® ŸÖŸÜŸá).</p>
                <p class="mb-2" style="color: var(--text-primary);">ŸÜÿ∏ÿßŸÖ XP:</p>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ÿ•ÿ∞ÿß ÿÆÿ≥ÿ±ÿ™: ÿ™ÿÆÿ≥ÿ± XP ÿßŸÑÿ∞Ÿä ÿ±ÿßŸáŸÜÿ™ ÿ®Ÿá</li>
                    <li>ÿ•ÿ∞ÿß ŸÅÿ≤ÿ™: ÿ™ŸÉÿ≥ÿ® XP ÿßŸÑÿ∞Ÿä ÿ±ÿßŸáŸÜ ÿ®Ÿá ÿÆÿµŸÖŸÉ</li>
                    <li>ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ XP ŸÖÿÆÿ™ŸÑŸÅÿ©ÿå ŸÉŸÑ ŸÑÿßÿπÿ® ŸäÿÆÿßÿ∑ÿ± ÿ®ŸÄ XP ÿßŸÑÿÆÿßÿµ ÿ®Ÿá ŸÅŸÇÿ∑</li>
                </ul>

                <h4 class="font-bold text-white mt-3">3. ÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</h4>
                <p class="mb-2" style="color: var(--text-primary);">ÿ™ÿ≠ÿØŸâ ŸÑÿßÿπÿ®ŸäŸÜ ŸÖŸÜ ŸÜŸÅÿ≥ ŸÖÿ≥ÿ™ŸàÿßŸÉ ŸÅŸä ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ. ÿßŸÑŸÜÿ∏ÿßŸÖ:</p>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>Best Of ÿ≠ÿ≥ÿ® ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ (3, 5, 8 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™)</li>
                    <li>ŸÑÿß ÿ™ÿπÿßÿØŸÑ ÿ£ÿ®ÿØÿßŸã - ÿ•ÿ∞ÿß ÿßŸÜÿ™Ÿáÿ™ ÿ¨ŸàŸÑÿ© ÿ®ÿ™ÿπÿßÿØŸÑÿå ÿ™ŸèÿπÿßÿØ ÿßŸÑÿ¨ŸàŸÑÿ©</li>
                    <li>ÿßŸÑŸÅŸàÿ≤ +3 ŸÜŸÇÿßÿ∑ÿå ÿßŸÑÿÆÿ≥ÿßÿ±ÿ© -3 ŸÜŸÇÿßÿ∑</li>
                    <li>ÿπŸÜÿØ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÄ 0 ŸÜŸÇÿßÿ∑ÿå ÿ™Ÿáÿ®ÿ∑ ŸÑŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿßŸÑÿ≥ÿßÿ®ŸÇ</li>
                </ul>

                <h4 class="font-bold text-white mt-3">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≠ŸÖÿßŸäÿ© (Anti-Cheat)</h4>
                <p class="mb-3" style="color: var(--text-primary);">ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ŸÜÿ∏ÿßŸÖ ÿ≠ŸÖÿßŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑ:</p>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑŸÑÿπÿ® ŸÅŸä ÿ∫Ÿäÿ± ÿØŸàÿ±ŸÉ</li>
                    <li>ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿ£Ÿà XP ŸÖŸÜ ÿßŸÑŸàÿßÿ¨Ÿáÿ©</li>
                    <li>ÿ•ÿ∞ÿß ÿßŸÜŸÅÿµŸÑ ÿ£ÿ≠ÿØ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜÿå Ÿäÿ∏Ÿáÿ± ŸÑŸÑÿ∑ÿ±ŸÅ ÿßŸÑÿ¢ÿÆÿ± ÿ±ÿ≥ÿßŸÑÿ© ŸàŸäÿ™ŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿßŸÑŸÅŸàÿ≤ ÿ®ÿπÿØ 5 ÿ´ŸàÿßŸÜ</li>
                    <li>ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ© ŸÅŸÇÿ∑ ŸÑŸÑŸÖÿ∂ŸäŸÅ</li>
                </ul>

                <p class="mt-4 p-3 rounded-lg" style="background: rgba(0, 212, 255, 0.1); color: var(--text-primary);">
                    <strong>ÿ¨ÿ±ÿ® ÿßŸÑÿ¢ŸÜ:</strong> ÿßÿØÿÆŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÑÿπÿ®ÿ© ŸàÿßÿÆÿ™ÿ± "ÿßŸÑÿπÿ® ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°" ÿ£Ÿà "ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ£ŸàŸÜŸÑÿßŸäŸÜ" ÿ£Ÿà "ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ" Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÅÿ±ŸäÿØÿ©!
                </p>
            </div>
        </div>
    </div>

    <!-- ARTICLE 2 PAGE - MODIFIED TEXT -->
    <div id="page-article2" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('blog')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ŸÉŸäŸÅ ÿ™ÿ±ÿ®ÿ≠ ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ XP</h1>
            </div>

            <div class="glass-card rounded-2xl p-6">
                <h2 class="text-2xl font-bold text-white mb-2">ŸÉŸäŸÅ ÿ™ÿ±ÿ®ÿ≠ ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ™ŸÜÿßŸÅÿ≥ XPÿü</h2>
                <p class="text-sm mb-4" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 18 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                
                <p class="mb-3" style="color: var(--text-primary);">ÿßŸÑÿ±ŸáÿßŸÜ ÿ®ŸÄ XP Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ŸÖÿÆÿ™ŸÑŸÅÿ© ÿπŸÜ ÿßŸÑŸÑÿπÿ® ÿßŸÑÿπÿßÿØŸä. ÿ•ŸÑŸäŸÉ ŸÜÿµÿßÿ¶ÿ≠ ŸÑÿ≤ŸäÿßÿØÿ© ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ:</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">1. ÿßÿ®ÿØÿ£ ÿ®ŸÖÿ®ÿßŸÑÿ∫ ÿµÿ∫Ÿäÿ±ÿ©</h3>
                <p class="mb-3" style="color: var(--text-primary);">ŸÑÿß ÿ™ÿÆÿßÿ∑ÿ± ÿ®ŸÄ XP ÿ£ŸÉÿ´ÿ± ŸÖŸÖÿß ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿ™ÿ≠ŸÖŸÑ ÿÆÿ≥ÿßÿ±ÿ™Ÿá. ÿßÿ®ÿØÿ£ ÿ®ŸÄ 100-500 XP ÿ≠ÿ™Ÿâ ÿ™ÿ™ÿπŸÑŸÖ ÿ£ÿ≥ŸÑŸàÿ® ŸÑÿπÿ® ÿÆÿµŸàŸÖŸÉ. ŸÖÿπ ÿßŸÑÿÆÿ®ÿ±ÿ©ÿå ŸäŸÖŸÉŸÜŸÉ ÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿ™ÿØÿ±Ÿäÿ¨ŸäÿßŸã.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">2. ÿ±ÿßŸÇÿ® ŸÜŸÖÿ∑ ÿÆÿµŸÖŸÉ</h3>
                <p class="mb-3" style="color: var(--text-primary);">ŸÅŸä ÿßŸÑÿ¨ŸàŸÑÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸâÿå ÿ≠ÿßŸàŸÑ ŸÅŸáŸÖ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿÆÿµŸÖŸÉ Ÿáÿ¨ŸàŸÖŸäÿßŸã ÿ£ŸÖ ÿØŸÅÿßÿπŸäÿßŸã. ÿ®ÿπÿ∂ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ŸÑÿØŸäŸáŸÖ ÿ£ŸÜŸÖÿßÿ∑ ŸÖÿ™ŸÉÿ±ÿ±ÿ© ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ÿ∫ŸÑÿßŸÑŸáÿß.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">3. ÿßÿ≥ÿ™ÿ∫ŸÑ ÿ™ŸÅŸÉŸäÿ±ŸÉ</h3>
                <p class="mb-3" style="color: var(--text-primary);">ÿßŸÑŸÑÿπÿ® ÿßŸÑÿ¢ŸÜ ÿ®ÿØŸàŸÜ ŸÖÿ§ŸÇÿ™ÿå ŸÑÿ∞ÿß ÿÆÿ∞ ŸàŸÇÿ™ŸÉ ŸÑŸÑÿ™ŸÅŸÉŸäÿ±. ŸÑÿß ÿ™ÿ≥ÿ™ÿπÿ¨ŸÑÿå ÿÆÿ∑ÿ∑ ŸÑÿ™ÿ≠ÿ±ŸÉÿßÿ™ŸÉ ÿ¨ŸäÿØÿßŸã.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">4. ÿßÿπÿ±ŸÅ ŸÖÿ™Ÿâ ÿ™ŸÜÿ≥ÿ≠ÿ®</h3>
                <p class="mb-3" style="color: var(--text-primary);">ÿ•ÿ∞ÿß ÿÆÿ≥ÿ±ÿ™ ÿπÿØÿ© ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©ÿå ÿÆÿ∞ ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ©. ÿßŸÑÿπÿßÿ∑ŸÅÿ© ÿ™ÿ§ÿ´ÿ± ÿπŸÑŸâ ÿßŸÑÿ≠ŸÉŸÖ. ÿßŸÑÿπÿ® ŸÖÿ¨ÿØÿØÿßŸã ÿπŸÜÿØŸÖÿß ÿ™ŸÉŸàŸÜ ŸáÿßÿØÿ¶ÿßŸã.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">5. ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©</h3>
                <p class="mb-3" style="color: var(--text-primary);">ÿßÿ®ÿØÿ£ ÿ®ÿßŸÑŸÖÿ±ŸÉÿ≤ ÿØÿßÿ¶ŸÖÿßŸã. ÿ•ÿ∞ÿß ÿ®ÿØÿ£ ÿßŸÑÿÆÿµŸÖ ÿ®ÿßŸÑŸÖÿ±ŸÉÿ≤ÿå ÿÆÿ∞ ÿ≤ÿßŸàŸäÿ©. ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÅÿ±ÿµ ÿßŸÑÿ∂ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≤ÿØŸàÿ¨ÿ©. ŸÑÿß ÿ™ŸáŸÖŸÑ ÿßŸÑÿØŸÅÿßÿπ - ÿ±ÿßŸÇÿ® ÿÆÿ∑Ÿàÿ∑ ŸÅŸàÿ≤ ÿßŸÑÿÆÿµŸÖ.</p>
                
                <p class="mt-4 p-3 rounded-lg" style="background: rgba(255, 215, 0, 0.1); color: var(--text-primary);">
                    <strong>ÿ™ÿ∞ŸÉÿ±:</strong> ÿßŸÑŸáÿØŸÅ ŸáŸà ÿßŸÑÿ±ÿ®ÿ≠ ÿπŸÑŸâ ÿßŸÑŸÖÿØŸâ ÿßŸÑÿ∑ŸàŸäŸÑ. ÿ≠ÿ™Ÿâ ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅŸàŸÜ ŸäÿÆÿ≥ÿ±ŸàŸÜ ÿ£ÿ≠ŸäÿßŸÜÿßŸã. ÿßŸÑŸÖŸáŸÖ ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÖÿπÿØŸÑ ŸÅŸàÿ≤ŸÉ ÿ£ÿπŸÑŸâ ŸÖŸÜ 50%.
                </p>
            </div>
        </div>
    </div>

    <!-- ARTICLE 3 PAGE -->
    <div id="page-article3" class="page flex-col items-center px-4 py-8">
        <div class="w-full max-w-lg relative z-10">
            <div class="flex items-center gap-4 mb-6">
                <button onclick="navigateTo('blog')" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-right" class="w-6 h-6" style="color: var(--text-secondary);"></i>
                </button>
                <h1 class="text-2xl font-display font-bold" style="color: var(--accent-color);">ÿØŸÑŸäŸÑ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</h1>
            </div>

            <div class="glass-card rounded-2xl p-6">
                <h2 class="text-2xl font-bold text-white mb-2">ÿØŸÑŸäŸÑ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ: ŸÖŸÜ 10 ÿ•ŸÑŸâ 1</h2>
                <p class="text-sm mb-4" style="color: var(--text-secondary);">ŸÜÿ¥ÿ± ŸÅŸä 15 ŸÖÿßÿ±ÿ≥ 2026 | ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Eclipse Games</p>
                
                <p class="mb-3" style="color: var(--text-primary);">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ÿµÿ®ÿ≠ ÿ£ŸàŸÜŸÑÿßŸäŸÜ! ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ ŸàŸÉŸäŸÅ ÿ™ÿµŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÇŸÖÿ©.</p>
                
                <h3 class="text-lg font-bold text-white mb-2 mt-4">ŸÜÿ∏ÿßŸÖ Best Of ÿ≠ÿ≥ÿ® ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ</h3>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 10, 9, 8, 7, 6: Best Of 3 (ÿ£ŸàŸÑ ŸÖŸÜ ŸäŸÅŸàÿ≤ 3 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™)</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 5, 4: Best Of 5 (ÿ£ŸàŸÑ ŸÖŸÜ ŸäŸÅŸàÿ≤ 5 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™)</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 3, 2, 1: Best Of 8 (ÿ£ŸàŸÑ ŸÖŸÜ ŸäŸÅŸàÿ≤ 8 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™)</li>
                </ul>

                <h3 class="text-lg font-bold text-white mb-2 mt-4">ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑</h3>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ÿßŸÑŸÅŸàÿ≤: +3 ŸÜŸÇÿßÿ∑</li>
                    <li>ÿßŸÑÿÆÿ≥ÿßÿ±ÿ©: -3 ŸÜŸÇÿßÿ∑</li>
                    <li>ŸÖŸÖŸÜŸàÿπ ÿßŸÑÿ™ÿπÿßÿØŸÑ ŸÜŸáÿßÿ¶ŸäÿßŸã - ÿ•ÿ∞ÿß ÿßŸÜÿ™Ÿáÿ™ ÿ¨ŸàŸÑÿ© ÿ®ÿ™ÿπÿßÿØŸÑÿå ÿ™ŸèÿπÿßÿØ ÿßŸÑÿ¨ŸàŸÑÿ© ŸÅŸàÿ±ÿßŸã</li>
                    <li>ÿ•ÿ∞ÿß ŸàÿµŸÑÿ™ ÿ•ŸÑŸâ 0 ŸÜŸÇÿßÿ∑ÿå ÿ™Ÿáÿ®ÿ∑ ŸÑŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿßŸÑÿ≥ÿßÿ®ŸÇ</li>
                </ul>

                <h3 class="text-lg font-bold text-white mb-2 mt-4">ŸÖŸÉÿßŸÅÿ¢ÿ™ ÿßŸÑÿ™ÿ±ŸÇŸäÿ©</h3>
                <ul class="list-disc mr-6 mb-3" style="color: var(--text-primary);">
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 10: 2500 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 9: 2500 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 8: 2500 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 7: 2500 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 6: 2500 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 5: 3000 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 4: 4000 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 3: 20000 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 2: 50000 XP</li>
                    <li>ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 1: 100000 XP + Rainbow Skin + Legendary Frame</li>
                </ul>

                <h3 class="text-lg font-bold text-white mb-2 mt-4">ŸÜÿµÿßÿ¶ÿ≠ ŸÑŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜ</h3>
                <p class="mb-3" style="color: var(--text-primary);">ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜÿå ŸÉŸÑ ŸÜŸÇÿ∑ÿ© ŸÖŸáŸÖÿ©. ŸÑÿß ÿ™ÿÆÿßÿ∑ÿ± ÿ®ÿÆÿ≥ÿßÿ±ÿ© 3 ŸÜŸÇÿßÿ∑ ÿ®ÿ≥ŸáŸàŸÑÿ©. ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ŸÖÿ™ŸÇÿØŸÖÿßŸã ŸÅŸä Best Ofÿå ŸÑÿß ÿ™ÿÆŸÅ ŸÖŸÜ ÿßŸÑŸÑÿπÿ® ÿØŸÅÿßÿπŸäÿßŸã. Ÿàÿ•ÿ∞ÿß ŸÉŸÜÿ™ ŸÖÿ™ÿ£ÿÆÿ±ÿßŸãÿå ÿÆÿßÿ∑ÿ± ÿ£ŸÉÿ´ÿ±.</p>
                
                <p class="mt-4 p-3 rounded-lg" style="background: rgba(255, 51, 102, 0.1); color: var(--text-primary);">
                    <strong>ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 1:</strong> 100,000 XP + ÿ≥ŸÉŸÜ Rainbow Master + ÿ•ÿ∑ÿßÿ± Division 1 ÿßŸÑÿ£ÿ≥ÿ∑Ÿàÿ±Ÿä ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿÆÿßÿµÿ©!
                </p>
            </div>
        </div>
    </div>

    <!-- ========== MODALS ========== -->

    <!-- Guide Modal -->
    <div id="guide-modal-overlay" class="modal-overlay" onclick="closeGuide()"></div>
    <div id="guide-modal" class="modal-content glass-card rounded-2xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-display font-bold" style="color: var(--accent-color);">ŸÜÿµŸäÿ≠ÿ© ÿßŸÑŸäŸàŸÖ</h2>
            <button onclick="closeGuide()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-5 h-5" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        <p id="tip-of-day" class="mb-4 leading-relaxed" style="color: var(--text-primary);"></p>
        <button onclick="closeGuide()" class="neon-btn w-full py-3 rounded-xl font-bold" style="color: var(--text-primary);">ÿ≠ÿ≥ŸÜÿßŸã</button>
    </div>

    <!-- VAR Modal -->
    <div id="var-modal-overlay" class="modal-overlay" onclick="closeVAR()"></div>
    <div id="var-modal" class="modal-content var-modal glass-card">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-display font-bold" style="color: var(--accent-color);">VAR - ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©</h2>
            <button onclick="closeVAR()" class="p-2 rounded-lg hover:bg-white/10 transition-colors">
                <i data-lucide="x" class="w-6 h-6" style="color: var(--text-secondary);"></i>
            </button>
        </div>
        
        <div id="var-board" class="var-board"></div>
        
        <div class="var-controls">
            <button onclick="varPause()" id="var-pause-btn" class="var-btn">
                <i data-lucide="pause"></i>
            </button>
            <button onclick="varPrev()" class="var-btn">
                <i data-lucide="skip-back"></i>
            </button>
            <button onclick="varNext()" class="var-btn">
                <i data-lucide="skip-forward"></i>
            </button>
            <button onclick="varRestart()" class="var-btn">
                <i data-lucide="rotate-ccw"></i>
            </button>
        </div>
        
        <div id="var-timeline" class="var-timeline"></div>
        
        <div class="text-center mt-4" style="color: var(--text-secondary);">
            <span id="var-move-counter">ÿßŸÑÿ≠ÿ±ŸÉÿ© 0 / 0</span>
        </div>
    </div>

    <!-- Division Complete Modal -->
    <div id="division-complete-overlay" class="modal-overlay" onclick="closeDivisionComplete()"></div>
    <div id="division-complete-modal" class="modal-content glass-card rounded-2xl p-8 w-full max-w-md division-complete-modal">
        <div class="division-reward-icon">
            <i data-lucide="crown"></i>
        </div>
        <h2 id="divisionCompleteTitle" class="text-3xl font-display font-bold mb-4 animate-rainbow" style="color: #ffd700;">ÿ™ŸáÿßŸÜŸäŸÜÿß!</h2>
        <p id="divisionCompleteMessage" class="text-xl mb-6" style="color: var(--text-primary);"></p>
        <div id="divisionRewards" class="mb-6 p-4 rounded-lg" style="background: rgba(255,215,0,0.1); border: 1px solid #ffd700;">
            <p class="font-bold mb-2" style="color: #ffd700;">ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™:</p>
            <p id="divisionRewardText" style="color: var(--text-primary);"></p>
        </div>
        <button onclick="closeDivisionComplete()" class="neon-btn w-full py-3 rounded-xl font-bold">ÿ±ÿßÿ¶ÿπ!</button>
    </div>

    <!-- ========== SCRIPTS ========== -->
    <script>
        // ==================== DATA ====================

        const SONG_URLS = [
            'https://files.catbox.moe/ltx4q6.mp3',  // Without Me
            'https://files.catbox.moe/2v21ol.mp3',  // Believer
            'https://files.catbox.moe/fx0yrj.mp3',  // B3teny leh
            'https://files.catbox.moe/2a0vpe.mp3',  // Superman
            'https://files.catbox.moe/6j6o4q.mp3',  // Billie Jean
            'https://files.catbox.moe/a2oux7.mp3',  // Sing For The Moment
            'https://files.catbox.moe/pqii3k.mp3',  // Cleanin Out My Closet
            'https://files.catbox.moe/baotd9.mp3',  // Big Mafia
            'https://files.catbox.moe/nfedgb.mp3',  // Karma
            'https://files.catbox.moe/w1dp4t.mp3',   // Mockingbird
            'https://files.catbox.moe/475aix.mp3',   // The Real Slim Shady
            'https://files.catbox.moe/hmelxy.mp3',   // Lovely
            'https://files.catbox.moe/l87rxs.m4a',   // MOONLIGHT
            'https://files.catbox.moe/xyysxv.mp3',   // Dorak Gai
            'https://files.catbox.moe/svwkl4.mp3',    // Birds of a Feather
            'https://files.catbox.moe/46t2ms.mp3',    // 3alam kadaba
            'https://files.catbox.moe/vndq8l.mp3',    // The Fate of Ophelia
            'https://files.catbox.moe/zx2276.mp3',    // Gabolna Hkoma
            'https://files.catbox.moe/yc9mt7.mp3',    // Stan
            'https://files.catbox.moe/0rtibn.mp3'     // Godzilla
        ];

        const SONG_NAMES = [
            'Without Me - Eminem',
            'Believer - Imagine Dragons',
            'B3teny leh - Ziad Zaza',
            'Superman - Eminem',
            'Billie Jean - Michael Jackson',
            'Sing For The Moment - Eminem',
            'Cleanin Out My Closet - Eminem',
            'Big Mafia - Marwan Moussa',
            'Karma - Marwan Pablo',
            'Mockingbird - Eminem',
            'The Real Slim Shady - Eminem',
            'Lovely - Billie Eilish',
            'MOONLIGHT - XXXTentacion',
            'Dorak Gai - Wegz',
            'Birds of a Feather - Billie Eilish',
            '3alam kadaba - Lege Cy',
            'The Fate of Ophelia - Taylor Swift',
            'Gabolna Hkoma - Ziad Zaza',
            'Stan - Eminem',
            'Godzilla - Eminem'
        ];

        // ÿ£ŸÉŸàÿßÿØ ŸÅŸÉ ÿßŸÑÿ≠ÿ∏ÿ±
        const UNBAN_CODES = ['51375', '07813', '04575', '51376', '31676', '07844', '11236', '96123', '18596', '33166'];

        // ÿ™ÿπÿØŸäŸÑ ÿ¨Ÿàÿßÿ¶ÿ≤ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ
        const DIVISIONS = [
            { level: 10, difficulty: 'beginner', required: 6, reward: 2500, name: 'Division 10' },
            { level: 9, difficulty: 'beginner', required: 9, reward: 2500, name: 'Division 9' },
            { level: 8, difficulty: 'beginner', required: 9, reward: 2500, name: 'Division 8' },
            { level: 7, difficulty: 'medium', required: 10, reward: 2500, name: 'Division 7' },
            { level: 6, difficulty: 'medium', required: 10, reward: 2500, name: 'Division 6' },
            { level: 5, difficulty: 'hard', required: 15, reward: 3000, name: 'Division 5' },
            { level: 4, difficulty: 'hard', required: 21, reward: 4000, name: 'Division 4' },
            { level: 3, difficulty: 'genius', required: 21, reward: 20000, name: 'Division 3' },
            { level: 2, difficulty: 'genius', required: 21, reward: 50000, name: 'Division 2' },
            { level: 1, difficulty: 'genius', required: 30, reward: 100000, name: 'Division 1' },
        ];

        const SKINS = [
            { id: 'default', name: 'Classic Cyan', price: 0, rarity: 'common', class: 'skin-default' },
            { id: 'red', name: 'Crimson Fury', price: 10000, rarity: 'rare', class: 'skin-red' },
            { id: 'gold', name: 'Golden Legend', price: 20000, rarity: 'epic', class: 'skin-gold' },
            { id: 'purple', name: 'Cyber Void', price: 15000, rarity: 'rare', class: 'skin-purple' },
            { id: 'green', name: 'Toxic Waste', price: 12000, rarity: 'rare', class: 'skin-green' },
            { id: 'rainbow', name: 'Rainbow Master', price: 0, rarity: 'legendary', class: 'skin-rainbow', secret: true },
            { id: 'blue-crystal', name: 'Blue Crystal', price: 8000, rarity: 'common', class: 'skin-blue-crystal' },
            { id: 'emerald', name: 'Emerald', price: 9000, rarity: 'common', class: 'skin-emerald' },
            { id: 'ruby', name: 'Ruby', price: 9500, rarity: 'common', class: 'skin-ruby' },
            { id: 'sapphire', name: 'Sapphire', price: 8500, rarity: 'common', class: 'skin-sapphire' },
            { id: 'amethyst', name: 'Amethyst', price: 8800, rarity: 'common', class: 'skin-amethyst' },
            { id: 'topaz', name: 'Topaz', price: 9200, rarity: 'common', class: 'skin-topaz' },
            { id: 'fire', name: 'Fire Element', price: 25000, rarity: 'epic', class: 'skin-fire' },
            { id: 'ice', name: 'Ice Element', price: 25000, rarity: 'epic', class: 'skin-ice' },
            { id: 'electric', name: 'Electric', price: 27000, rarity: 'epic', class: 'skin-electric' },
            { id: 'shadow', name: 'Shadow', price: 28000, rarity: 'epic', class: 'skin-shadow' },
            { id: 'light', name: 'Light', price: 29000, rarity: 'epic', class: 'skin-light' },
            { id: 'nature', name: 'Nature', price: 26000, rarity: 'epic', class: 'skin-nature' },
            { id: 'ocean', name: 'Ocean', price: 27000, rarity: 'epic', class: 'skin-ocean' },
            { id: 'lava', name: 'Lava', price: 28000, rarity: 'epic', class: 'skin-lava' },
            { id: 'space', name: 'Space Galaxy', price: 80000, rarity: 'legendary', class: 'skin-space' },
            { id: 'nebula', name: 'Cosmic Nebula', price: 95000, rarity: 'legendary', class: 'skin-nebula' },
            { id: 'galaxy', name: 'Galaxy', price: 85000, rarity: 'legendary', class: 'skin-galaxy' },
            { id: 'cosmic', name: 'Cosmic', price: 90000, rarity: 'legendary', class: 'skin-cosmic' },
            { id: 'quantum', name: 'Quantum', price: 110000, rarity: 'legendary', class: 'skin-quantum' },
            { id: 'void', name: 'Void', price: 120000, rarity: 'legendary', class: 'skin-void' },
            { id: 'infinity', name: 'Infinity', price: 135000, rarity: 'legendary', class: 'skin-infinity' },
            { id: 'eternity', name: 'Eternity', price: 150000, rarity: 'legendary', class: 'skin-eternity' },
        ];

        const FRAMES = [
            { id: 'frame-default', name: 'Default Frame', price: 0, rarity: 'common', class: '', previewClass: '' },
            { id: 'frame-common-1', name: 'Silver Edge', price: 5000, rarity: 'common', class: '', previewClass: 'silver-edge' },
            { id: 'frame-common-2', name: 'Bronze Edge', price: 5500, rarity: 'common', class: '', previewClass: 'bronze-edge' },
            { id: 'frame-common-3', name: 'Steel Edge', price: 6000, rarity: 'common', class: '', previewClass: 'steel-edge' },
            { id: 'frame-common-4', name: 'Iron Edge', price: 6500, rarity: 'common', class: '', previewClass: 'iron-edge' },
            { id: 'frame-rare-1', name: 'Golden Edge', price: 15000, rarity: 'rare', class: 'frame-rare', previewClass: 'golden-edge' },
            { id: 'frame-rare-2', name: 'Ruby Edge', price: 18000, rarity: 'rare', class: 'frame-rare', previewClass: 'ruby-edge' },
            { id: 'frame-rare-3', name: 'Sapphire Edge', price: 20000, rarity: 'rare', class: 'frame-rare', previewClass: 'sapphire-edge' },
            { id: 'frame-rare-4', name: 'Emerald Edge', price: 22000, rarity: 'rare', class: 'frame-rare', previewClass: 'emerald-edge' },
            { id: 'frame-rare-5', name: 'Amethyst Edge', price: 24000, rarity: 'rare', class: 'frame-rare', previewClass: 'amethyst-edge' },
            { id: 'frame-epic-1', name: 'Fire Frame', price: 35000, rarity: 'epic', class: 'frame-fire', previewClass: 'fire-frame' },
            { id: 'frame-epic-2', name: 'Ice Frame', price: 35000, rarity: 'epic', class: 'frame-ice', previewClass: 'ice-frame' },
            { id: 'frame-epic-3', name: 'Electric Frame', price: 38000, rarity: 'epic', class: 'frame-electric', previewClass: 'electric-frame' },
            { id: 'frame-epic-4', name: 'Nature Frame', price: 40000, rarity: 'epic', class: 'frame-epic', previewClass: 'nature-frame' },
            { id: 'frame-epic-5', name: 'Ocean Frame', price: 42000, rarity: 'epic', class: 'frame-epic', previewClass: 'ocean-frame' },
            { id: 'frame-epic-6', name: 'Lava Frame', price: 45000, rarity: 'epic', class: 'frame-fire', previewClass: 'lava-frame' },
            { id: 'frame-legendary-1', name: 'Legendary Gold', price: 80000, rarity: 'legendary', class: 'frame-legendary', previewClass: 'legendary-gold' },
            { id: 'frame-legendary-2', name: 'Space Frame', price: 95000, rarity: 'legendary', class: 'frame-space', previewClass: 'space-frame' },
            { id: 'frame-legendary-3', name: 'Divine Frame', price: 110000, rarity: 'legendary', class: 'frame-legendary', previewClass: 'divine-frame' },
            { id: 'frame-legendary-4', name: 'Infinite Frame', price: 135000, rarity: 'legendary', class: 'frame-legendary', previewClass: 'infinite-frame' },
            { id: 'frame-legendary-5', name: 'Cosmic Frame', price: 150000, rarity: 'legendary', class: 'frame-space', previewClass: 'cosmic-frame' },
            { id: 'frame-division1', name: 'Division 1 Champion', price: 0, rarity: 'legendary', class: 'frame-division1', previewClass: 'division1-champion', secret: true },
        ];

        const THEMES = [
            { id: 'default', name: 'Neon Cyan', color: '#00d4ff', class: '' },
            { id: 'red', name: 'Red Inferno', color: '#ff4444', class: 'theme-red' },
            { id: 'purple', name: 'Purple Cyber', color: '#a855f7', class: 'theme-purple' },
            { id: 'green', name: 'Green Toxic', color: '#00ff88', class: 'theme-green' },
            { id: 'gold', name: 'Golden Royal', color: '#ffd700', class: 'theme-gold' },
        ];

        const LEVELS = [
            { id: 'beginner', name: 'ŸÖÿ®ÿ™ÿØÿ¶', desc: 'ŸÑŸÑŸÖÿ®ÿ™ÿØÿ¶ŸäŸÜ - ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± Ÿäÿ™ÿÆÿ∞ ŸÇÿ±ÿßÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ©', color: '#00ff88', icon: 'feather' },
            { id: 'medium', name: 'ŸÖÿ™Ÿàÿ≥ÿ∑', desc: 'ÿ™ÿ≠ÿØŸä ŸÖÿ™Ÿàÿßÿ≤ŸÜ - ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸäÿØÿßŸÅÿπ ŸàŸäŸáÿßÿ¨ŸÖ', color: '#ffd700', icon: 'shield' },
            { id: 'hard', name: 'ÿµÿπÿ®', desc: 'ŸÅŸÉÿ± ÿ¨ŸäÿØÿßŸã - ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ÿ∞ŸÉŸä ÿ¨ÿØÿßŸã', color: '#ff6b35', icon: 'brain' },
            { id: 'genius', name: 'ÿπÿ®ŸÇÿ±Ÿä', desc: 'ŸÖÿ≥ÿ™ÿ≠ŸäŸÑÿü - ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÑÿß ŸäŸèŸáÿ≤ŸÖ ÿ™ŸÇÿ±Ÿäÿ®ÿßŸã', color: '#ff3366', icon: 'skull' },
            { id: 'adaptive', name: 'ÿ™ŸÉŸäŸÅŸä', desc: 'Ÿäÿ™ŸÉŸäŸÅ ŸÖÿπ ŸÖÿ≥ÿ™ŸàÿßŸÉ ŸàŸäÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ™ÿ≠ÿ±ŸÉÿßÿ™ŸÉ', color: '#a855f7', icon: 'cpu' },
        ];

        const ACHIEVEMENTS = [
            { id: 'first-win', title: 'ÿ£ŸàŸÑ ŸÅŸàÿ≤', desc: 'ÿßÿ±ÿ®ÿ≠ ÿ£ŸàŸÑ ŸÖÿ®ÿßÿ±ÿßÿ©', xp: 50, icon: 'trophy', check: s => s.stats.wins >= 1 },
            { id: 'win-10', title: 'ŸÖÿ≠ÿßÿ±ÿ®', desc: 'ÿßÿ±ÿ®ÿ≠ 10 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™', xp: 200, icon: 'sword', check: s => s.stats.wins >= 10 },
            { id: 'win-50', title: 'ÿ®ÿ∑ŸÑ', desc: 'ÿßÿ±ÿ®ÿ≠ 50 ŸÖÿ®ÿßÿ±ÿßÿ©', xp: 500, icon: 'crown', check: s => s.stats.wins >= 50 },
            { id: 'streak-3', title: 'ÿ≥ŸÑÿ≥ŸÑÿ© ÿ∞Ÿáÿ®Ÿäÿ©', desc: 'ÿßÿ±ÿ®ÿ≠ 3 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©', xp: 100, icon: 'flame', check: s => s.stats.bestStreak >= 3 },
            { id: 'streak-5', title: 'ŸÑÿß ŸäŸèŸÇŸáÿ±', desc: 'ÿßÿ±ÿ®ÿ≠ 5 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©', xp: 250, icon: 'zap', check: s => s.stats.bestStreak >= 5 },
            { id: 'genius-beaten', title: 'ŸÇÿßŸáÿ± ÿßŸÑÿπÿ®ÿßŸÇÿ±ÿ©', desc: 'ÿßŸáÿ≤ŸÖ ŸÖÿ≥ÿ™ŸàŸâ ÿπÿ®ŸÇÿ±Ÿä', xp: 500, icon: 'star', check: s => s.beatenGenius },
            { id: 'adaptive-master', title: 'ÿ≥ŸäÿØ ÿßŸÑÿ™ŸÉŸäŸÅ', desc: 'ÿßŸáÿ≤ŸÖ ŸÖÿ≥ÿ™ŸàŸâ ÿ™ŸÉŸäŸÅŸä', xp: 300, icon: 'cpu', check: s => s.beatenAdaptive },
            { id: 'matches-20', title: 'ŸÖÿÆÿ∂ÿ±ŸÖ', desc: 'ÿßŸÑÿπÿ® 20 ŸÖÿ®ÿßÿ±ÿßÿ©', xp: 100, icon: 'gamepad-2', check: s => s.stats.totalMatches >= 20 },
            { id: 'matches-100', title: 'ÿ£ÿ≥ÿ∑Ÿàÿ±ÿ©', desc: 'ÿßŸÑÿπÿ® 100 ŸÖÿ®ÿßÿ±ÿßÿ©', xp: 1000, icon: 'award', check: s => s.stats.totalMatches >= 100 },
            { id: 'division-10', title: 'ŸÖÿ™ÿ≠ÿØŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ', desc: 'ÿ£ŸÉŸÖŸÑ ÿ£ŸàŸÑ ÿØŸäŸÅŸäÿ¨ŸÜ', xp: 200, icon: 'git-branch', check: s => s.completedDivisions >= 1 },
            { id: 'division-5', title: 'ŸÖÿ≠ÿßÿ±ÿ® ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ', desc: 'ÿ£ŸÉŸÖŸÑ 5 ÿØŸäŸÅŸäÿ¨ŸÜÿ≤', xp: 500, icon: 'git-branch', check: s => s.completedDivisions >= 5 },
            { id: 'division-1', title: 'ÿ£ÿ≥ÿ∑Ÿàÿ±ÿ© ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ', desc: 'ÿ£ŸÉŸÖŸÑ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 1', xp: 2000, icon: 'crown', check: s => s.completedDivision1 },
            { id: 'online-win', title: 'ŸÅŸàÿ≤ ÿ£ŸàŸÜŸÑÿßŸäŸÜ', desc: 'ÿßÿ±ÿ®ÿ≠ ÿ£ŸàŸÑ ŸÖÿ®ÿßÿ±ÿßÿ© ÿ£ŸàŸÜŸÑÿßŸäŸÜ', xp: 100, icon: 'globe', check: s => s.onlineWins >= 1 },
            { id: 'online-10', title: 'ŸÖÿ™ÿ≠ÿØŸä ÿßŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ', desc: 'ÿßÿ±ÿ®ÿ≠ 10 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ£ŸàŸÜŸÑÿßŸäŸÜ', xp: 500, icon: 'globe', check: s => s.onlineWins >= 10 },
        ];

        const CHALLENGES = [
            { id: 'speed-demon', title: 'ÿ¥Ÿäÿ∑ÿßŸÜ ÿßŸÑÿ≥ÿ±ÿπÿ©', desc: 'ÿßŸáÿ≤ŸÖ ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÅŸä ÿ£ŸÇŸÑ ŸÖŸÜ 10 ÿ´ŸàÿßŸÜŸä', reward: 100, icon: 'zap' },
            { id: 'perfect-game', title: 'ŸÖÿ®ÿßÿ±ÿßÿ© ŸÖÿ´ÿßŸÑŸäÿ©', desc: 'ÿßÿ±ÿ®ÿ≠ ÿ®ÿØŸàŸÜ ÿ£ŸÜ Ÿäÿ£ÿÆÿ∞ ÿÆÿµŸÖŸÉ ÿ£Ÿä ÿÆÿßŸÜÿ© ŸÅŸä ÿµŸÅ', reward: 150, icon: 'target' },
            { id: 'comeback-king', title: 'ŸÖŸÑŸÉ ÿßŸÑÿπŸàÿØÿ©', desc: 'ÿßÿ±ÿ®ÿ≠ ÿ®ÿπÿØ ÿ£ŸÜ ŸÉÿßŸÜ ÿÆÿµŸÖŸÉ ÿπŸÑŸâ Ÿàÿ¥ŸÉ ÿßŸÑŸÅŸàÿ≤', reward: 200, icon: 'rotate-ccw' },
            { id: 'division-streak', title: 'ÿ≥ŸÑÿ≥ŸÑÿ© ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ', desc: 'ÿßÿ±ÿ®ÿ≠ 5 ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ© ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ', reward: 300, icon: 'flame' },
            { id: 'no-loss-division', title: 'ŸÑÿß ŸäŸÇŸáÿ±', desc: 'ÿ£ŸÉŸÖŸÑ ÿØŸäŸÅŸäÿ¨ŸÜ ÿ®ÿØŸàŸÜ ÿÆÿ≥ÿßÿ±ÿ©', reward: 500, icon: 'shield' },
        ];

        const RANKS = [
            { minXP: 0, name: 'Rookie', color: '#8892b0' },
            { minXP: 200, name: 'Fighter', color: '#00ff88' },
            { minXP: 600, name: 'Master', color: '#00d4ff' },
            { minXP: 1500, name: 'Elite', color: '#a855f7' },
            { minXP: 3000, name: 'Legend', color: '#ffd700' },
            { minXP: 6000, name: 'XO GOD', color: '#ff3366' },
            { minXP: 15000, name: 'Division Master', color: '#ffaa00' },
            { minXP: 50000, name: 'XO Immortal', color: '#ff5500' },
        ];

        const TIPS = [
            'ÿ≠ÿßŸàŸÑ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ≤ (ÿßŸÑÿÆÿßŸÜÿ© ÿßŸÑŸàÿ≥ÿ∑Ÿâ) ŸÅŸä ÿ®ÿØÿßŸäÿ© ÿßŸÑŸÑÿπÿ®ÿ© - ÿ•ŸÜŸáÿß ÿ£ÿπÿ∏ŸÖ ÿÆÿßŸÜÿ© ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨ŸäÿßŸã!',
            'ÿ•ÿ∞ÿß ÿ®ÿØÿ£ÿ™ ÿ´ÿßŸÜŸäÿßŸãÿå ÿ≠ÿßŸàŸÑ ÿ£ÿÆÿ∞ ÿ≤ÿßŸàŸäÿ© ŸÑŸÖŸÜÿπ ÿÆÿµŸÖŸÉ ŸÖŸÜ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ©.',
            'ÿßÿ®ÿ≠ÿ´ ÿØÿßÿ¶ŸÖÿßŸã ÿπŸÜ ŸÅÿ±ÿµ "ÿßŸÑÿ∂ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≤ÿØŸàÿ¨ÿ©" - ÿÆÿ∑ÿßŸÜ ŸÅŸàÿ≤ ŸÖÿ≠ÿ™ŸÖŸÑÿßŸÜ ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑŸàŸÇÿ™.',
            'ŸÑÿß ÿ™Ÿáÿßÿ¨ŸÖ ŸÅŸÇÿ∑ - ÿ±ÿßŸÇÿ® ÿÆÿ∑Ÿàÿ∑ ÿßŸÑŸÅŸàÿ≤ ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ© ŸÑÿÆÿµŸÖŸÉ ŸàÿßÿµÿØŸáÿß.',
            'ÿßŸÑÿ≤ŸàÿßŸäÿß ÿßŸÑÿ£ÿ±ÿ®ÿπ ŸÖŸáŸÖÿ© ÿ¨ÿØÿßŸã - ÿ≠ÿßŸàŸÑ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ÿπŸÑŸâ ÿ£ŸÉÿ®ÿ± ÿπÿØÿØ ŸÖŸÜŸáÿß.',
            'ŸÅŸä ŸÖÿ≥ÿ™ŸàŸâ ÿπÿ®ŸÇÿ±Ÿäÿå ÿßŸÑÿ™ÿπÿßÿØŸÑ Ÿäÿπÿ™ÿ®ÿ± ÿ•ŸÜÿ¨ÿßÿ≤ÿßŸã! ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿπÿØŸÖ ÿßŸÑÿÆÿ≥ÿßÿ±ÿ© ÿ£ŸàŸÑÿßŸã.',
            'ÿßŸÑÿ∑Ÿàÿ± ÿßŸÑÿ™ŸÉŸäŸÅŸä Ÿäÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ™ÿ≠ÿ±ŸÉÿßÿ™ŸÉ - ÿ∫Ÿäÿ± ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ™ŸÉ ÿ®ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.',
            'ŸÅŸä ÿ∫ÿ±ŸÅ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ° ÿ£ŸàŸÜŸÑÿßŸäŸÜÿå ŸäŸÖŸÉŸÜŸÉ ÿ∂ÿ®ÿ∑ ÿπÿØÿØ ÿßŸÑÿ¨ŸàŸÑÿßÿ™.',
            'ŸÅŸä ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ XPÿå ŸÑÿß ÿ™ÿÆÿßÿ∑ÿ± ÿ®ŸÄ XP ÿ£ŸÉÿ´ÿ± ŸÖŸÖÿß ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿ™ÿ≠ŸÖŸÑ ÿÆÿ≥ÿßÿ±ÿ™Ÿá.',
            'ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿ£ŸàŸÜŸÑÿßŸäŸÜÿå ŸÖŸÖŸÜŸàÿπ ÿßŸÑÿ™ÿπÿßÿØŸÑ - ÿ•ÿ∞ÿß ÿ™ÿπÿßÿØŸÑÿ™ÿå ÿ™ŸèÿπÿßÿØ ÿßŸÑÿ¨ŸàŸÑÿ©.',
            'ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ 1 ŸäŸÖŸÜÿ≠ŸÉ 100,000 XP + ÿ≥ŸÉŸÜ Rainbow Master + ÿ•ÿ∑ÿßÿ± ÿ£ÿ≥ÿ∑Ÿàÿ±Ÿä!',
            'ÿ•ÿ∞ÿß ÿßŸÜŸÅÿµŸÑ ÿÆÿµŸÖŸÉÿå ÿßŸÜÿ™ÿ∏ÿ± 5 ÿ´ŸàÿßŸÜ Ÿàÿ™ÿ±ÿ®ÿ≠ ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã.',
        ];

        // ==================== STATE ====================

        let state = {
            // User Profile
            uid: null,
            profileName: 'Player',
            profileImage: null,
            xp: 0,
            level: 1,
            unlockedSkins: ['default'],
            unlockedFrames: ['frame-default'],
            currentSkin: 'default',
            currentFrame: 'frame-default',
            currentTheme: 'default',
            playAs: 'X',
            stats: { totalMatches: 0, wins: 0, losses: 0, draws: 0, winStreak: 0, bestStreak: 0 },
            onlineWins: 0,
            onlineLosses: 0,
            achievements: [],
            beatenGenius: false,
            beatenAdaptive: false,
            dailyStreak: 0,
            lastClaimDate: null,
            soundEnabled: true,
            cookiesAccepted: false,
            
            // Banned system
            isBanned: false,
            unbanAttempts: 3,
            
            // Music settings
            musicEnabled: false,
            currentSong: 0,
            
            // Ad settings
            adsRemoved: false,
            lastAdTime: 0,
            adTimer: null,
            
            // Share system
            shareCount: 0,
            shareRewardClaimed: false,
            
            // Division mode
            currentDivision: 10,
            divisionPoints: 0,
            completedDivisions: 0,
            completedDivision1: false,
            
            // Online game state
            currentRoom: null,
            currentMatch: null,
            isPlayer1: false,
            roomUnsubscribe: null,
            matchUnsubscribe: null,
            timerInterval: null,
            disconnectTimer: null,
            
            // Matchmaking
            xpAmount: null, // Renamed from xpBet
            queueUnsubscribe: null,
            
            // Game session
            gameMode: 'friend',
            difficulty: 'beginner',
            board: Array(9).fill(null),
            moveHistory: [], // for VAR
            isXNext: true,
            winner: null,
            winningLine: null,
            isComputerTurn: false,
            gameStartTime: null,
            
            // Adaptive AI data
            adaptiveData: {
                matchesPlayed: 0,
                playerSkill: 0.5,
                currentDifficulty: 'beginner'
            },
            
            // Win streak for counter
            currentWinStreak: 0,
            
            // AI Progress
            aiProgress: {
                beginner: 0,
                medium: 0,
                hard: 0,
                genius: 0,
                adaptive: 0
            },
            
            // What's New modal
            hasSeenWhatsNew: false,
            
            // Logo click counter for Easter Egg
            logoClickCount: 0,
            logoTimer: null
        };

        // Audio Context
        let audioCtx = null;
        let musicAudio = null;
        let isMusicPlaying = false;

        // Win Streak Counter Element
        let winStreakElement = null;
        let winStreakValueElement = null;

        // VAR variables
        let varMoveIndex = 0;
        let varIsPlaying = false;
        let varInterval = null;

        // ==================== SETTINGS PANEL ====================

        function toggleSettingsPanel() {
            const panel = document.getElementById('settingsPanel');
            panel.classList.toggle('open');
            if (panel.classList.contains('open')) {
                playSound('click');
            }
        }

        function navigateToAndCloseSettings(pageId) {
            navigateTo(pageId);
            toggleSettingsPanel();
        }

        function openSettingsAndNavigate(pageId) {
            toggleSettingsPanel();
            setTimeout(() => navigateTo(pageId), 300);
        }

        // ==================== INIT ====================

        function init() {
            loadState();
            applyTheme(state.currentTheme);
            renderAll();
            checkDailyReward();
            showTipOfDay();
            lucide.createIcons();
            
            // Initialize win streak elements
            winStreakElement = document.getElementById('win-streak-counter');
            winStreakValueElement = document.getElementById('win-streak-value');
            
            // Show cookie consent if not accepted
            if (!state.cookiesAccepted) {
                setTimeout(() => {
                    document.getElementById('cookie-consent').classList.add('show');
                }, 1000);
            }
            
            // Update social media links
            updateSocialLinks();
            
            // Initialize music
            initMusic();
            
            // Load AI progress
            loadAIProgress();
            
            // Check if banned
            if (state.isBanned) {
                showBannedModal();
            }
            
            // Show What's New modal for existing users
            if (!state.hasSeenWhatsNew && state.xp > 0) {
                setTimeout(() => {
                    showWhatsNew();
                }, 2000);
            }
        }

        function updateSocialLinks() {
            document.querySelectorAll('a[target="_blank"]').forEach(link => {
                link.setAttribute('rel', 'noopener noreferrer');
            });
        }

        function loadState() {
            const saved = localStorage.getItem('xo-arena-v5');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    state = { ...state, ...parsed, board: Array(9).fill(null), winner: null, winningLine: null, isComputerTurn: false };
                } catch (e) { console.error('Save corrupted'); }
            }
        }

        function saveState() {
            const toSave = {
                uid: state.uid,
                profileName: state.profileName,
                profileImage: state.profileImage,
                xp: state.xp,
                level: state.level,
                unlockedSkins: state.unlockedSkins,
                unlockedFrames: state.unlockedFrames,
                currentSkin: state.currentSkin,
                currentFrame: state.currentFrame,
                currentTheme: state.currentTheme,
                playAs: state.playAs,
                stats: state.stats,
                onlineWins: state.onlineWins,
                onlineLosses: state.onlineLosses,
                achievements: state.achievements,
                beatenGenius: state.beatenGenius,
                beatenAdaptive: state.beatenAdaptive,
                dailyStreak: state.dailyStreak,
                lastClaimDate: state.lastClaimDate,
                soundEnabled: state.soundEnabled,
                cookiesAccepted: state.cookiesAccepted,
                isBanned: state.isBanned,
                unbanAttempts: state.unbanAttempts,
                musicEnabled: state.musicEnabled,
                currentSong: state.currentSong,
                adsRemoved: state.adsRemoved,
                shareCount: state.shareCount,
                shareRewardClaimed: state.shareRewardClaimed,
                currentDivision: state.currentDivision,
                divisionPoints: state.divisionPoints,
                completedDivisions: state.completedDivisions,
                completedDivision1: state.completedDivision1,
                currentWinStreak: state.currentWinStreak,
                aiProgress: state.aiProgress,
                adaptiveData: state.adaptiveData,
                hasSeenWhatsNew: state.hasSeenWhatsNew
            };
            localStorage.setItem('xo-arena-v5', JSON.stringify(toSave));
        }

        // ==================== BANNED SYSTEM ====================

        function showBannedModal() {
            const overlay = document.getElementById('banned-modal-overlay');
            const modal = document.getElementById('banned-modal');
            overlay.classList.add('active');
            modal.classList.add('active');
        }

        function closeBannedModal() {
            if (state.isBanned) return;
            document.getElementById('banned-modal-overlay').classList.remove('active');
            document.getElementById('banned-modal').classList.remove('active');
        }

        function attemptUnban() {
            if (state.isBanned) {
                showNotification('ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖÿ≠ÿ∏Ÿàÿ± ŸàŸÑÿß ŸäŸÖŸÉŸÜ ŸÅŸÉ ÿßŸÑÿ≠ÿ∏ÿ±', 'error');
                return;
            }
            
            const code = document.getElementById('unban-code').value.trim();
            
            if (UNBAN_CODES.includes(code)) {
                state.isBanned = false;
                state.unbanAttempts = 3;
                saveState();
                closeBannedModal();
                showNotification('ÿ™ŸÖ ŸÅŸÉ ÿ≠ÿ∏ÿ± ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');
            } else {
                state.unbanAttempts--;
                
                if (state.unbanAttempts <= 0) {
                    state.isBanned = true;
                    state.unbanAttempts = 0;
                    saveState();
                    document.getElementById('unban-section').style.display = 'none';
                    showNotification('ÿ™ŸÖ ÿ≠ÿ∏ÿ± ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÜŸáÿßÿ¶ŸäÿßŸã', 'error');
                } else {
                    document.getElementById('unban-attempts').textContent = `ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©: ${state.unbanAttempts}`;
                    showNotification('ŸÉŸàÿØ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', 'error');
                }
                
                saveState();
            }
        }

        // ==================== WHAT'S NEW MODAL ====================

        function showWhatsNew() {
            const overlay = document.getElementById('whats-new-modal-overlay');
            const modal = document.getElementById('whats-new-modal');
            overlay.classList.add('active');
            modal.classList.add('active');
            
            state.hasSeenWhatsNew = true;
            saveState();
        }

        function closeWhatsNew() {
            document.getElementById('whats-new-modal-overlay').classList.remove('active');
            document.getElementById('whats-new-modal').classList.remove('active');
        }

        // ==================== COOKIES ====================

        function acceptCookies() {
            state.cookiesAccepted = true;
            saveState();
            document.getElementById('cookie-consent').classList.remove('show');
            showNotification('ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ!', 'success');
        }

        function declineCookies() {
            state.cookiesAccepted = false;
            saveState();
            document.getElementById('cookie-consent').classList.remove('show');
        }

        // ==================== MUSIC SYSTEM ====================

        function initMusic() {
            musicAudio = new Audio();
            musicAudio.loop = false;
            
            musicAudio.addEventListener('ended', function() {
                if (state.musicEnabled) {
                    nextSong();
                }
            });
            
            updateMusicUI();
            
            if (state.musicEnabled) {
                playMusic();
            }
        }

        function toggleMusic() {
            state.musicEnabled = !state.musicEnabled;
            saveState();
            
            if (state.musicEnabled) {
                playMusic();
            } else {
                stopMusic();
            }
            
            updateMusicUI();
        }

        function playMusic() {
            if (musicAudio) {
                musicAudio.src = SONG_URLS[state.currentSong];
                musicAudio.play().catch(e => console.log('Autoplay prevented:', e));
                isMusicPlaying = true;
            }
        }

        function stopMusic() {
            if (musicAudio) {
                musicAudio.pause();
                isMusicPlaying = false;
            }
        }

        function nextSong() {
            state.currentSong = (state.currentSong + 1) % SONG_URLS.length;
            saveState();
            
            if (state.musicEnabled) {
                musicAudio.src = SONG_URLS[state.currentSong];
                musicAudio.play();
            }
            
            updateMusicUI();
        }

        function previousSong() {
            state.currentSong = (state.currentSong - 1 + SONG_URLS.length) % SONG_URLS.length;
            saveState();
            
            if (state.musicEnabled) {
                musicAudio.src = SONG_URLS[state.currentSong];
                musicAudio.play();
            }
            
            updateMusicUI();
        }

        function changeSong(index) {
            state.currentSong = parseInt(index);
            saveState();
            
            if (state.musicEnabled) {
                musicAudio.src = SONG_URLS[state.currentSong];
                musicAudio.play();
            }
            
            updateMusicUI();
        }

        function updateMusicUI() {
            const musicToggleBtn = document.getElementById('musicToggleBtn');
            const musicToggleBtnSettings = document.getElementById('musicToggleBtnSettings');
            const musicSelect = document.getElementById('musicSelect');
            const musicSelectSettings = document.getElementById('musicSelectSettings');
            const nowPlaying = document.getElementById('nowPlaying');
            const nowPlayingSettings = document.getElementById('nowPlayingSettings');
            
            if (musicToggleBtn) {
                musicToggleBtn.innerHTML = state.musicEnabled ? '<i data-lucide="pause"></i>' : '<i data-lucide="play"></i>';
            }
            if (musicToggleBtnSettings) {
                musicToggleBtnSettings.innerHTML = state.musicEnabled ? '<i data-lucide="pause"></i>' : '<i data-lucide="play"></i>';
            }
            
            if (musicSelect) musicSelect.value = state.currentSong;
            if (musicSelectSettings) musicSelectSettings.value = state.currentSong;
            
            const nowPlayingText = state.musicEnabled ? `Ÿäÿ¥ÿ∫ŸÑ: ${SONG_NAMES[state.currentSong]}` : 'ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸÖÿ™ŸàŸÇŸÅÿ©';
            if (nowPlaying) nowPlaying.textContent = nowPlayingText;
            if (nowPlayingSettings) nowPlayingSettings.textContent = nowPlayingText;
            
            lucide.createIcons();
        }

        // ==================== AUDIO ====================

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            if (!state.soundEnabled) return;
            initAudio();
            
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            switch(type) {
                case 'click':
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.1);
                    break;
                case 'win':
                    oscillator.frequency.value = 523;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
                    const notes = [523, 659, 784, 1047];
                    notes.forEach((freq, i) => {
                        oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.15);
                    });
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.6);
                    break;
                case 'lose':
                    oscillator.frequency.value = 200;
                    oscillator.type = 'sawtooth';
                    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.4);
                    break;
                case 'draw':
                    oscillator.frequency.value = 350;
                    oscillator.type = 'triangle';
                    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.3);
                    break;
                case 'achievement':
                    oscillator.frequency.value = 880;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
                    const achNotes = [880, 1100, 1320];
                    achNotes.forEach((freq, i) => {
                        oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.1);
                    });
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.4);
                    break;
                case 'hover':
                    oscillator.frequency.value = 1200;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.03, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.05);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.05);
                    break;
                case 'division-up':
                    oscillator.frequency.value = 523;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
                    const divNotes = [523, 659, 784, 1047, 1318];
                    divNotes.forEach((freq, i) => {
                        oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.1);
                    });
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.5);
                    break;
            }
        }

        function toggleSound() {
            state.soundEnabled = !state.soundEnabled;
            saveState();
            updateSoundIcon();
            if (state.soundEnabled) playSound('click');
        }

        function updateSoundIcon() {
            const icon = document.querySelector('#sound-toggle-settings i');
            if (icon) {
                icon.setAttribute('data-lucide', state.soundEnabled ? 'volume-2' : 'volume-x');
                lucide.createIcons();
            }
        }

        // AD SYSTEM COMPLETELY REMOVED

        // ==================== SHARE SYSTEM ====================

        function shareOnFacebook() {
            const url = encodeURIComponent('https://xo-arena-1.github.io/XO-Arena/');
            const text = encodeURIComponent('üéÆ ÿ¨ÿ±ÿ® XO Arena - ÿ£ŸÅÿ∂ŸÑ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ ŸÖÿ™ŸÉÿßŸÖŸÑ!');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
            incrementShareCount();
        }

        function shareOnTwitter() {
            const url = encodeURIComponent('https://xo-arena-1.github.io/XO-Arena/');
            const text = encodeURIComponent('üéÆ XO Arena - ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿ£ŸàŸÜŸÑÿßŸäŸÜ Ÿàÿ™ŸÜÿßŸÅÿ≥ XP');
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
            incrementShareCount();
        }

        function shareOnWhatsApp() {
            const url = encodeURIComponent('https://xo-arena-1.github.io/XO-Arena/');
            const text = encodeURIComponent('üéÆ ÿ¨ÿ±ÿ® XO Arena - ÿ£ŸÇŸàŸâ ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ© ŸÖÿπ ÿ£ŸàŸÜŸÑÿßŸäŸÜ!');
            window.open(`https://api.whatsapp.com/send?text=${text}%20${url}`, '_blank');
            incrementShareCount();
        }

        function shareOnTelegram() {
            const url = encodeURIComponent('https://xo-arena-1.github.io/XO-Arena/');
            const text = encodeURIComponent('üéÆ XO Arena - ŸÑÿπÿ®ÿ© ÿ•ŸÉÿ≥ ÿ£Ÿà ÿπÿ±ÿ®Ÿäÿ©');
            window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank');
            incrementShareCount();
        }

        function incrementShareCount() {
            if (state.shareRewardClaimed) return;
            
            state.shareCount++;
            saveState();
            
            updateShareUI();
            
            if (state.shareCount >= 20) {
                document.getElementById('verifyShareBtn').disabled = false;
            }
        }

        function verifyShare() {
            if (state.shareRewardClaimed) {
                showNotification('ŸÑŸÇÿØ ÿ≠ÿµŸÑÿ™ ÿπŸÑŸâ ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ© ÿ®ÿßŸÑŸÅÿπŸÑ', 'info');
                return;
            }
            
            if (state.shareCount >= 20) {
                state.xp += 100000;
                state.shareRewardClaimed = true;
                saveState();
                updateShareUI();
                showNotification('üéâ ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© 100,000 XP! ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÖÿ¥ÿßÿ±ŸÉÿ™ŸÉ', 'reward');
                playSound('achievement');
            } else {
                showNotification(`ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿπ ${20 - state.shareCount} ÿ¥ÿÆÿµ ÿ¢ÿÆÿ±`, 'info');
            }
        }

        function updateShareUI() {
            const shareCount = document.getElementById('shareCount');
            const shareProgress = document.getElementById('shareProgress');
            const verifyBtn = document.getElementById('verifyShareBtn');
            
            if (shareCount) shareCount.textContent = `${state.shareCount}/20`;
            if (shareProgress) shareProgress.style.width = `${(state.shareCount / 20) * 100}%`;
            
            if (verifyBtn) {
                verifyBtn.disabled = state.shareCount < 20 || state.shareRewardClaimed;
                verifyBtn.style.opacity = state.shareCount >= 20 && !state.shareRewardClaimed ? '1' : '0.5';
            }
        }

        // ==================== FRIENDS ONLINE MODALS ====================

        function showFriendsOptions() {
            document.getElementById('friends-options-overlay').classList.add('active');
            document.getElementById('friends-options-modal').classList.add('active');
        }

        function closeFriendsOptions() {
            document.getElementById('friends-options-overlay').classList.remove('active');
            document.getElementById('friends-options-modal').classList.remove('active');
        }

        function showFriendsOnlineOptions() {
            closeFriendsOptions();
            document.getElementById('friends-online-overlay').classList.add('active');
            document.getElementById('friends-online-modal').classList.add('active');
        }

        function closeFriendsOnline() {
            document.getElementById('friends-online-overlay').classList.remove('active');
            document.getElementById('friends-online-modal').classList.remove('active');
        }

        // ==================== CREATE ROOM (MODIFIED) ====================
        async function createRoom() {
            if (!state.uid) {
                showNotification('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }
            
            closeFriendsOnline();
            showLoadingScreen('ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∫ÿ±ŸÅÿ©...');
            
            const roomCode = Math.random().toString(36).substring(2, 8).toUpperCase();
            
            if (!window.db || !window.doc) {
                hideLoadingScreen();
                showNotification('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', 'error');
                return;
            }
            
            const roomRef = doc(db, 'rooms', roomCode);
            
            // MODIFIED DATA STRUCTURE: Removed timerSeconds
            const roomData = {
                player1: state.uid,
                player1Name: state.profileName,
                player1Avatar: state.profileImage || '',
                player1Level: state.level || 1,
                player1XP: state.xp || 0,
                player2: null,
                player2Name: null,
                player2Avatar: null,
                player2Level: null,
                player2XP: null,
                status: 'waiting',
                createdAt: serverTimestamp(),
                settings: {
                    rounds: 3,
                    allowDraw: true,
                    soundEnabled: true,
                    player1Symbol: 'X',
                    player2Symbol: 'O'
                },
                scoreboard: {
                    player1Wins: 0,
                    player2Wins: 0,
                    draws: 0,
                    currentRound: 1
                },
                game: {
                    board: ['','','','','','','','',''],
                    turn: 'X',
                    winner: null,
                    roundFinished: false
                }
            };
            
            try {
                await setDoc(roomRef, roomData);
                hideLoadingScreen();
                state.currentRoom = roomCode;
                state.isPlayer1 = true;
                navigateTo('room');
                setupRoomListener(roomCode);
                showNotification(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∫ÿ±ŸÅÿ©! ÿßŸÑŸÉŸàÿØ: ${roomCode}`, 'success');
            } catch (error) {
                hideLoadingScreen();
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∫ÿ±ŸÅÿ©', 'error');
                console.error('Create Room Error:', error);
            }
        }

        // ==================== JOIN ROOM (MODIFIED with runTransaction) ====================
        async function joinRoom() {
            if (!state.uid) {
                showNotification('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }

            const roomCode = document.getElementById('join-room-code').value.trim().toUpperCase();
            if (!roomCode) {
                showNotification('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÉŸàÿØ ÿßŸÑÿ∫ÿ±ŸÅÿ©', 'error');
                return;
            }

            closeFriendsOnline();
            showLoadingScreen('ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ∫ÿ±ŸÅÿ©...');

            const roomRef = doc(db, 'rooms', roomCode);

            try {
                await runTransaction(db, async (transaction) => {
                    const docSnap = await transaction.get(roomRef);

                    if (!docSnap.exists()) {
                        throw new Error('ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©');
                    }

                    const roomData = docSnap.data();

                    if (roomData.status !== 'waiting') {
                        throw new Error('ÿßŸÑÿ∫ÿ±ŸÅÿ© ŸÖŸÖÿ™ŸÑÿ¶ÿ© ÿ£Ÿà ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ÿ©');
                    }

                    if (roomData.player1 === state.uid) {
                        throw new Error('ŸÑÿß ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ÿ•ŸÑŸâ ÿ∫ÿ±ŸÅÿ™ŸÉ ÿßŸÑÿÆÿßÿµÿ©');
                    }

                    if (roomData.player2) {
                        throw new Error('ÿ™ŸÖ ÿ≠ÿ¨ÿ≤ ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ®ÿßŸÑŸÅÿπŸÑ');
                    }

                    transaction.update(roomRef, {
                        player2: state.uid,
                        player2Name: state.profileName,
                        player2Avatar: state.profileImage || '',
                        player2Level: state.level || 1,
                        player2XP: state.xp || 0,
                        status: 'playing',
                        'settings.player2Symbol': roomData.settings.player1Symbol === 'X' ? 'O' : 'X'
                    });
                });

                hideLoadingScreen();
                state.currentRoom = roomCode;
                state.isPlayer1 = false;
                navigateTo('room');
                setupRoomListener(roomCode);
                showNotification('ÿ™ŸÖ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');

            } catch (error) {
                hideLoadingScreen();
                showNotification(error.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ', 'error');
                console.error('Join Room Error:', error);
            }
        }

        function setupRoomListener(roomCode) {
            if (state.roomUnsubscribe) {
                state.roomUnsubscribe();
            }
            
            const roomRef = doc(db, 'rooms', roomCode);
            state.roomUnsubscribe = onSnapshot(roomRef, (docSnap) => {
                if (!docSnap.exists()) {
                    showNotification('ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©', 'error');
                    leaveRoom();
                    return;
                }
                
                const roomData = docSnap.data();
                updateRoomUI(roomData);
                
                // TIMER LOGIC REMOVED FROM HERE
            });
        }

        // ==================== UPDATE ROOM UI (MODIFIED) ====================
        function updateRoomUI(roomData) {
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÑÿßÿπÿ® 1
            document.getElementById('player1-avatar').src = roomData.player1Avatar || 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'50\' fill=\'%231e293b\'/%3E%3Ccircle cx=\'50\' cy=\'35\' r=\'20\' fill=\'%2300d4ff\'/%3E%3Cellipse cx=\'50\' cy=\'80\' rx=\'30\' ry=\'25\' fill=\'%2300d4ff\'/%3E%3C/svg%3E';
            document.getElementById('player1-name').textContent = roomData.player1Name;
            document.getElementById('player1-level').textContent = `Lv. ${roomData.player1Level || 1}`;
            document.getElementById('player1-xp').textContent = `${roomData.player1XP || 0} XP`;
            document.getElementById('player1-symbol').textContent = roomData.settings.player1Symbol;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÑÿßÿπÿ® 2
            if (roomData.player2) {
                const player2Profile = document.getElementById('player2-profile');
                player2Profile.style.opacity = '1';
                document.getElementById('player2-avatar').src = roomData.player2Avatar || 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'50\' fill=\'%23333\'/%3E%3Ccircle cx=\'50\' cy=\'35\' r=\'20\' fill=\'%23666\'/%3E%3Cellipse cx=\'50\' cy=\'80\' rx=\'30\' ry=\'25\' fill=\'%23666\'/%3E%3C/svg%3E';
                document.getElementById('player2-name').textContent = roomData.player2Name;
                document.getElementById('player2-level').textContent = `Lv. ${roomData.player2Level || 1}`;
                document.getElementById('player2-xp').textContent = `${roomData.player2XP || 0} XP`;
                document.getElementById('player2-symbol').textContent = roomData.settings.player2Symbol;
            } else {
                const player2Profile = document.getElementById('player2-profile');
                player2Profile.style.opacity = '0.5';
                document.getElementById('player2-avatar').src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'50\' fill=\'%23333\'/%3E%3Ccircle cx=\'50\' cy=\'35\' r=\'20\' fill=\'%23666\'/%3E%3Cellipse cx=\'50\' cy=\'80\' rx=\'30\' ry=\'25\' fill=\'%23666\'/%3E%3C/svg%3E';
                document.getElementById('player2-name').textContent = 'ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ±...';
                document.getElementById('player2-level').textContent = '-';
                document.getElementById('player2-xp').textContent = '-';
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÉŸàÿØ ÿßŸÑÿ∫ÿ±ŸÅÿ© (Ÿäÿ∏Ÿáÿ± ŸÅŸÇÿ∑ ŸÑŸÑŸÖÿ∂ŸäŸÅ ŸàŸáŸà player1)
            if (state.isPlayer1 && roomData.status === 'waiting') {
                document.getElementById('room-code-container').style.display = 'block';
                document.getElementById('room-code-display').textContent = state.currentRoom;
            } else {
                document.getElementById('room-code-container').style.display = 'none';
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≤ÿ± ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ (Ÿäÿ∏Ÿáÿ± ŸÅŸÇÿ∑ ŸÑŸÑŸÖÿ∂ŸäŸÅ ŸàŸáŸà player1)
            document.getElementById('room-settings-btn').style.display = state.isPlayer1 ? 'block' : 'none';
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
            document.getElementById('player1-wins').textContent = roomData.scoreboard.player1Wins;
            document.getElementById('player2-wins').textContent = roomData.scoreboard.player2Wins;
            document.getElementById('draws-count').textContent = roomData.scoreboard.draws;
            document.getElementById('current-round').textContent = `${roomData.scoreboard.currentRound}/${roomData.settings.rounds}`;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÑÿπÿ®ÿ©
            updateRoomBoard(roomData.game);
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÑÿπÿ®ÿ©
            const statusEl = document.getElementById('room-game-status');
            if (roomData.game.winner) {
                if (roomData.game.winner === 'draw') {
                    statusEl.innerHTML = '<span style="color: var(--text-secondary);">ÿ™ÿπÿßÿØŸÑ!</span>';
                } else {
                    const winnerName = roomData.game.winner === roomData.settings.player1Symbol ? roomData.player1Name : roomData.player2Name;
                    statusEl.innerHTML = `<span style="color: ${roomData.game.winner === roomData.settings.player1Symbol ? 'var(--accent-color)' : 'var(--accent-secondary)'};">ŸÅŸàÿ≤ ${winnerName}!</span>`;
                }
            } else {
                const currentPlayer = roomData.game.turn;
                const currentPlayerName = currentPlayer === roomData.settings.player1Symbol ? roomData.player1Name : roomData.player2Name;
                const color = currentPlayer === roomData.settings.player1Symbol ? 'var(--accent-color)' : 'var(--accent-secondary)';
                statusEl.innerHTML = `ÿØŸàÿ±: <span style="color: ${color};">${currentPlayerName}</span>`;
            }
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÜŸÅÿµÿßŸÑ ÿßŸÑÿÆÿµŸÖ
            if (roomData.status === 'disconnected') {
                document.getElementById('disconnected-message').style.display = 'block';
            } else {
                document.getElementById('disconnected-message').style.display = 'none';
            }
        }

        function updateRoomBoard(gameData) {
            const boardEl = document.getElementById('room-game-board');
            
            if (boardEl.children.length === 0) {
                for (let i = 0; i < 9; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'game-cell w-24 h-24 md:w-28 md:h-28 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-display';
                    btn.id = `room-cell-${i}`;
                    btn.onmouseenter = () => playSound('hover');
                    btn.onclick = () => handleRoomMove(i);
                    boardEl.appendChild(btn);
                }
            }
            
            for (let i = 0; i < 9; i++) {
                const cell = document.getElementById(`room-cell-${i}`);
                const value = gameData.board[i];
                
                if (value) {
                    cell.innerHTML = `<span class="animate-pop-in">${value}</span>`;
                    cell.classList.add('disabled');
                    cell.className = `game-cell w-24 h-24 md:w-28 md:h-28 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-display disabled ${state.currentSkin}`;
                } else {
                    cell.innerHTML = '';
                    cell.className = 'game-cell w-24 h-24 md:w-28 md:h-28 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-display';
                }
            }
        }

        // FIXED handleRoomMove with console.log and runTransaction
        function handleRoomMove(index) {
            console.log('üéÆ handleRoomMove called for index:', index); // FOR DEBUGGING
            if (!state.currentRoom || !state.uid) {
                console.error('No room or user ID');
                return;
            }
            
            const roomRef = doc(db, 'rooms', state.currentRoom);
            
            runTransaction(db, async (transaction) => {
                const docSnap = await transaction.get(roomRef);
                if (!docSnap.exists()) throw new Error('ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©');
                
                const roomData = docSnap.data();
                
                if (roomData.status !== 'playing') throw new Error('ÿßŸÑŸÑÿπÿ®ÿ© ŸÑŸÖ ÿ™ÿ®ÿØÿ£ ÿ®ÿπÿØ');
                if (roomData.game.winner) throw new Error('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÑÿπÿ®ÿ©');
                if (roomData.game.board[index]) throw new Error('Ÿáÿ∞Ÿá ÿßŸÑÿÆÿßŸÜÿ© ŸÖÿ¥ÿ∫ŸàŸÑÿ©');
                
                const isPlayer1 = roomData.player1 === state.uid;
                const isPlayer2 = roomData.player2 === state.uid;
                if (!isPlayer1 && !isPlayer2) throw new Error('ŸÑÿ≥ÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉÿßŸã ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑÿ∫ÿ±ŸÅÿ©');
                
                const playerSymbol = isPlayer1 ? roomData.settings.player1Symbol : roomData.settings.player2Symbol;
                if (roomData.game.turn !== playerSymbol) throw new Error('ŸÑŸäÿ≥ ÿØŸàÿ±ŸÉ');
                
                const newBoard = [...roomData.game.board];
                newBoard[index] = playerSymbol;
                
                const result = checkWinner(newBoard);
                
                const updates = {
                    'game.board': newBoard,
                    'game.turn': playerSymbol === 'X' ? 'O' : 'X'
                };
                
                if (result) {
                    if (result.winner === 'draw') {
                        if (roomData.settings.allowDraw) {
                            updates['game.winner'] = 'draw';
                            updates['scoreboard.draws'] = roomData.scoreboard.draws + 1;
                            
                            const newDraws = roomData.scoreboard.draws + 1;
                            if (newDraws >= roomData.settings.rounds) {
                                updates['status'] = 'completed';
                            } else {
                                updates['scoreboard.currentRound'] = roomData.scoreboard.currentRound + 1;
                                updates['game.board'] = ['','','','','','','','',''];
                                updates['game.winner'] = null;
                                updates['game.turn'] = 'X';
                            }
                        } else {
                            updates['game.board'] = ['','','','','','','','',''];
                            updates['game.winner'] = null;
                            updates['game.turn'] = 'X';
                        }
                    } else {
                        const winner = result.winner;
                        const isPlayer1Winner = winner === roomData.settings.player1Symbol;
                        
                        if (isPlayer1Winner) {
                            updates['scoreboard.player1Wins'] = roomData.scoreboard.player1Wins + 1;
                        } else {
                            updates['scoreboard.player2Wins'] = roomData.scoreboard.player2Wins + 1;
                        }
                        
                        updates['game.winner'] = winner;
                        
                        const newPlayer1Wins = isPlayer1Winner ? roomData.scoreboard.player1Wins + 1 : roomData.scoreboard.player1Wins;
                        const newPlayer2Wins = isPlayer1Winner ? roomData.scoreboard.player2Wins : roomData.scoreboard.player2Wins + 1;
                        
                        if (newPlayer1Wins >= roomData.settings.rounds || newPlayer2Wins >= roomData.settings.rounds) {
                            updates['status'] = 'completed';
                            
                            if (state.uid === (isPlayer1Winner ? roomData.player1 : roomData.player2)) {
                                state.xp += 100;
                                state.onlineWins++;
                            } else {
                                state.onlineLosses++;
                            }
                            saveState();
                        } else {
                            updates['scoreboard.currentRound'] = roomData.scoreboard.currentRound + 1;
                            updates['game.board'] = ['','','','','','','','',''];
                            updates['game.winner'] = null;
                            updates['game.turn'] = 'X';
                        }
                    }
                }
                
                transaction.update(roomRef, updates);
            }).catch(error => {
                showNotification(error.message, 'error');
                console.error('Transaction error:', error);
            });
        }

        // TIMER FUNCTIONS (handleRoomTimer, handleTimerLoss) REMOVED

        function leaveRoom() {
            if (state.roomUnsubscribe) {
                state.roomUnsubscribe();
                state.roomUnsubscribe = null;
            }
            
            // TIMER INTERVAL REMOVED
            
            if (state.disconnectTimer) {
                clearTimeout(state.disconnectTimer);
                state.disconnectTimer = null;
            }
            
            if (state.currentRoom && state.isPlayer1) {
                const roomRef = doc(db, 'rooms', state.currentRoom);
                deleteDoc(roomRef).catch(console.error);
            } else if (state.currentRoom) {
                const roomRef = doc(db, 'rooms', state.currentRoom);
                updateDoc(roomRef, {
                    status: 'disconnected',
                    player2: null,
                    player2Name: null
                }).catch(console.error);
            }
            
            state.currentRoom = null;
            state.isPlayer1 = false;
            navigateTo('home');
        }

        function showRoomSettings() {
            if (!state.isPlayer1) return;
            
            document.getElementById('room-settings-overlay').classList.add('active');
            document.getElementById('room-settings-modal').classList.add('active');
        }

        function closeRoomSettings() {
            document.getElementById('room-settings-overlay').classList.remove('active');
            document.getElementById('room-settings-modal').classList.remove('active');
        }

        // MODIFIED saveRoomSettings: Removed timer setting
        function saveRoomSettings() {
            if (!state.currentRoom || !state.isPlayer1) return;
            
            const rounds = parseInt(document.getElementById('settings-rounds').value);
            const allowDraw = document.getElementById('settings-allow-draw').checked;
            const soundEnabled = document.getElementById('settings-sound').checked;
            const player1Symbol = document.getElementById('settings-player1-symbol').value;
            
            const roomRef = doc(db, 'rooms', state.currentRoom);
            
            updateDoc(roomRef, {
                'settings.rounds': rounds,
                'settings.allowDraw': allowDraw,
                'settings.soundEnabled': soundEnabled,
                'settings.player1Symbol': player1Symbol,
                'settings.player2Symbol': player1Symbol === 'X' ? 'O' : 'X'
            }).then(() => {
                closeRoomSettings();
                showNotification('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™', 'success');
            }).catch(error => {
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', 'error');
            });
        }

        function restartMatch() {
            if (!state.currentRoom || !state.isPlayer1) return;
            
            const roomRef = doc(db, 'rooms', state.currentRoom);
            
            updateDoc(roomRef, {
                'scoreboard.player1Wins': 0,
                'scoreboard.player2Wins': 0,
                'scoreboard.draws': 0,
                'scoreboard.currentRound': 1,
                'game.board': ['','','','','','','','',''],
                'game.turn': 'X',
                'game.winner': null,
                'game.roundFinished': false,
                'status': 'playing'
            }).then(() => {
                showNotification('ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©', 'success');
            });
        }

        function kickPlayer() {
            if (!state.currentRoom || !state.isPlayer1) return;
            
            const roomRef = doc(db, 'rooms', state.currentRoom);
            
            updateDoc(roomRef, {
                player2: null,
                player2Name: null,
                player2Avatar: null,
                player2Level: null,
                player2XP: null,
                status: 'waiting',
                'scoreboard.player1Wins': 0,
                'scoreboard.player2Wins': 0,
                'scoreboard.draws': 0,
                'scoreboard.currentRound': 1,
                'game.board': ['','','','','','','','',''],
                'game.turn': 'X',
                'game.winner': null
            }).then(() => {
                closeRoomSettings();
                showNotification('ÿ™ŸÖ ÿ∑ÿ±ÿØ ÿßŸÑŸÑÿßÿπÿ®', 'success');
            });
        }

        function closeRoom() {
            if (!state.currentRoom || !state.isPlayer1) return;
            
            const roomRef = doc(db, 'rooms', state.currentRoom);
            deleteDoc(roomRef).then(() => {
                closeRoomSettings();
                leaveRoom();
                showNotification('ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ∫ÿ±ŸÅÿ©', 'success');
            });
        }

        function copyRoomCode() {
            const code = document.getElementById('room-code-display').textContent;
            navigator.clipboard.writeText(code).then(() => {
                showNotification('ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ', 'success');
            });
        }

        // ==================== ONLINE MATCHES (XP BET) ====================

        function showOnlineMatchesOptions() {
            if (!state.uid) {
                showNotification('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }
            
            document.getElementById('xp-balance-display').textContent = state.xp;
            document.getElementById('online-matches-overlay').classList.add('active');
            document.getElementById('online-matches-modal').classList.add('active');
        }

        function closeOnlineMatches() {
            document.getElementById('online-matches-overlay').classList.remove('active');
            document.getElementById('online-matches-modal').classList.remove('active');
        }

        // RENAMED FUNCTION: selectXpBet -> selectXpAmount
        function selectXpAmount(amount) {
            if (amount > state.xp) {
                showNotification('XP ÿ∫Ÿäÿ± ŸÉÿßŸÅŸä', 'error');
                return;
            }
            
            state.xpAmount = amount;
            document.querySelectorAll('.xp-bet-btn').forEach(btn => {
                btn.style.borderColor = 'var(--border-color)';
            });
            event.currentTarget.style.borderColor = '#ffd700';
            document.getElementById('start-matchmaking-btn').disabled = false;
        }

        function startMatchmaking() {
            if (!state || state.xpAmount === undefined || state.xpAmount === null) {
                showNotification('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ®ŸÑÿ∫ XP ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }
            
            if (!state.uid) {
                showNotification('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }
            
            closeOnlineMatches();
            showLoadingScreen('ÿ¨ÿßÿ± ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÑÿßÿπÿ®...');
            
            const queueRef = doc(db, 'matchmakingQueue', state.uid);
            
            setDoc(queueRef, {
                uid: state.uid,
                username: state.profileName,
                avatar: state.profileImage || '',
                level: state.level,
                xpBet: state.xpAmount, // Keep field name as xpBet for DB compatibility
                mode: 'onlineMatches',
                createdAt: serverTimestamp()
            }).then(() => {
                setupMatchmakingListener();
            }).catch(error => {
                hideLoadingScreen();
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', 'error');
            });
        }

        function setupMatchmakingListener() {
            const queueRef = collection(db, 'matchmakingQueue');
            
            state.queueUnsubscribe = onSnapshot(queueRef, (snapshot) => {
                const players = snapshot.docs
                    .map(doc => ({ id: doc.id, ...doc.data() }))
                    .filter(p => p.id !== state.uid && p.mode === 'onlineMatches');
                
                if (players.length > 0) {
                    const matchedPlayer = players.find(p => Math.abs(p.xpBet - state.xpAmount) <= 500) || players[0];
                    createOnlineMatch(matchedPlayer);
                }
            });
        }

        function createOnlineMatch(player2) {
            if (!state.uid || !state.xpAmount) return;
            
            const matchId = `${state.uid}_${player2.uid}_${Date.now()}`;
            const matchRef = doc(db, 'matches', matchId);
            
            const player1Symbol = Math.random() < 0.5 ? 'X' : 'O';
            const player2Symbol = player1Symbol === 'X' ? 'O' : 'X';
            
            const matchData = {
                mode: 'onlineMatches',
                player1UID: state.uid,
                player2UID: player2.uid,
                player1Name: state.profileName,
                player2Name: player2.username,
                player1Avatar: state.profileImage || '',
                player2Avatar: player2.avatar || '',
                player1Bet: state.xpAmount,
                player2Bet: player2.xpBet,
                player1Symbol: player1Symbol,
                player2Symbol: player2Symbol,
                status: 'inGame',
                createdAt: serverTimestamp(),
                timerSeconds: 5,
                game: {
                    board: ['','','','','','','','',''],
                    turn: 'X',
                    winner: null,
                    roundFinished: false
                },
                scoreboard: {
                    player1Wins: 0,
                    player2Wins: 0,
                    currentRound: 1
                },
                settings: {
                    rounds: 1,
                    allowDraw: false
                }
            };
            
            deleteDoc(doc(db, 'matchmakingQueue', state.uid));
            deleteDoc(doc(db, 'matchmakingQueue', player2.uid));
            
            setDoc(matchRef, matchData)
                .then(() => {
                    if (state.queueUnsubscribe) {
                        state.queueUnsubscribe();
                    }
                    
                    hideLoadingScreen();
                    state.currentMatch = matchId;
                    setupMatchListener(matchId);
                    navigateTo('online-match');
                })
                .catch(error => {
                    hideLoadingScreen();
                    showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©', 'error');
                });
        }

        function setupMatchListener(matchId) {
            if (state.matchUnsubscribe) {
                state.matchUnsubscribe();
            }
            
            const matchRef = doc(db, 'matches', matchId);
            state.matchUnsubscribe = onSnapshot(matchRef, (docSnap) => {
                if (!docSnap.exists()) {
                    showNotification('ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©', 'error');
                    leaveMatch();
                    return;
                }
                
                const matchData = docSnap.data();
                updateMatchUI(matchData);
            });
        }

        function updateMatchUI(matchData) {
            // ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÅÿ≠ÿ© ŸÖÿÆÿµÿµÿ© ŸÑŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ•ÿ∞ÿß ÿ£ÿ±ÿØÿ™
        }

        function leaveMatch() {
            if (state.matchUnsubscribe) {
                state.matchUnsubscribe();
                state.matchUnsubscribe = null;
            }
            
            if (state.currentMatch) {
                const matchRef = doc(db, 'matches', state.currentMatch);
                updateDoc(matchRef, {
                    status: 'disconnected'
                }).catch(console.error);
            }
            
            state.currentMatch = null;
            navigateTo('home');
        }

        // ==================== ONLINE DIVISION ====================

        function showDivisionOptions() {
            document.getElementById('division-options-overlay').classList.add('active');
            document.getElementById('division-options-modal').classList.add('active');
        }

        function closeDivisionOptions() {
            document.getElementById('division-options-overlay').classList.remove('active');
            document.getElementById('division-options-modal').classList.remove('active');
        }

        function startDivisionMatch() {
            closeDivisionOptions();
            startGame('division', DIVISIONS.find(d => d.level === state.currentDivision)?.difficulty || 'beginner');
        }

        function startOnlineDivision() {
            if (!state.uid) {
                showNotification('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                return;
            }
            
            closeDivisionOptions();
            showLoadingScreen('ÿ¨ÿßÿ± ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÑÿßÿπÿ® ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ...');
            
            const queueRef = doc(db, 'divisionQueue', state.uid);
            
            setDoc(queueRef, {
                uid: state.uid,
                division: state.currentDivision,
                divisionPoints: state.divisionPoints,
                username: state.profileName,
                avatar: state.profileImage || '',
                level: state.level,
                createdAt: serverTimestamp()
            }).then(() => {
                setupDivisionMatchmakingListener();
            }).catch(error => {
                hideLoadingScreen();
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', 'error');
            });
        }

        function setupDivisionMatchmakingListener() {
            const queueRef = collection(db, 'divisionQueue');
            
            state.queueUnsubscribe = onSnapshot(queueRef, (snapshot) => {
                const players = snapshot.docs
                    .map(doc => ({ id: doc.id, ...doc.data() }))
                    .filter(p => p.id !== state.uid && p.division === state.currentDivision);
                
                if (players.length > 0) {
                    const matchedPlayer = players[0];
                    createDivisionMatch(matchedPlayer);
                }
            });
        }

        function createDivisionMatch(player2) {
            if (!state.uid) return;
            
            let bestOfWinsRequired;
            if (state.currentDivision >= 6) bestOfWinsRequired = 3;
            else if (state.currentDivision >= 4) bestOfWinsRequired = 5;
            else bestOfWinsRequired = 8;
            
            const matchId = `div_${state.uid}_${player2.uid}_${Date.now()}`;
            const matchRef = doc(db, 'divisionMatches', matchId);
            
            const player1Symbol = Math.random() < 0.5 ? 'X' : 'O';
            const player2Symbol = player1Symbol === 'X' ? 'O' : 'X';
            
            const matchData = {
                mode: 'division',
                division: state.currentDivision,
                player1UID: state.uid,
                player2UID: player2.uid,
                player1Name: state.profileName,
                player2Name: player2.username,
                player1Avatar: state.profileImage || '',
                player2Avatar: player2.avatar || '',
                player1Division: state.currentDivision,
                player2Division: player2.division,
                player1Symbol: player1Symbol,
                player2Symbol: player2Symbol,
                bestOfWinsRequired: bestOfWinsRequired,
                player1Wins: 0,
                player2Wins: 0,
                status: 'inGame',
                createdAt: serverTimestamp(),
                timerSeconds: 5,
                game: {
                    board: ['','','','','','','','',''],
                    turn: 'X',
                    winner: null
                }
            };
            
            deleteDoc(doc(db, 'divisionQueue', state.uid));
            deleteDoc(doc(db, 'divisionQueue', player2.uid));
            
            setDoc(matchRef, matchData)
                .then(() => {
                    if (state.queueUnsubscribe) {
                        state.queueUnsubscribe();
                    }
                    
                    hideLoadingScreen();
                    state.currentMatch = matchId;
                    setupDivisionMatchListener(matchId);
                    navigateTo('division-match');
                })
                .catch(error => {
                    hideLoadingScreen();
                    showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©', 'error');
                });
        }

        function setupDivisionMatchListener(matchId) {
            if (state.matchUnsubscribe) {
                state.matchUnsubscribe();
            }
            
            const matchRef = doc(db, 'divisionMatches', matchId);
            state.matchUnsubscribe = onSnapshot(matchRef, (docSnap) => {
                if (!docSnap.exists()) {
                    showNotification('ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©', 'error');
                    leaveDivisionMatch();
                    return;
                }
                
                const matchData = docSnap.data();
                updateDivisionMatchUI(matchData);
            });
        }

        function updateDivisionMatchUI(matchData) {
            // ŸÖÿ¥ÿßÿ®Ÿá ŸÑŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑÿπÿßÿØŸäÿ© ŸÖÿπ ÿπÿ±ÿ∂ Best Of
        }

        function handleDivisionMove(index, matchData) {
            if (!state.currentMatch || !state.uid) return;
            
            const matchRef = doc(db, 'divisionMatches', state.currentMatch);
            
            runTransaction(db, async (transaction) => {
                const docSnap = await transaction.get(matchRef);
                if (!docSnap.exists()) throw new Error('ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©');
                
                const data = docSnap.data();
                
                if (data.status !== 'inGame') throw new Error('ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ© ÿßŸÜÿ™Ÿáÿ™');
                if (data.game.winner) throw new Error('ÿßŸÑÿ¨ŸàŸÑÿ© ÿßŸÜÿ™Ÿáÿ™');
                if (data.game.board[index]) throw new Error('Ÿáÿ∞Ÿá ÿßŸÑÿÆÿßŸÜÿ© ŸÖÿ¥ÿ∫ŸàŸÑÿ©');
                
                const isPlayer1 = data.player1UID === state.uid;
                const playerSymbol = isPlayer1 ? data.player1Symbol : data.player2Symbol;
                
                if (data.game.turn !== playerSymbol) throw new Error('ŸÑŸäÿ≥ ÿØŸàÿ±ŸÉ');
                
                const newBoard = [...data.game.board];
                newBoard[index] = playerSymbol;
                
                const result = checkWinner(newBoard);
                
                const updates = {
                    'game.board': newBoard,
                    'game.turn': playerSymbol === 'X' ? 'O' : 'X'
                };
                
                if (result) {
                    if (result.winner === 'draw') {
                        updates['game.board'] = ['','','','','','','','',''];
                        updates['game.turn'] = 'X';
                        updates['game.winner'] = null;
                    } else {
                        const winner = result.winner;
                        const isPlayer1Winner = winner === data.player1Symbol;
                        
                        if (isPlayer1Winner) {
                            updates['player1Wins'] = data.player1Wins + 1;
                        } else {
                            updates['player2Wins'] = data.player2Wins + 1;
                        }
                        
                        updates['game.winner'] = winner;
                        
                        const newPlayer1Wins = isPlayer1Winner ? data.player1Wins + 1 : data.player1Wins;
                        const newPlayer2Wins = isPlayer1Winner ? data.player2Wins : data.player2Wins + 1;
                        
                        if (newPlayer1Wins >= data.bestOfWinsRequired || newPlayer2Wins >= data.bestOfWinsRequired) {
                            updates['status'] = 'completed';
                            
                            if (isPlayer1Winner) {
                                if (state.uid === data.player1UID) {
                                    handleDivisionWin();
                                } else {
                                    handleDivisionLoss();
                                }
                            } else {
                                if (state.uid === data.player2UID) {
                                    handleDivisionWin();
                                } else {
                                    handleDivisionLoss();
                                }
                            }
                        } else {
                            updates['game.board'] = ['','','','','','','','',''];
                            updates['game.turn'] = 'X';
                            updates['game.winner'] = null;
                        }
                    }
                }
                
                transaction.update(matchRef, updates);
            }).catch(error => {
                showNotification(error.message, 'error');
            });
        }

        function handleDivisionWin() {
            state.divisionPoints += 3;
            
            const currentDivisionData = DIVISIONS.find(d => d.level === state.currentDivision);
            if (currentDivisionData && state.divisionPoints >= currentDivisionData.required) {
                completeDivision();
            }
            
            saveState();
        }

        function handleDivisionLoss() {
            state.divisionPoints = Math.max(0, state.divisionPoints - 3);
            
            if (state.divisionPoints === 0 && state.currentDivision < 10) {
                state.currentDivision++;
                state.divisionPoints = DIVISIONS.find(d => d.level === state.currentDivision).required - 1;
                showNotification(`Ÿáÿ®ÿ∑ÿ™ ÿ•ŸÑŸâ Division ${state.currentDivision}`, 'error');
            }
            
            saveState();
        }

        function leaveDivisionMatch() {
            if (state.matchUnsubscribe) {
                state.matchUnsubscribe();
                state.matchUnsubscribe = null;
            }
            
            if (state.currentMatch) {
                const matchRef = doc(db, 'divisionMatches', state.currentMatch);
                updateDoc(matchRef, {
                    status: 'disconnected'
                }).catch(console.error);
            }
            
            state.currentMatch = null;
            navigateTo('division');
        }

        // ==================== NAVIGATION ====================

        function navigateTo(pageId) {
            if (state.isBanned && pageId !== 'home') {
                showBannedModal();
                return;
            }
            
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const target = document.getElementById(`page-${pageId}`);
            if (target) {
                target.classList.add('active');
                
                if (pageId === 'share') {
                    updateShareUI();
                }
            }
            lucide.createIcons();
            playSound('click');
        }

        // ==================== NOTIFICATIONS ====================

        function showNotification(message, type = 'success') {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.style.background = type === 'success' ? 'linear-gradient(135deg, rgba(0,255,136,0.9), rgba(0,200,100,0.9))' :
                                    type === 'achievement' ? 'linear-gradient(135deg, rgba(168,85,247,0.9), rgba(139,69,219,0.9))' :
                                    type === 'reward' ? 'linear-gradient(135deg, rgba(255,215,0,0.9), rgba(255,170,0,0.9))' :
                                    type === 'error' ? 'linear-gradient(135deg, rgba(255,51,102,0.9), rgba(200,0,50,0.9))' :
                                    type === 'info' ? 'linear-gradient(135deg, rgba(0,212,255,0.9), rgba(0,150,200,0.9))' :
                                    'linear-gradient(135deg, rgba(0,212,255,0.9), rgba(0,150,200,0.9))';
            notif.style.color = type === 'reward' ? '#1a1a2e' : 'white';
            notif.classList.add('show');
            
            if (type === 'achievement') playSound('achievement');
            
            setTimeout(() => notif.classList.remove('show'), 3000);
        }

        // ==================== END GAME SCREEN ====================

        function showEndGameScreen(result, xpChange) {
            const screen = document.getElementById('end-game-screen');
            const icon = document.getElementById('end-game-icon');
            const title = document.getElementById('end-game-title');
            const xpEl = document.getElementById('end-game-xp');
            
            let iconHtml = '';
            let titleText = '';
            let xpText = '';
            
            if (result.winner === state.playAs) {
                iconHtml = 'üèÜ';
                titleText = 'ŸÅŸàÿ≤!';
                xpText = `+${xpChange} XP`;
                icon.style.background = 'rgba(0,255,136,0.2)';
                icon.style.color = '#00ff88';
            } else if (result.winner === 'draw') {
                iconHtml = 'ü§ù';
                titleText = 'ÿ™ÿπÿßÿØŸÑ';
                xpText = `+${xpChange} XP`;
                icon.style.background = 'rgba(255,215,0,0.2)';
                icon.style.color = '#ffd700';
            } else {
                iconHtml = 'üíî';
                titleText = 'ÿÆÿ≥ÿßÿ±ÿ©';
                xpText = `${xpChange} XP`;
                icon.style.background = 'rgba(255,51,102,0.2)';
                icon.style.color = '#ff3366';
            }
            
            icon.innerHTML = iconHtml;
            title.textContent = titleText;
            xpEl.textContent = xpText;
            
            screen.classList.add('show');
            
            setTimeout(() => {
                screen.classList.remove('show');
            }, 3000);
        }

        // ==================== LOADING SCREEN ====================

        function showLoadingScreen(text = 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...') {
            const screen = document.getElementById('loading-screen');
            const textEl = document.getElementById('loading-text');
            textEl.textContent = text;
            screen.classList.add('show');
        }

        function hideLoadingScreen() {
            const screen = document.getElementById('loading-screen');
            screen.classList.remove('show');
        }

        function showLoadingAndReset() {
            showLoadingScreen(Math.random() > 0.5 ? 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ¨ŸáŸäÿ≤ ÿßŸÑÿÆÿµŸÖ...' : 'ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ®ŸäŸÅŸÉÿ±...');
            
            setTimeout(() => {
                hideLoadingScreen();
                resetBoard();
            }, 1000);
        }

        // ==================== EASTER EGG ====================

        function handleLogoClick() {
            state.logoClickCount++;
            
            if (state.logoTimer) {
                clearTimeout(state.logoTimer);
            }
            
            state.logoTimer = setTimeout(() => {
                state.logoClickCount = 0;
            }, 2000);
            
            if (state.logoClickCount >= 5) {
                activateRainbowMode();
                state.logoClickCount = 0;
            }
        }

        function activateRainbowMode() {
            document.body.classList.add('rainbow-mode');
            showNotification('üéâ ÿßŸÉÿ™ÿ¥ŸÅÿ™ ÿßŸÑÿ≥ÿ±! ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ Ÿàÿ∂ÿπ ŸÇŸàÿ≥ ŸÇÿ≤ÿ≠!', 'achievement');
            playSound('achievement');
            
            setTimeout(() => {
                document.body.classList.remove('rainbow-mode');
            }, 10000);
        }

        // ==================== AI PROGRESS ====================

        function loadAIProgress() {
            const saved = localStorage.getItem('aiProgress');
            if (saved) {
                try {
                    state.aiProgress = JSON.parse(saved);
                } catch (e) {}
            }
        }

        function saveAIProgress() {
            localStorage.setItem('aiProgress', JSON.stringify(state.aiProgress));
        }

        function incrementAIProgress(difficulty) {
            if (!difficulty) return;
            state.aiProgress[difficulty] = (state.aiProgress[difficulty] || 0) + 1;
            saveAIProgress();
        }

        function getAIStars(difficulty) {
            const matches = state.aiProgress[difficulty] || 0;
            const stars = Math.min(5, Math.floor(matches / 3));
            return stars;
        }

        function renderAIStars(difficulty) {
            const stars = getAIStars(difficulty);
            let html = '<div class="ai-progress">';
            for (let i = 0; i < 5; i++) {
                html += `<span class="star ${i < stars ? 'gold' : ''}">‚òÖ</span>`;
            }
            html += '</div>';
            return html;
        }

        // ==================== WIN STREAK ====================

        function updateWinStreak() {
            if (winStreakElement && winStreakValueElement) {
                if (state.currentWinStreak > 0) {
                    winStreakElement.style.display = 'flex';
                    winStreakValueElement.textContent = state.currentWinStreak;
                } else {
                    winStreakElement.style.display = 'none';
                }
            }
        }

        // ==================== RANKS ====================

        function getRank(xp) {
            let rank = RANKS[0];
            for (const r of RANKS) {
                if (xp >= r.minXP) rank = r;
            }
            return rank;
        }

        // ==================== DAILY REWARDS ====================

        function checkDailyReward() {
            const today = new Date().toDateString();
            const btn = document.getElementById('daily-reward-btn');
            const text = document.getElementById('daily-reward-text');
            
            if (state.lastClaimDate === today) {
                text.textContent = 'ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑŸáÿØŸäÿ© ÿßŸÑŸäŸàŸÖ';
                btn.style.opacity = '0.5';
                btn.style.cursor = 'not-allowed';
            } else {
                const reward = getNextReward();
                text.textContent = `ŸáÿØŸäÿ© ŸäŸàŸÖŸäÿ©: +${reward} XP`;
                btn.style.opacity = '1';
                btn.style.cursor = 'pointer';
            }
        }

        function getNextReward() {
            const nextDay = state.dailyStreak + 1;
            if (nextDay % 30 === 0) return 3000;
            if (nextDay % 7 === 0) return 1000;
            return 500;
        }

        function claimDailyReward() {
            const today = new Date().toDateString();
            if (state.lastClaimDate === today) return;
            
            state.dailyStreak++;
            const reward = getNextReward();
            state.xp += reward;
            state.lastClaimDate = today;
            saveState();
            
            let msg = `+${reward} XP!`;
            if (state.dailyStreak % 30 === 0) msg = `ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑÿ¥Ÿáÿ±! ${msg}`;
            else if (state.dailyStreak % 7 === 0) msg = `ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ! ${msg}`;
            
            showNotification(msg, 'reward');
            playSound('achievement');
            checkDailyReward();
            renderAll();
        }

        // ==================== PROFILE ====================

        function handleProfileImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    state.profileImage = e.target.result;
                    saveState();
                    
                    const homeProfileImg = document.getElementById('home-profile-img');
                    const profileImg = document.getElementById('profile-img');
                    
                    if (homeProfileImg) {
                        homeProfileImg.src = e.target.result;
                        homeProfileImg.style.opacity = '1';
                    }
                    if (profileImg) {
                        profileImg.src = e.target.result;
                        profileImg.style.opacity = '1';
                    }
                    
                    renderAll();
                    playSound('click');
                    showNotification('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ¥ÿÆÿµŸäÿ©');
                };
                reader.readAsDataURL(file);
            }
        }

        function saveProfileName() {
            const input = document.getElementById('profile-name-input');
            state.profileName = input.value.trim() || 'Player';
            saveState();
            renderAll();
            playSound('click');
        }

        // ==================== FRAMES ====================

        function applyFrame(elementId, containerId) {
            const frame = FRAMES.find(f => f.id === state.currentFrame) || FRAMES[0];
            const container = document.getElementById(containerId);
            if (container) {
                container.className = `rounded-full p-1 ${frame.class}`;
                
                const img = container.querySelector('img');
                if (img && state.profileImage) {
                    img.src = state.profileImage;
                }
            }
        }

        function unlockFrame(id) {
            const frame = FRAMES.find(f => f.id === id);
            if (state.xp >= frame.price) {
                state.xp -= frame.price;
                state.unlockedFrames.push(id);
                saveState();
                renderStore();
                showNotification(`ÿ™ŸÖ ŸÅÿ™ÿ≠ ${frame.name}!`, 'achievement');
                playSound('achievement');
            }
        }

        function equipFrame(id) {
            state.currentFrame = id;
            saveState();
            renderStore();
            applyFrame('homeProfileFrame', 'homeProfileFrame');
            applyFrame('profileFrameContainer', 'profileFrameContainer');
            playSound('click');
        }

        // ==================== THEMES ====================

        function applyTheme(themeId) {
            const theme = THEMES.find(t => t.id === themeId) || THEMES[0];
            document.body.className = `${theme.class} min-h-screen flex flex-col overflow-x-hidden`;
        }

        function setTheme(themeId) {
            state.currentTheme = themeId;
            applyTheme(themeId);
            saveState();
            renderThemes();
            playSound('click');
        }

        function renderThemes() {
            const container = document.getElementById('themes-container');
            if (!container) return;
            
            container.innerHTML = THEMES.map(theme => `
                <button onclick="setTheme('${theme.id}')" class="p-3 rounded-xl flex items-center gap-3 transition-all ${state.currentTheme === theme.id ? 'border-2' : 'border'}" style="background: rgba(0,0,0,0.3); border-color: ${state.currentTheme === theme.id ? theme.color : 'var(--border-color)'};">
                    <div class="w-8 h-8 rounded-full" style="background: ${theme.color}; box-shadow: 0 0 15px ${theme.color};"></div>
                    <span class="font-bold" style="color: var(--text-primary);">${theme.name}</span>
                    ${state.currentTheme === theme.id ? '<i data-lucide="check" class="w-4 h-4 mr-auto" style="color: #00ff88;"></i>' : ''}
                </button>
            `).join('');
            lucide.createIcons();
        }

        // ==================== SECRET CODE ====================

        function activateSecretCode() {
            const input = document.getElementById('secret-code-input');
            const code = input.value.trim();
            
            if (code === '2981') {
                if (!state.unlockedSkins.includes('rainbow')) {
                    state.unlockedSkins.push('rainbow');
                    state.currentSkin = 'rainbow';
                    saveState();
                    showNotification('ÿ™ŸÖ ŸÅÿ™ÿ≠ ÿ≥ŸÉŸÜ Rainbow Master!', 'achievement');
                    playSound('achievement');
                } else {
                    showNotification('Ÿáÿ∞ÿß ÿßŸÑÿ≥ŸÉŸÜ ŸÖŸÅÿ™Ÿàÿ≠ ÿ®ÿßŸÑŸÅÿπŸÑ');
                }
            } else if (code === 'DIVISION1') {
                if (!state.unlockedFrames.includes('frame-division1')) {
                    state.unlockedFrames.push('frame-division1');
                    state.currentFrame = 'frame-division1';
                    saveState();
                    showNotification('ÿ™ŸÖ ŸÅÿ™ÿ≠ ÿ•ÿ∑ÿßÿ± Division 1!', 'achievement');
                    playSound('achievement');
                } else {
                    showNotification('Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ∑ÿßÿ± ŸÖŸÅÿ™Ÿàÿ≠ ÿ®ÿßŸÑŸÅÿπŸÑ');
                }
            } else if (UNBAN_CODES.includes(code) && state.isBanned) {
                state.isBanned = false;
                state.unbanAttempts = 3;
                saveState();
                closeBannedModal();
                showNotification('ÿ™ŸÖ ŸÅŸÉ ÿ≠ÿ∏ÿ± ÿ≠ÿ≥ÿßÿ®ŸÉ!', 'success');
            } else {
                showNotification('ŸÉŸàÿØ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠');
            }
            
            input.value = '';
        }

        // ==================== PLAY AS ====================

        function setPlayAs(symbol) {
            state.playAs = symbol;
            saveState();
            renderPlayAs();
            playSound('click');
        }

        function renderPlayAs() {
            const btnX = document.getElementById('play-as-x');
            const btnO = document.getElementById('play-as-o');
            
            if (btnX && btnO) {
                if (state.playAs === 'X') {
                    btnX.style.background = 'rgba(0, 212, 255, 0.1)';
                    btnX.style.borderColor = 'var(--accent-color)';
                    btnX.style.color = 'var(--accent-color)';
                    btnO.style.background = 'rgba(255,255,255,0.02)';
                    btnO.style.borderColor = 'rgba(255,255,255,0.1)';
                    btnO.style.color = 'var(--text-secondary)';
                } else {
                    btnO.style.background = 'rgba(255, 51, 102, 0.1)';
                    btnO.style.borderColor = 'var(--accent-secondary)';
                    btnO.style.color = 'var(--accent-secondary)';
                    btnX.style.background = 'rgba(255,255,255,0.02)';
                    btnX.style.borderColor = 'rgba(255,255,255,0.1)';
                    btnX.style.color = 'var(--text-secondary)';
                }
            }
        }

        // ==================== STORE ====================

        let storeCategory = 'all';
        let storeRarity = 'all';
        let storeSearch = '';
        let storeSort = 'none';

        function renderStore() {
            const container = document.getElementById('store-container');
            if (!container) return;
            
            let items = [];
            
            if (storeCategory === 'all' || storeCategory === 'skins') {
                items = items.concat(SKINS.filter(s => !s.secret || state.unlockedSkins.includes(s.id)).map(s => ({ ...s, type: 'skin' })));
            }
            if (storeCategory === 'all' || storeCategory === 'frames') {
                items = items.concat(FRAMES.filter(f => !f.secret || state.unlockedFrames.includes(f.id)).map(f => ({ ...f, type: 'frame' })));
            }
            
            if (storeRarity !== 'all') {
                items = items.filter(item => item.rarity === storeRarity);
            }
            
            if (storeSearch) {
                items = items.filter(item => item.name.toLowerCase().includes(storeSearch.toLowerCase()));
            }
            
            if (storeSort === 'asc') {
                items.sort((a, b) => a.price - b.price);
            } else if (storeSort === 'desc') {
                items.sort((a, b) => b.price - a.price);
            }
            
            container.innerHTML = items.map(item => {
                const isUnlocked = item.type === 'skin' ? state.unlockedSkins.includes(item.id) : state.unlockedFrames.includes(item.id);
                const isEquipped = item.type === 'skin' ? state.currentSkin === item.id : state.currentFrame === item.id;
                const canAfford = state.xp >= item.price;
                
                let rarityClass = '';
                if (item.rarity === 'common') rarityClass = 'rarity-common';
                else if (item.rarity === 'rare') rarityClass = 'rarity-rare';
                else if (item.rarity === 'epic') rarityClass = 'rarity-epic';
                else if (item.rarity === 'legendary') rarityClass = 'rarity-legendary';
                
                let previewClass = '';
                if (item.type === 'skin') {
                    previewClass = item.class || '';
                } else {
                    previewClass = `frame-preview ${item.previewClass || ''}`;
                }
                
                return `
                    <div class="store-item">
                        <div class="store-item-preview ${previewClass}">
                            ${item.type === 'skin' ? 'X' : ''}
                        </div>
                        <div class="store-item-info">
                            <div class="store-item-name">${item.name}</div>
                            <div class="store-item-price">
                                <i data-lucide="coins"></i>
                                <span>${item.price.toLocaleString()} XP</span>
                            </div>
                        </div>
                        <div class="store-item-footer">
                            <span class="store-item-rarity ${rarityClass}">${item.rarity}</span>
                            ${isUnlocked ? 
                                `<button onclick="equipItem('${item.type}', '${item.id}')" class="store-item-btn" style="background: ${isEquipped ? 'var(--accent-color)' : 'rgba(255,255,255,0.2)'};">${isEquipped ? 'ŸÖŸèŸÅÿπŸëŸÑ' : 'ÿ™ŸÅÿπŸäŸÑ'}</button>` :
                                `<button onclick="unlockItem('${item.type}', '${item.id}')" class="store-item-btn" ${!canAfford ? 'disabled' : ''} style="background: ${canAfford ? '#ffd700' : 'rgba(255,255,255,0.2)'};">${canAfford ? 'ÿ¥ÿ±ÿßÿ°' : 'ÿ∫Ÿäÿ± ŸÉÿßŸÅ'}</button>`
                            }
                        </div>
                    </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        function unlockItem(type, id) {
            if (type === 'skin') {
                unlockSkin(id);
            } else {
                unlockFrame(id);
            }
        }

        function equipItem(type, id) {
            if (type === 'skin') {
                equipSkin(id);
            } else {
                equipFrame(id);
            }
        }

        function unlockSkin(id) {
            const skin = SKINS.find(s => s.id === id);
            if (state.xp >= skin.price) {
                state.xp -= skin.price;
                state.unlockedSkins.push(id);
                state.currentSkin = id;
                saveState();
                renderStore();
                showNotification(`ÿ™ŸÖ ŸÅÿ™ÿ≠ ${skin.name}!`, 'achievement');
                playSound('achievement');
            }
        }

        function equipSkin(id) {
            state.currentSkin = id;
            saveState();
            renderStore();
            playSound('click');
        }

        function setStoreCategory(category) {
            storeCategory = category;
            document.querySelectorAll('.category-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(`cat-${category}`).classList.add('active');
            renderStore();
        }

        function setRarityFilter(rarity) {
            storeRarity = rarity;
            document.querySelectorAll('[id^="rarity-"]').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`rarity-${rarity}`).classList.add('active');
            renderStore();
        }

        function filterStore() {
            storeSearch = document.getElementById('storeSearch').value;
            renderStore();
        }

        function sortByPrice(order) {
            storeSort = order;
            renderStore();
        }

        // ==================== DIVISION MODE ====================

        function renderDivisions() {
            const container = document.getElementById('divisionContainer');
            if (!container) return;
            
            container.innerHTML = DIVISIONS.map(div => {
                const isCompleted = div.level > state.currentDivision;
                const isCurrent = div.level === state.currentDivision;
                const progress = isCurrent ? (state.divisionPoints / div.required) * 100 : (isCompleted ? 100 : 0);
                
                let difficultyColor = '#00ff88';
                if (div.difficulty === 'medium') difficultyColor = '#ffd700';
                else if (div.difficulty === 'hard') difficultyColor = '#ff6b35';
                else if (div.difficulty === 'genius') difficultyColor = '#ff3366';
                
                return `
                    <div class="division-card ${isCompleted ? 'completed' : ''} ${isCurrent ? 'current' : ''}">
                        <div class="division-badge" style="background: ${difficultyColor}; color: ${div.difficulty === 'beginner' ? 'black' : 'white'};">${div.difficulty}</div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xl font-bold" style="color: ${isCurrent ? 'var(--accent-color)' : 'var(--text-primary)'};">${div.name}</span>
                            <span style="color: #ffd700;">üéÅ ${div.reward} XP</span>
                        </div>
                        <div class="division-stats">
                            <div class="division-stat">
                                <div class="division-stat-value">${div.required}</div>
                                <div class="division-stat-label">ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©</div>
                            </div>
                            <div class="division-stat">
                                <div class="division-stat-value">${isCurrent ? state.divisionPoints : (isCompleted ? div.required : 0)}</div>
                                <div class="division-stat-label">ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≠ÿßŸÑŸäÿ©</div>
                            </div>
                            <div class="division-stat">
                                <div class="division-stat-value">${Math.max(0, div.required - (isCurrent ? state.divisionPoints : 0))}</div>
                                <div class="division-stat-label">ÿßŸÑŸÖÿ™ÿ®ŸÇŸä</div>
                            </div>
                        </div>
                        <div class="division-progress">
                            <div class="division-progress-bar" style="width: ${progress}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDivisionDisplay() {
            const currentDiv = document.getElementById('currentDivision');
            const divisionPoints = document.getElementById('divisionPoints');
            const bestDivision = document.getElementById('bestDivision');
            const divisionCurrentDisplay = document.getElementById('divisionCurrentDisplay');
            const divisionPointsDisplay = document.getElementById('divisionPointsDisplay');
            const divisionRequiredDisplay = document.getElementById('divisionRequiredDisplay');
            const divisionProgressBar = document.getElementById('divisionProgressBar');
            
            if (currentDiv) currentDiv.textContent = state.currentDivision;
            if (divisionPoints) divisionPoints.textContent = state.divisionPoints;
            if (bestDivision) bestDivision.textContent = 10 - state.completedDivisions;
            
            const currentDivisionData = DIVISIONS.find(d => d.level === state.currentDivision);
            if (currentDivisionData) {
                if (divisionCurrentDisplay) divisionCurrentDisplay.textContent = state.currentDivision;
                if (divisionPointsDisplay) divisionPointsDisplay.textContent = state.divisionPoints;
                if (divisionRequiredDisplay) divisionRequiredDisplay.textContent = currentDivisionData.required;
                
                const progress = (state.divisionPoints / currentDivisionData.required) * 100;
                if (divisionProgressBar) divisionProgressBar.style.width = `${Math.min(100, progress)}%`;
            }
        }

        function handleDivisionGameEnd(result, playerSymbol) {
            const currentDivisionData = DIVISIONS.find(d => d.level === state.currentDivision);
            if (!currentDivisionData) return;
            
            let pointsChange = 0;
            
            if (result.winner === playerSymbol) {
                pointsChange = 3;
                showNotification(`ŸÅŸàÿ≤! +3 ŸÜŸÇÿßÿ∑ ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ`, 'success');
                playSound('win');
            } else if (result.winner === 'draw') {
                pointsChange = 1;
                showNotification(`ÿ™ÿπÿßÿØŸÑ! +1 ŸÜŸÇÿ∑ÿ© ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ`, 'success');
                playSound('draw');
            } else {
                pointsChange = -3;
                showNotification(`ÿÆÿ≥ÿßÿ±ÿ©! -3 ŸÜŸÇÿßÿ∑ ŸÅŸä ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ`, 'error');
                playSound('lose');
            }
            
            state.divisionPoints += pointsChange;
            state.divisionPoints = Math.max(0, state.divisionPoints);
            
            if (state.divisionPoints >= currentDivisionData.required) {
                completeDivision();
            }
            
            saveState();
            updateDivisionDisplay();
            renderDivisions();
        }

        function completeDivision() {
            const currentDivisionData = DIVISIONS.find(d => d.level === state.currentDivision);
            if (!currentDivisionData) return;
            
            state.xp += currentDivisionData.reward;
            state.completedDivisions++;
            
            if (state.currentDivision === 1 && !state.completedDivision1) {
                state.completedDivision1 = true;
                state.xp += 100000;
                
                if (!state.unlockedSkins.includes('rainbow')) {
                    state.unlockedSkins.push('rainbow');
                }
                
                if (!state.unlockedFrames.includes('frame-division1')) {
                    state.unlockedFrames.push('frame-division1');
                }
                
                showDivisionCompleteModal(1, 100000 + currentDivisionData.reward);
                
            } else {
                showDivisionCompleteModal(state.currentDivision, currentDivisionData.reward);
            }
            
            if (state.currentDivision > 1) {
                state.currentDivision--;
                state.divisionPoints = 0;
            }
            
            playSound('division-up');
            saveState();
            checkAchievements();
        }

        function showDivisionCompleteModal(division, reward) {
            const overlay = document.getElementById('division-complete-overlay');
            const modal = document.getElementById('division-complete-modal');
            const title = document.getElementById('divisionCompleteTitle');
            const message = document.getElementById('divisionCompleteMessage');
            const rewardText = document.getElementById('divisionRewardText');
            
            if (division === 0) {
                title.textContent = 'üéâ ÿ™ŸáÿßŸÜŸäŸÜÿß! üéâ';
                message.textContent = 'ŸÑŸÇÿØ ÿ£ŸÜŸáŸäÿ™ ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜÿ≤!';
                rewardText.innerHTML = 'ÿßŸÜÿ™ÿ∏ÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ ÿßŸÑŸÇÿßÿØŸÖ ŸÇÿ±Ÿäÿ®ÿßŸã...';
            } else if (division === 1) {
                title.textContent = 'üèÜ ÿ£ÿ≥ÿ∑Ÿàÿ±ÿ©! üèÜ';
                message.textContent = 'ŸÑŸÇÿØ ÿ£ŸÉŸÖŸÑÿ™ Division 1!';
                rewardText.innerHTML = `${reward} XP<br>ÿ≥ŸÉŸÜ Rainbow Master<br>ÿ•ÿ∑ÿßÿ± Division 1 ÿßŸÑÿ£ÿ≥ÿ∑Ÿàÿ±Ÿä`;
            } else {
                title.textContent = 'ÿ™ŸáÿßŸÜŸäŸÜÿß!';
                message.textContent = `ŸÑŸÇÿØ ÿ£ŸÉŸÖŸÑÿ™ Division ${division}`;
                rewardText.innerHTML = `${reward} XP`;
            }
            
            overlay.classList.add('active');
            modal.classList.add('active');
        }

        function closeDivisionComplete() {
            document.getElementById('division-complete-overlay').classList.remove('active');
            document.getElementById('division-complete-modal').classList.remove('active');
        }

        // ==================== LEVELS ====================

        function renderLevels() {
            const container = document.getElementById('levels-container');
            if (!container) return;
            
            container.innerHTML = LEVELS.map(level => {
                const stars = renderAIStars(level.id);
                return `
                    <div class="mb-4">
                        <button onclick="startGame('computer', '${level.id}')" class="neon-btn w-full rounded-xl p-5 flex items-center justify-between text-right" style="box-shadow: 0 0 20px ${level.color}30;">
                            <div class="flex items-center gap-4">
                                <i data-lucide="${level.icon}" class="w-8 h-8" style="color: ${level.color};"></i>
                                <div>
                                    <div class="font-bold text-lg" style="color: ${level.color};">${level.name}</div>
                                    <div class="text-sm" style="color: var(--text-secondary);">${level.desc}</div>
                                </div>
                            </div>
                            <i data-lucide="chevron-left" class="w-5 h-5" style="color: var(--text-secondary);"></i>
                        </button>
                        ${stars}
                    </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        // ==================== CHALLENGES ====================

        function renderChallenges() {
            const container = document.getElementById('challenges-container');
            if (!container) return;
            
            container.innerHTML = CHALLENGES.map(ch => `
                <div class="glass-card rounded-xl p-5 flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: rgba(0,0,0,0.4); border: 1px solid var(--border-color);">
                            <i data-lucide="${ch.icon}" class="w-6 h-6" style="color: var(--accent-color);"></i>
                        </div>
                        <div>
                            <div class="font-bold" style="color: var(--text-primary);">${ch.title}</div>
                            <div class="text-sm" style="color: var(--text-secondary);">${ch.desc}</div>
                            <div class="text-sm" style="color: #ffd700;">ŸÖŸÉÿßŸÅÿ£ÿ©: ${ch.reward} XP</div>
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // ==================== ACHIEVEMENTS ====================

        function renderAchievements() {
            const container = document.getElementById('profile-achievements');
            if (!container) return;
            
            container.innerHTML = ACHIEVEMENTS.map(ach => {
                const completed = state.achievements.includes(ach.id);
                return `
                    <div class="flex items-center gap-4 p-4 rounded-xl transition-all" style="background: ${completed ? 'rgba(0,255,136,0.1)' : 'rgba(0,0,0,0.3)'}; border: 1px solid ${completed ? 'rgba(0,255,136,0.3)' : 'var(--border-color)'};">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background: ${completed ? 'rgba(0,255,136,0.2)' : 'rgba(255,255,255,0.05)'};">
                            <i data-lucide="${ach.icon}" class="w-6 h-6" style="color: ${completed ? '#00ff88' : 'var(--text-secondary)'};"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-bold" style="color: ${completed ? '#00ff88' : 'var(--text-primary)'};">${ach.title}</div>
                            <div class="text-sm" style="color: var(--text-secondary);">${ach.desc}</div>
                            <div class="text-sm" style="color: #ffd700;">+${ach.xp} XP</div>
                        </div>
                        <i data-lucide="${completed ? 'check-circle' : 'circle'}" class="w-6 h-6" style="color: ${completed ? '#00ff88' : 'var(--text-secondary)'};"></i>
                    </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        function checkAchievements() {
            ACHIEVEMENTS.forEach(ach => {
                if (!state.achievements.includes(ach.id) && ach.check(state)) {
                    state.achievements.push(ach.id);
                    state.xp += ach.xp;
                    showNotification(`ÿ•ŸÜÿ¨ÿßÿ≤ ÿ¨ÿØŸäÿØ: ${ach.title}! +${ach.xp} XP`, 'achievement');
                }
            });
            saveState();
        }

        // ==================== VAR FUNCTIONS ====================

        function showVAR() {
            if (state.moveHistory.length === 0) {
                showNotification('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ≠ÿ±ŸÉÿßÿ™ ŸÑÿπÿ±ÿ∂Ÿáÿß', 'info');
                return;
            }
            
            varMoveIndex = 0;
            updateVARBoard();
            
            const overlay = document.getElementById('var-modal-overlay');
            const modal = document.getElementById('var-modal');
            overlay.classList.add('active');
            modal.classList.add('active');
            
            renderVARTimeline();
        }

        function closeVAR() {
            if (varInterval) {
                clearInterval(varInterval);
                varIsPlaying = false;
            }
            
            document.getElementById('var-modal-overlay').classList.remove('active');
            document.getElementById('var-modal').classList.remove('active');
        }

        function renderVARTimeline() {
            const timeline = document.getElementById('var-timeline');
            timeline.innerHTML = '';
            
            for (let i = 0; i <= state.moveHistory.length; i++) {
                const dot = document.createElement('div');
                dot.className = 'var-timeline-dot';
                
                if (i === 0) {
                    dot.textContent = '‚óè';
                } else {
                    const move = state.moveHistory[i-1];
                    dot.textContent = move.player;
                    dot.classList.add(`player-${move.player.toLowerCase()}`);
                }
                
                if (i === varMoveIndex) {
                    dot.classList.add('active');
                }
                
                dot.onclick = () => {
                    varMoveIndex = i;
                    updateVARBoard();
                    renderVARTimeline();
                };
                
                timeline.appendChild(dot);
            }
        }

        function updateVARBoard() {
            const board = document.getElementById('var-board');
            board.innerHTML = '';
            
            let currentBoard;
            if (varMoveIndex === 0) {
                currentBoard = Array(9).fill(null);
            } else {
                currentBoard = [...state.moveHistory[varMoveIndex - 1].board];
            }
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'var-cell';
                
                if (currentBoard[i]) {
                    cell.innerHTML = `<span>${currentBoard[i]}</span>`;
                    if (state.winningLine && state.winningLine.includes(i) && varMoveIndex === state.moveHistory.length) {
                        cell.classList.add('win-cell');
                    }
                }
                
                board.appendChild(cell);
            }
            
            document.getElementById('var-move-counter').textContent = `ÿßŸÑÿ≠ÿ±ŸÉÿ© ${varMoveIndex} / ${state.moveHistory.length}`;
        }

        function varPrev() {
            if (varMoveIndex > 0) {
                varMoveIndex--;
                updateVARBoard();
                renderVARTimeline();
            }
        }

        function varNext() {
            if (varMoveIndex < state.moveHistory.length) {
                varMoveIndex++;
                updateVARBoard();
                renderVARTimeline();
            }
        }

        function varRestart() {
            varMoveIndex = 0;
            updateVARBoard();
            renderVARTimeline();
        }

        function varPause() {
            if (varIsPlaying) {
                clearInterval(varInterval);
                varIsPlaying = false;
                document.getElementById('var-pause-btn').innerHTML = '<i data-lucide="play"></i>';
            } else {
                varIsPlaying = true;
                document.getElementById('var-pause-btn').innerHTML = '<i data-lucide="pause"></i>';
                
                varInterval = setInterval(() => {
                    if (varMoveIndex < state.moveHistory.length) {
                        varMoveIndex++;
                        updateVARBoard();
                        renderVARTimeline();
                    } else {
                        clearInterval(varInterval);
                        varIsPlaying = false;
                        document.getElementById('var-pause-btn').innerHTML = '<i data-lucide="play"></i>';
                    }
                }, 1000);
            }
            
            lucide.createIcons();
        }

        // ==================== ADAPTIVE AI ====================

        function updateAdaptiveDifficulty(playerWon) {
            if (playerWon) {
                state.adaptiveData.playerSkill = Math.min(1, state.adaptiveData.playerSkill + 0.1);
            } else {
                state.adaptiveData.playerSkill = Math.max(0, state.adaptiveData.playerSkill - 0.1);
            }
            
            if (state.adaptiveData.playerSkill < 0.25) {
                state.adaptiveData.currentDifficulty = 'beginner';
            } else if (state.adaptiveData.playerSkill < 0.5) {
                state.adaptiveData.currentDifficulty = 'medium';
            } else if (state.adaptiveData.playerSkill < 0.75) {
                state.adaptiveData.currentDifficulty = 'hard';
            } else {
                state.adaptiveData.currentDifficulty = 'genius';
            }
            
            state.adaptiveData.matchesPlayed++;
            saveState();
        }

        function getAdaptiveMove(computer, player) {
            if (state.adaptiveData.matchesPlayed < 3) {
                return getBeginnerMove(state.board);
            }
            
            switch(state.adaptiveData.currentDifficulty) {
                case 'beginner':
                    return getBeginnerMove(state.board);
                case 'medium':
                    return getMediumMove(state.board, computer, player);
                case 'hard':
                    return getHardMove(state.board, computer, player);
                case 'genius':
                    return getGeniusMove(computer, player);
                default:
                    return getMediumMove(state.board, computer, player);
            }
        }

        // ==================== AI FUNCTIONS ====================

        function getBeginnerMove(board) {
            const empty = board.map((v, i) => v === null ? i : null).filter(v => v !== null);
            
            if (Math.random() < 0.5) {
                return empty[Math.floor(Math.random() * empty.length)];
            }
            
            if (board[4] === null) return 4;
            
            const corners = [0, 2, 6, 8].filter(i => board[i] === null);
            if (corners.length > 0) return corners[Math.floor(Math.random() * corners.length)];
            
            return empty[Math.floor(Math.random() * empty.length)];
        }

        function getMediumMove(board, computer, player) {
            const empty = board.map((v, i) => v === null ? i : null).filter(v => v !== null);
            
            for (let i of empty) {
                const copy = [...board];
                copy[i] = computer;
                if (checkWinner(copy)?.winner === computer) return i;
            }
            
            for (let i of empty) {
                const copy = [...board];
                copy[i] = player;
                if (checkWinner(copy)?.winner === player) return i;
            }
            
            if (board[4] === null) return 4;
            
            const corners = [0, 2, 6, 8].filter(i => board[i] === null);
            if (corners.length > 0) return corners[Math.floor(Math.random() * corners.length)];
            
            return empty[Math.floor(Math.random() * empty.length)];
        }

        function getHardMove(board, computer, player) {
            if (Math.random() < 0.3) {
                return getMediumMove(board, computer, player);
            }
            return getGeniusMove(computer, player);
        }

        function getGeniusMove(computer, player) {
            let bestScore = -Infinity;
            let bestMove = -1;
            
            for (let i = 0; i < 9; i++) {
                if (state.board[i] === null) {
                    state.board[i] = computer;
                    const score = minimax(state.board, 0, false, -Infinity, Infinity, computer, player);
                    state.board[i] = null;
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestMove = i;
                    }
                }
            }
            
            return bestMove;
        }

        function minimax(board, depth, isMax, alpha, beta, computer, player) {
            const result = checkWinner(board);
            if (result) {
                if (result.winner === computer) return 10 - depth;
                if (result.winner === player) return depth - 10;
                return 0;
            }
            
            if (isMax) {
                let maxEval = -Infinity;
                for (let i = 0; i < 9; i++) {
                    if (board[i] === null) {
                        board[i] = computer;
                        const score = minimax(board, depth + 1, false, alpha, beta, computer, player);
                        board[i] = null;
                        maxEval = Math.max(maxEval, score);
                        alpha = Math.max(alpha, score);
                        if (beta <= alpha) break;
                    }
                }
                return maxEval;
            } else {
                let minEval = Infinity;
                for (let i = 0; i < 9; i++) {
                    if (board[i] === null) {
                        board[i] = player;
                        const score = minimax(board, depth + 1, true, alpha, beta, computer, player);
                        board[i] = null;
                        minEval = Math.min(minEval, score);
                        beta = Math.min(beta, score);
                        if (beta <= alpha) break;
                    }
                }
                return minEval;
            }
        }

        function getComputerMove() {
            const empty = state.board.map((v, i) => v === null ? i : null).filter(v => v !== null);
            if (empty.length === 0) return -1;
            
            const computer = state.playAs === 'X' ? 'O' : 'X';
            const player = state.playAs;
            
            switch (state.difficulty) {
                case 'beginner':
                    return getBeginnerMove(state.board);
                case 'medium':
                    return getMediumMove(state.board, computer, player);
                case 'hard':
                    return getHardMove(state.board, computer, player);
                case 'genius':
                    return getGeniusMove(computer, player);
                case 'adaptive':
                    return getAdaptiveMove(computer, player);
                default:
                    return empty[Math.floor(Math.random() * empty.length)];
            }
        }

        // ==================== GAME LOGIC ====================

        function startGame(mode, difficulty = 'beginner') {
            state.gameMode = mode;
            state.difficulty = difficulty;
            state.gameStartTime = Date.now();
            state.moveHistory = [];
            resetBoard();
            
            navigateTo('game');
            
            const playerSymbol = state.playAs;
            document.getElementById('player-x-name').textContent = mode === 'computer' ? (playerSymbol === 'X' ? state.profileName : 'ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ±') : 'ŸÑÿßÿπÿ® 1';
            document.getElementById('player-o-name').textContent = mode === 'computer' ? (playerSymbol === 'O' ? state.profileName : 'ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ±') : 'ŸÑÿßÿπÿ® 2';
            
            const modeIndicator = document.getElementById('gameModeIndicator');
            if (mode === 'division') {
                modeIndicator.innerHTML = `<span style="color: #ff3366;">ÿ∑Ÿàÿ± ÿßŸÑÿØŸäŸÅŸäÿ¨ŸÜ - Division ${state.currentDivision}</span>`;
            } else if (mode === 'computer') {
                const level = LEVELS.find(l => l.id === difficulty);
                modeIndicator.innerHTML = `<span style="color: ${level.color};">ŸÖÿ≥ÿ™ŸàŸâ ${level.name}</span>`;
            } else {
                modeIndicator.innerHTML = '<span style="color: var(--accent-color);">ÿ∂ÿØ ÿµÿØŸäŸÇ</span>';
            }
            
            if (mode !== 'friend' && playerSymbol === 'O') {
                state.isComputerTurn = true;
                setTimeout(() => {
                    const move = getComputerMove();
                    if (move !== -1) makeMove(move, 'X');
                    state.isComputerTurn = false;
                }, 800);
            }
            
            // AD TIMER REMOVED
        }

        function resetBoard() {
            state.board = Array(9).fill(null);
            state.isXNext = true;
            state.winner = null;
            state.winningLine = null;
            state.isComputerTurn = false;
            
            const boardEl = document.getElementById('game-board');
            boardEl.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'game-cell w-24 h-24 md:w-28 md:h-28 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-display';
                btn.id = `cell-${i}`;
                btn.onmouseenter = () => playSound('hover');
                btn.onclick = () => handleMove(i);
                boardEl.appendChild(btn);
            }
            
            updateGameStatus();
            document.getElementById('game-controls').style.opacity = '0';
            updateWinStreak();
        }

        function handleMove(index) {
            if (state.board[index] || state.winner || state.isComputerTurn) return;
            
            const currentPlayer = state.isXNext ? 'X' : 'O';
            
            if (state.gameMode !== 'friend') {
                if (currentPlayer !== state.playAs) return;
            }
            
            makeMove(index, currentPlayer);
            
            if (!state.winner && state.gameMode !== 'friend') {
                state.isComputerTurn = true;
                const delay = 500 + Math.random() * 500;
                setTimeout(() => {
                    const computerSymbol = state.playAs === 'X' ? 'O' : 'X';
                    const move = getComputerMove();
                    if (move !== -1) {
                        makeMove(move, computerSymbol);
                    }
                    state.isComputerTurn = false;
                }, delay);
            }
        }

        function makeMove(index, player) {
            state.board[index] = player;
            
            state.moveHistory.push({
                player: player,
                position: index,
                board: [...state.board]
            });
            
            const cell = document.getElementById(`cell-${index}`);
            const skin = SKINS.find(s => s.id === state.currentSkin) || SKINS[0];
            
            if (skin.class) {
                cell.classList.add(skin.class);
            }
            
            cell.innerHTML = `<span class="animate-pop-in">${player}</span>`;
            cell.classList.add('disabled');
            
            playSound('click');
            
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
            
            const result = checkWinner(state.board);
            if (result) {
                state.winner = result.winner;
                state.winningLine = result.line;
                handleGameEnd(result);
            } else {
                state.isXNext = !state.isXNext;
            }
            
            updateGameStatus();
        }

        function checkWinner(board) {
            const lines = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];
            
            for (const [a, b, c] of lines) {
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    return { winner: board[a], line: [a, b, c] };
                }
            }
            
            if (board.every(c => c !== null)) {
                return { winner: 'draw', line: null };
            }
            
            return null;
        }

        function handleGameEnd(result) {
            document.getElementById('game-controls').style.opacity = '1';
            state.stats.totalMatches++;
            
            const playerSymbol = state.playAs;
            const computerSymbol = playerSymbol === 'X' ? 'O' : 'X';
            
            let xpChange = 0;
            
            if (state.gameMode === 'division') {
                handleDivisionGameEnd(result, playerSymbol);
                
            } else if (state.gameMode === 'computer') {
                if (result.winner === playerSymbol) {
                    state.stats.wins++;
                    state.currentWinStreak++;
                    if (state.currentWinStreak > state.stats.bestStreak) {
                        state.stats.bestStreak = state.currentWinStreak;
                    }
                    
                    const rewards = { 
                        beginner: 150, 
                        medium: 300, 
                        hard: 500, 
                        genius: 800,
                        adaptive: 600 
                    };
                    const reward = rewards[state.difficulty] || 30;
                    state.xp += reward;
                    xpChange = reward;
                    
                    if (state.difficulty === 'genius') {
                        state.beatenGenius = true;
                    }
                    if (state.difficulty === 'adaptive') {
                        state.beatenAdaptive = true;
                    }
                    
                    if (state.difficulty === 'adaptive') {
                        updateAdaptiveDifficulty(true);
                    }
                    
                    incrementAIProgress(state.difficulty);
                    
                    showNotification(`ŸÅŸàÿ≤! +${reward} XP`);
                    playSound('win');
                    
                    try {
                        document.getElementById('win-sound').play();
                    } catch (e) {}
                    
                } else if (result.winner === computerSymbol) {
                    state.stats.losses++;
                    state.currentWinStreak = 0;
                    xpChange = 0;
                    
                    if (state.difficulty === 'adaptive') {
                        updateAdaptiveDifficulty(false);
                    }
                    
                    showNotification('ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÅÿßÿ≤!');
                    playSound('lose');
                    
                    try {
                        document.getElementById('lose-sound').play();
                    } catch (e) {}
                    
                } else {
                    state.stats.draws++;
                    state.currentWinStreak = 0;
                    state.xp += 15;
                    xpChange = 15;
                    
                    if (state.difficulty === 'adaptive') {
                        updateAdaptiveDifficulty(false);
                    }
                    
                    showNotification('ÿ™ÿπÿßÿØŸÑ! +15 XP');
                    playSound('draw');
                }
            } else {
                if (result.winner === 'X') {
                    state.stats.wins++;
                    state.currentWinStreak++;
                    if (state.currentWinStreak > state.stats.bestStreak) {
                        state.stats.bestStreak = state.currentWinStreak;
                    }
                    state.xp += 25;
                    xpChange = 25;
                    showNotification('X ŸÅÿßÿ≤! +25 XP');
                } else if (result.winner === 'O') {
                    state.stats.losses++;
                    state.currentWinStreak = 0;
                    xpChange = 0;
                    showNotification('O ŸÅÿßÿ≤!');
                } else {
                    state.stats.draws++;
                    state.currentWinStreak = 0;
                    state.xp += 15;
                    xpChange = 15;
                    showNotification('ÿ™ÿπÿßÿØŸÑ! +15 XP');
                }
                playSound(result.winner === 'draw' ? 'draw' : 'win');
            }
            
            showEndGameScreen(result, xpChange);
            
            if (result.line) {
                result.line.forEach(idx => {
                    const cell = document.getElementById(`cell-${idx}`);
                    cell.classList.add('win-cell');
                });
            }
            
            updateWinStreak();
            
            checkAchievements();
            saveState();
        }

        function updateGameStatus() {
            const statusEl = document.getElementById('game-status');
            
            if (state.winner) {
                if (state.winner === 'draw') {
                    statusEl.innerHTML = '<span style="color: var(--text-secondary);">ÿ™ÿπÿßÿØŸÑ!</span>';
                } else {
                    const winnerName = state.gameMode === 'division' ? 
                        (state.winner === state.playAs ? 'ŸÅŸàÿ≤!' : 'ÿÆÿ≥ÿßÿ±ÿ©!') :
                        state.gameMode === 'computer' ? 
                        (state.winner === state.playAs ? 'ÿ£ŸÜÿ™ ŸÅÿ≤ÿ™!' : 'ÿßŸÑŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÅÿßÿ≤!') :
                        `${state.winner} ŸÅÿßÿ≤!`;
                    const color = state.winner === 'X' ? 'var(--accent-color)' : 'var(--accent-secondary)';
                    statusEl.innerHTML = `<span style="color: ${color};">${winnerName}</span>`;
                }
            } else {
                const current = state.isXNext ? 'X' : 'O';
                const color = current === 'X' ? 'var(--accent-color)' : 'var(--accent-secondary)';
                statusEl.innerHTML = `ÿßŸÑÿØŸàÿ±: <span style="color: ${color};">${current}</span>`;
            }
        }

        function endGameAndReturn() {
            resetBoard();
            navigateTo('home');
            renderAll();
        }

        // ==================== TIPS ====================

        function showTipOfDay() {
            const tip = TIPS[Math.floor(Math.random() * TIPS.length)];
            const tipEl = document.getElementById('tip-of-day');
            if (tipEl) tipEl.textContent = tip;
        }

        function openGuide() {
            document.getElementById('guide-modal-overlay').classList.add('active');
            document.getElementById('guide-modal').classList.add('active');
            playSound('click');
        }

        function closeGuide() {
            document.getElementById('guide-modal-overlay').classList.remove('active');
            document.getElementById('guide-modal').classList.remove('active');
        }

        // ==================== RESET ====================

        function resetProgress() {
            if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ŸÉŸÑ ÿßŸÑÿ™ŸÇÿØŸÖÿü Ÿáÿ∞ÿß ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá.')) {
                localStorage.removeItem('xo-arena-v5');
                localStorage.removeItem('aiProgress');
                location.reload();
            }
        }

        // ==================== RENDER ALL ====================

        function renderAll() {
            const rank = getRank(state.xp);
            
            const homeUsername = document.getElementById('home-username');
            const homeRank = document.getElementById('home-rank');
            const homeXP = document.getElementById('home-xp');
            const homeWins = document.getElementById('home-wins');
            const homeLosses = document.getElementById('home-losses');
            const homeDraws = document.getElementById('home-draws');
            
            if (homeUsername) homeUsername.textContent = state.profileName;
            if (homeRank) {
                homeRank.textContent = rank.name;
                homeRank.style.background = rank.color;
            }
            if (homeXP) homeXP.textContent = `${state.xp} XP`;
            if (homeWins) homeWins.textContent = state.stats.wins;
            if (homeLosses) homeLosses.textContent = state.stats.losses;
            if (homeDraws) homeDraws.textContent = state.stats.draws;
            
            const homeImg = document.getElementById('home-profile-img');
            if (homeImg) {
                if (state.profileImage) {
                    homeImg.src = state.profileImage;
                } else {
                    homeImg.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'50\' fill=\'%231e293b\'/%3E%3Ccircle cx=\'50\' cy=\'35\' r=\'20\' fill=\'%2300d4ff\'/%3E%3Cellipse cx=\'50\' cy=\'80\' rx=\'30\' ry=\'25\' fill=\'%2300d4ff\'/%3E%3C/svg%3E';
                }
                homeImg.style.opacity = '1';
            }
            
            applyFrame('homeProfileFrame', 'homeProfileFrame');
            applyFrame('profileFrameContainer', 'profileFrameContainer');
            
            const gameXP = document.getElementById('game-xp');
            if (gameXP) gameXP.textContent = `${state.xp} XP`;
            
            const storeXP = document.getElementById('store-xp');
            if (storeXP) storeXP.textContent = state.xp;
            
            const profileXP = document.getElementById('profile-xp');
            const profileRank = document.getElementById('profile-rank');
            const profileNameInput = document.getElementById('profile-name-input');
            const dailyStreak = document.getElementById('daily-streak');
            
            if (profileXP) profileXP.textContent = `${state.xp} XP`;
            if (profileRank) {
                profileRank.textContent = rank.name;
                profileRank.style.background = rank.color;
            }
            if (profileNameInput) profileNameInput.value = state.profileName;
            if (dailyStreak) dailyStreak.textContent = state.dailyStreak;
            
            const profileImg = document.getElementById('profile-img');
            if (profileImg) {
                if (state.profileImage) {
                    profileImg.src = state.profileImage;
                } else {
                    profileImg.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'50\' fill=\'%231e293b\'/%3E%3Ccircle cx=\'50\' cy=\'35\' r=\'20\' fill=\'%2300d4ff\'/%3E%3Cellipse cx=\'50\' cy=\'80\' rx=\'30\' ry=\'25\' fill=\'%2300d4ff\'/%3E%3C/svg%3E';
                }
                profileImg.style.opacity = '1';
            }
            
            const statTotal = document.getElementById('stat-total');
            const statWins = document.getElementById('stat-wins');
            const statLosses = document.getElementById('stat-losses');
            const statDraws = document.getElementById('stat-draws');
            const statStreak = document.getElementById('stat-streak');
            const statBest = document.getElementById('stat-best');
            
            if (statTotal) statTotal.textContent = state.stats.totalMatches;
            if (statWins) statWins.textContent = state.stats.wins;
            if (statLosses) statLosses.textContent = state.stats.losses;
            if (statDraws) statDraws.textContent = state.stats.draws;
            if (statStreak) statStreak.textContent = state.stats.winStreak;
            if (statBest) statBest.textContent = state.stats.bestStreak;
            
            const nextReward = document.getElementById('next-reward-amount');
            if (nextReward) nextReward.textContent = `${getNextReward()} XP`;
            
            updateDivisionDisplay();
            
            renderStore();
            renderLevels();
            renderChallenges();
            renderThemes();
            renderPlayAs();
            renderAchievements();
            renderDivisions();
            updateSoundIcon();
            updateMusicUI();
            updateWinStreak();
        }

        // ==================== RIPPLE EFFECT ====================

        document.addEventListener('click', function(e) {
            if (e.target.closest('.neon-btn')) {
                const btn = e.target.closest('.neon-btn');
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                const rect = btn.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = e.clientX - rect.left - size / 2 + 'px';
                ripple.style.top = e.clientY - rect.top - size / 2 + 'px';
                btn.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            }
        });

        // ==================== START ====================

        window.onload = function() {
            init();
        };

        // ÿ¨ÿπŸÑ ÿßŸÑÿØŸàÿßŸÑ ŸÖÿ™ÿßÿ≠ÿ© ÿπÿßŸÑŸÖŸäÿßŸã
        window.toggleSettingsPanel = toggleSettingsPanel;
        window.navigateToAndCloseSettings = navigateToAndCloseSettings;
        window.openSettingsAndNavigate = openSettingsAndNavigate;
        window.acceptCookies = acceptCookies;
        window.declineCookies = declineCookies;
        window.toggleSound = toggleSound;
        window.toggleMusic = toggleMusic;
        window.nextSong = nextSong;
        window.previousSong = previousSong;
        window.changeSong = changeSong;
        window.navigateTo = navigateTo;
        window.startGame = startGame;
        window.startDivisionMatch = startDivisionMatch;
        window.claimDailyReward = claimDailyReward;
        window.handleProfileImage = handleProfileImage;
        window.saveProfileName = saveProfileName;
        window.setTheme = setTheme;
        window.setPlayAs = setPlayAs;
        window.activateSecretCode = activateSecretCode;
        window.unlockSkin = unlockSkin;
        window.equipSkin = equipSkin;
        window.unlockFrame = unlockFrame;
        window.equipFrame = equipFrame;
        window.resetProgress = resetProgress;
        window.openGuide = openGuide;
        window.closeGuide = closeGuide;
        window.closeDivisionComplete = closeDivisionComplete;
        window.endGameAndReturn = endGameAndReturn;
        window.resetBoard = resetBoard;
        window.showLoadingAndReset = showLoadingAndReset;
        window.setStoreCategory = setStoreCategory;
        window.setRarityFilter = setRarityFilter;
        window.filterStore = filterStore;
        window.sortByPrice = sortByPrice;
        window.showNotification = showNotification;
        window.handleLogoClick = handleLogoClick;
        
        window.showVAR = showVAR;
        window.closeVAR = closeVAR;
        window.varPrev = varPrev;
        window.varNext = varNext;
        window.varPause = varPause;
        window.varRestart = varRestart;
        
        // AD FUNCTIONS REMOVED
        
        window.shareOnFacebook = shareOnFacebook;
        window.shareOnTwitter = shareOnTwitter;
        window.shareOnWhatsApp = shareOnWhatsApp;
        window.shareOnTelegram = shareOnTelegram;
        window.verifyShare = verifyShare;
        
        window.attemptUnban = attemptUnban;
        window.closeBannedModal = closeBannedModal;
        
        window.closeWhatsNew = closeWhatsNew;
        
        window.showFriendsOptions = showFriendsOptions;
        window.closeFriendsOptions = closeFriendsOptions;
        window.showFriendsOnlineOptions = showFriendsOnlineOptions;
        window.closeFriendsOnline = closeFriendsOnline;
        window.createRoom = createRoom;
        window.joinRoom = joinRoom;
        window.leaveRoom = leaveRoom;
        window.showRoomSettings = showRoomSettings;
        window.closeRoomSettings = closeRoomSettings;
        window.saveRoomSettings = saveRoomSettings;
        window.restartMatch = restartMatch;
        window.kickPlayer = kickPlayer;
        window.closeRoom = closeRoom;
        window.copyRoomCode = copyRoomCode;
        
        window.showOnlineMatchesOptions = showOnlineMatchesOptions;
        window.closeOnlineMatches = closeOnlineMatches;
        window.selectXpAmount = selectXpAmount; // RENAMED
        window.startMatchmaking = startMatchmaking;
        
        window.showDivisionOptions = showDivisionOptions;
        window.closeDivisionOptions = closeDivisionOptions;
        window.startOnlineDivision = startOnlineDivision;
    </script>

    <!-- ========== FIREBASE INITIALIZATION (MODIFIED) ========== -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, deleteDoc, collection, query, where, onSnapshot, serverTimestamp, runTransaction } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC6R4pN1jidNd3bd0U9_hPTAD6d-YA3CP8",
            authDomain: "xo-arena-5f15d.firebaseapp.com",
            projectId: "xo-arena-5f15d",
            storageBucket: "xo-arena-5f15d.firebasestorage.app",
            messagingSenderId: "271480047003",
            appId: "1:271480047003:web:b8215ce214f68502fc4d3e"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        // ‚úÖ ÿ¨ÿπŸÑ ŸÉŸÑ ÿßŸÑŸàÿ∏ÿßÿ¶ŸÅ ŸÖÿ™ÿßÿ≠ÿ© ŸÅŸä ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿπÿßŸÖ (window)
        window.db = db;
        window.doc = doc;
        window.collection = collection;
        window.getDoc = getDoc;
        window.setDoc = setDoc;
        window.updateDoc = updateDoc;
        window.deleteDoc = deleteDoc;
        window.onSnapshot = onSnapshot;
        window.serverTimestamp = serverTimestamp;
        window.runTransaction = runTransaction;
        window.auth = auth;

        async function checkAndCreateUserProfile(user) {
            if (!user) return;

            try {
                const userDocRef = doc(db, "users", user.uid);
                const userDocSnap = await getDoc(userDocRef);

                if (!userDocSnap.exists()) {
                    const userData = {
                        username: user.displayName || 'Player',
                        email: user.email,
                        xp: 0,
                        level: 1,
                        division: 10,
                        divisionPoints: 0,
                        wins: 0,
                        losses: 0,
                        avatar: user.photoURL || '',
                        createdAt: serverTimestamp()
                    };
                    
                    await setDoc(userDocRef, userData);
                    
                    state.uid = user.uid;
                    state.profileName = user.displayName || 'Player';
                    if (user.photoURL) {
                        state.profileImage = user.photoURL;
                    }
                    saveState();
                    
                    showNotification(`üéâ ŸÖÿ±ÿ≠ÿ®ÿßŸã ${user.displayName || 'Player'}!`, 'success');
                    
                } else {
                    const userData = userDocSnap.data();
                    
                    state.uid = user.uid;
                    state.profileName = user.displayName || userData.username || 'Player';
                    if (user.photoURL) {
                        state.profileImage = user.photoURL;
                    } else if (userData.avatar) {
                        state.profileImage = userData.avatar;
                    }
                    
                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸÖŸÜ Firestore
                    if (userData.xp !== undefined && userData.xp > state.xp) {
                        state.xp = userData.xp;
                    }
                    if (userData.level !== undefined && userData.level > state.level) {
                        state.level = userData.level;
                    }
                    if (userData.division) {
                        state.currentDivision = userData.division;
                    }
                    if (userData.divisionPoints !== undefined) {
                        state.divisionPoints = userData.divisionPoints;
                    }
                    
                    saveState();
                    showNotification(`ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ ${user.displayName || 'Player'}!`, 'success');
                }
                
                renderAll();
                
            } catch (error) {
                console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ Firestore:", error);
                showNotification("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ.", 'error');
            }
        }

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                await checkAndCreateUserProfile(user);
                updateUIForLoggedInUser(user);
            } else {
                state.uid = null;
                saveState();
                updateUIForLoggedOutUser();
            }
        });

        window.googleSignIn = async function() {
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:', error);
                showNotification('ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.', 'error');
            }
        };

        window.googleSignOut = async function() {
            try {
                await signOut(auth);
                showNotification('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ÿ®ŸÜÿ¨ÿßÿ≠', 'info');
            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨:', error);
                showNotification('ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨', 'error');
            }
        };

        function updateUIForLoggedInUser(user) {
            document.getElementById('googleSignInBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'flex';
            
            const userInfoSection = document.getElementById('userInfoSection');
            userInfoSection.style.display = 'block';
            
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            
            if (user.photoURL) {
                userAvatar.src = user.photoURL;
                userAvatar.style.display = 'block';
            } else {
                userAvatar.style.display = 'none';
            }
            
            userName.textContent = user.displayName || 'ŸÖÿ≥ÿ™ÿÆÿØŸÖ Google';
            userEmail.textContent = user.email || '';
            
            lucide.createIcons();
        }

        function updateUIForLoggedOutUser() {
            document.getElementById('googleSignInBtn').style.display = 'flex';
            document.getElementById('logoutBtn').style.display = 'none';
            document.getElementById('userInfoSection').style.display = 'none';
            lucide.createIcons();
        }

        console.log('üî• Firebase initialized with Authentication & Firestore for Online System');
    </script>
</body>
</html>
